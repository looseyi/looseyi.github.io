<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>WWDC20 - Build SwiftUI views for widgets - </title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="åœŸåœŸEdmondæœ¨" /><meta name="description" content="WWDC20 Session 10033 - Build SwiftUI views for widgets æœ¬æ–‡çŸ¥è¯†ç›®å½• æœ¬æ–‡å±äº WWDC20 ä¸­ Widgets ç³»åˆ—çš„æ–‡ç« ã€‚Widgets æ˜¯ä½¿ç”¨ SwiftUI è¿›è¡Œå¼€å‘çš„ï¼Œå¦‚æœæ‚¨å¯¹ SwiftUI è¿˜ä¸æ˜¯å¾ˆäº†è§£è¯·ç¿»çœ‹ Introduction to SwiftUIã€‚å¦‚" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.82.1 with theme even" />


<link rel="canonical" href="http://looseyi.github.io/post/swiftui/wwdc20-session-10033/" />
  <link href="http://looseyi.github.io/post/swiftui/wwdc20-session-10033/index.xml" rel="alternate" type="application/rss+xml" title="" />
  <link href="http://looseyi.github.io/post/swiftui/wwdc20-session-10033/index.xml" rel="feed" type="application/rss+xml" title="" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">


<link href="/dist/even.c2a46f00.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="WWDC20 - Build SwiftUI views for widgets" />
<meta property="og:description" content="WWDC20 Session 10033 - Build SwiftUI views for widgets æœ¬æ–‡çŸ¥è¯†ç›®å½• æœ¬æ–‡å±äº WWDC20 ä¸­ Widgets ç³»åˆ—çš„æ–‡ç« ã€‚Widgets æ˜¯ä½¿ç”¨ SwiftUI è¿›è¡Œå¼€å‘çš„ï¼Œå¦‚æœæ‚¨å¯¹ SwiftUI è¿˜ä¸æ˜¯å¾ˆäº†è§£è¯·ç¿»çœ‹ Introduction to SwiftUIã€‚å¦‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://looseyi.github.io/post/swiftui/wwdc20-session-10033/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-06-27T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2020-06-27T00:00:00&#43;00:00" />

<meta itemprop="name" content="WWDC20 - Build SwiftUI views for widgets">
<meta itemprop="description" content="WWDC20 Session 10033 - Build SwiftUI views for widgets æœ¬æ–‡çŸ¥è¯†ç›®å½• æœ¬æ–‡å±äº WWDC20 ä¸­ Widgets ç³»åˆ—çš„æ–‡ç« ã€‚Widgets æ˜¯ä½¿ç”¨ SwiftUI è¿›è¡Œå¼€å‘çš„ï¼Œå¦‚æœæ‚¨å¯¹ SwiftUI è¿˜ä¸æ˜¯å¾ˆäº†è§£è¯·ç¿»çœ‹ Introduction to SwiftUIã€‚å¦‚"><meta itemprop="datePublished" content="2020-06-27T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-06-27T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="2444">
<meta itemprop="keywords" content="iOS&#39;,WWDC20&#39;,SwiftUI," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="WWDC20 - Build SwiftUI views for widgets"/>
<meta name="twitter:description" content="WWDC20 Session 10033 - Build SwiftUI views for widgets æœ¬æ–‡çŸ¥è¯†ç›®å½• æœ¬æ–‡å±äº WWDC20 ä¸­ Widgets ç³»åˆ—çš„æ–‡ç« ã€‚Widgets æ˜¯ä½¿ç”¨ SwiftUI è¿›è¡Œå¼€å‘çš„ï¼Œå¦‚æœæ‚¨å¯¹ SwiftUI è¿˜ä¸æ˜¯å¾ˆäº†è§£è¯·ç¿»çœ‹ Introduction to SwiftUIã€‚å¦‚"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Aha Moment</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Aha Moment</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">WWDC20 - Build SwiftUI views for widgets</h1>

      <div class="post-meta">
        <span class="post-time"> 2020-06-27 </span>
        <div class="post-category">
            <a href="/categories/ios/"> iOS </a>
            <a href="/categories/wwdc/"> WWDC </a>
            <a href="/categories/swiftui/"> SwiftUI </a>
            </div>
          <span class="more-meta"> çº¦ 2444 å­— </span>
          <span class="more-meta"> é¢„è®¡é˜…è¯» 5 åˆ†é’Ÿ </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#hello-widget">Hello Widget!</a></li>
    <li><a href="#data-configuration">Data Configuration</a>
      <ul>
        <li><a href="#datestyle">DateStyle</a></li>
      </ul>
    </li>
    <li><a href="#restructuring">Restructuring</a>
      <ul>
        <li><a href="#caffineamountview">CaffineAmountView</a></li>
        <li><a href="#containerrelativeshape">ContainerRelativeShape</a></li>
        <li><a href="#darkmode">DarkMode</a></li>
        <li><a href="#sizecategory">SizeCategory</a></li>
        <li><a href="#placeholder">Placeholder</a></li>
        <li><a href="#widgetfamily">WidgetFamily</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <blockquote>
<p>WWDC20 Session 10033 - <a href="https://wwdc.io/share/wwdc20/10033">Build SwiftUI views for widgets</a></p>
</blockquote>
<h1 id="æœ¬æ–‡çŸ¥è¯†ç›®å½•">æœ¬æ–‡çŸ¥è¯†ç›®å½•</h1>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg7aao2inhj21hc10sn1q.jpg" alt="Build SwiftUI views for widgets"></p>
<p>æœ¬æ–‡å±äº WWDC20 ä¸­ Widgets ç³»åˆ—çš„æ–‡ç« ã€‚Widgets æ˜¯ä½¿ç”¨ SwiftUI è¿›è¡Œå¼€å‘çš„ï¼Œå¦‚æœæ‚¨å¯¹ SwiftUI è¿˜ä¸æ˜¯å¾ˆäº†è§£è¯·ç¿»çœ‹ <a href="https://wwdc.io/share/wwdc20/10119">Introduction to SwiftUI</a>ã€‚å¦‚æœå¸Œæœ›å…ˆäº†è§£æ›´å¤š Widgets è¯·ç§»æ­¥æ–‡æœ«çš„ç›¸å…³é“¾æ¥ã€‚</p>
<h1 id="swiftui-in-widgets">SwiftUI in widgets</h1>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg7aani6pjj21ao0qa47o.jpg" alt="00-opportunityToLearnSwiftUI"></p>
<p>æˆ‘ä»¬å¯ä»¥ä¸º Widgets æä¾›åŸºäºæ—¶é—´çº¿çš„å†…å®¹ï¼Œå®ƒå°†åœ¨é€‚å½“çš„æ—¶æœºå±•ç¤ºåœ¨ iOS 14 æˆ– macOS Big Sur ç³»ç»Ÿçš„ä¸»å±å¹•ä¸Šã€‚å¾—ç›Šäº SwiftUI è‰¯å¥½çš„å±å¹•è‡ªé€‚åº”èƒ½åŠ›ï¼ŒWidgets å¯ä»¥åœ¨ä¸åŒçš„ç³»ç»Ÿä¸Šå±•ç¤ºå‡ºä¸é”™çš„æ•ˆæœã€‚å› æ­¤ï¼Œå°½ç®¡æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå‘å¸ƒåœ¨æ—§ç‰ˆæœ¬çš„ç³»ç»Ÿä¸­ (æ— æ³•ä½¿ç”¨ SwiftUI)ï¼ŒWidgets ä¹Ÿå°†æ˜¯æˆ‘ä»¬å­¦ä¹ å’Œä½¿ç”¨ SwiftUI çš„ç»ä½³æœºä¼šã€‚</p>
<p>Widgets çš„å±•ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg7aankyrfj212l0p77u8.jpg" alt="01-SwiftUI&Widgets"></p>
<p>äº‹ä¸å®œè¿Ÿï¼Œè®©æˆ‘ä»¬ç›´æ¥é€šè¿‡ Demo æ¥ä½“éªŒå¦‚ä½•ä½¿ç”¨ SwiftUI æ¥å¼€å‘ä¸€ä¸ª Widgets</p>
<h1 id="caffiine-drink-demo">Caffiine Drink Demo</h1>
<p>æˆ‘ä»¬å°†è¦åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œç”¨äºè®°å½•å’Œè·Ÿè¸ªæˆ‘ä»¬æ‰€å–çš„å«å’–å•¡å› çš„é¥®æ–™ï¼Œå¹¶ä¼°ç®—å‡ºæˆ‘ä»¬ä½“å†…çš„å’–å•¡å› å«é‡ã€‚ åº”ç”¨å¦‚ä¸‹ï¼š</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg7aanlzjqj21ao0qa45r.jpg" alt="03-coffeineDrinks"></p>
<p>è€Œ Widgets æ­£å¥½å¯ä»¥ä½œä¸ºè¯¥åº”ç”¨ç¨‹åºçš„é‡è¦è¡¥å……ï¼Œä»¥ä¾¿èƒ½å¤Ÿä¸€ç›®äº†ç„¶åœ°çŸ¥é“æˆ‘ä»¬å½“å‰çš„å’–å•¡å› å«é‡ã€‚</p>
<p>è¿™ä¸ªæ˜¯æˆ‘ä»¬å¸Œæœ›å±•ç¤ºçš„ Widget æ•ˆæœï¼š</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg7aannftyj21ao0qadhd.jpg" alt="04-coffeineDrinksItem"></p>
<p>é¦–å…ˆï¼Œå¯ä»¥çœ‹åˆ°å®ƒçš„è§†è§‰å’Œé…è‰²æ–¹æ¡ˆä¸æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºç›¸åŒã€‚</p>
<p>åœ¨é¡¶éƒ¨ï¼Œæˆ‘ä»¬æ˜¾ç¤ºäº†æˆ‘ä»¬ä½“å†…ç›®å‰çš„å’–å•¡å› å«é‡ï¼Œåº•éƒ¨è®°å½•çš„æ˜¯æˆ‘ä»¬å–çš„æœ€åä¸€æ¯å’–å•¡çš„æ—¶é—´ã€‚è¯·æ³¨æ„ âš ï¸ï¼Œå’–å•¡å› å«é‡çš„èƒŒæ™¯å½¢çŠ¶ä¸ widget å½¢çŠ¶æ˜¯åŒå¿ƒåœ†çš„å…³ç³»ï¼Œå®ƒå¯æ˜¯ä½¿ç”¨æˆ‘ä»¬æ–°å‡ºçš„ API æ¥å®ç°çš„å“¦ã€‚</p>
<p>æœ€åï¼Œä¹Ÿå¸Œæœ› widget åº•éƒ¨çš„æŒç»­æ—¶é—´èƒ½å¤Ÿå®æ—¶æ›´æ–°ä»¥å§‹ç»ˆæ­£ç¡®ã€‚</p>
<h2 id="hello-widget">Hello Widget!</h2>
<p>æˆ‘ä»¬å…ˆæ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå¯ä»¥æ˜¯ iOSã€macOS æˆ– Multiplatformï¼š</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg63now4bdj20qo0f0diu.jpg" alt="mutliplatform"></p>
<p>æ¥ç€éœ€è¦å†æ–°å»ºä¸€ä¸ª widge çš„ targetï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©åŸºäº iOS é¡¹ç›®çš„ widgetï¼š</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg7aanjpejj20ka0em76h.jpg" alt="01-xcode-widget"></p>
<p>ç”Ÿæˆä¹‹åï¼Œè®©æˆ‘ä»¬é…ä¸Š <code>Hello Widgetï¼</code>ï¼Œå¹¶åœ¨ <code>PreviewProvider</code> å¤„æ·»åŠ ä¸Š <strong><a href="https://developer.apple.com/documentation/widgetkit/widgetpreviewcontext">WidgetPreviewContext</a></strong>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">struct</span> <span class="nc">CafeineDrinkWidget_Previews</span><span class="p">:</span> <span class="n">PreviewProvider</span> <span class="p">{</span>

    <span class="kd">static</span> <span class="kd">var</span> <span class="nv">previews</span><span class="p">:</span> <span class="n">some</span> <span class="n">View</span> <span class="p">{</span>
        <span class="n">Group</span> <span class="p">{</span>
            <span class="n">CafeineDrinkWidgetEntryView</span><span class="p">(</span><span class="n">entry</span><span class="p">:</span> <span class="p">.</span><span class="n">preivewEntry</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="p">.</span><span class="n">previewData</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="p">.</span><span class="n">previewContext</span><span class="p">(</span><span class="n">WidgetPreviewContext</span><span class="p">(</span><span class="n">family</span><span class="p">:</span> <span class="p">.</span><span class="n">systemSmall</span><span class="p">))</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬ç›®å‰æä¾›çš„ widget æ ·å¼åˆ†ä¸ºä¸‰ç§ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">public</span> <span class="kd">enum</span> <span class="nc">WidgetFamily</span> <span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="nb">RawRepresentable</span><span class="p">,</span> <span class="n">CustomDebugStringConvertible</span><span class="p">,</span> <span class="n">CustomStringConvertible</span> <span class="p">{</span>
    <span class="c1">/// A small widget.</span>
    <span class="k">case</span> <span class="n">systemSmall</span>
    <span class="c1">/// A medium-sized widget.</span>
    <span class="k">case</span> <span class="n">systemMedium</span>
    <span class="c1">/// A large widget.</span>
    <span class="k">case</span> <span class="n">systemLarge</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹æœ€ç®€ç‰ˆæœ¬çš„ widget ğŸ˜„ ã€‚</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg7aannd6ej216u0rs1c4.jpg" alt="02-HelloWidget"></p>
<h2 id="data-configuration">Data Configuration</h2>
<p>æ¥ç€ï¼Œè®©æˆ‘ä»¬æŠŠ <code>CaffeineWidgetData</code>  é…ç½®èµ·æ¥ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">struct</span> <span class="nc">CaffeineWidgetData</span> <span class="p">{</span>

    <span class="kd">public</span> <span class="kd">let</span> <span class="nv">drinkName</span><span class="p">:</span> <span class="nb">String</span>
    <span class="kd">public</span> <span class="kd">let</span> <span class="nv">drinkData</span><span class="p">:</span> <span class="n">Date</span>
    <span class="kd">public</span> <span class="kd">let</span> <span class="nv">caffeineAmount</span><span class="p">:</span> <span class="n">Measurement</span><span class="p">&lt;</span><span class="n">UnitMass</span><span class="p">&gt;</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="nc">CaffeineWidgetData</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">let</span> <span class="nv">previewData</span> <span class="p">=</span> <span class="n">CaffeineWidgetData</span><span class="p">(</span>
        <span class="n">drinkName</span><span class="p">:</span> <span class="s">&#34;Cappuccino&#34;</span><span class="p">,</span>
        <span class="n">drinkData</span><span class="p">:</span> <span class="n">Date</span><span class="p">().</span><span class="n">advanced</span><span class="p">(</span><span class="n">by</span><span class="p">:</span> <span class="o">-</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">29</span> <span class="o">+</span> <span class="mi">5</span><span class="p">),</span>
        <span class="n">caffeineAmount</span><span class="p">:</span> <span class="n">Measurement</span><span class="p">&lt;</span><span class="n">UnitMass</span><span class="p">&gt;(</span><span class="n">value</span><span class="p">:</span> <span class="mf">56.23</span><span class="p">,</span> <span class="n">unit</span><span class="p">:</span> <span class="p">.</span><span class="n">milligrams</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>æ¥ç€å†åŠ ä¸Šç®€å•çš„ View  <code>LazyVStack</code> å’Œ <code>Text</code> æ¥æ‰¿è½½æˆ‘ä»¬æ–°æ·»çš„æ•°æ®ã€‚æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg7aanormsj211n0sjh5a.jpg" alt="04-previewData"></p>
<p>æœ‰äº†åŸºæœ¬ç»“æ„åï¼Œæˆ‘ä»¬å†ä¸°å¯Œä¸€ä¸‹ã€‚å…ˆåŠ ç‚¹èƒŒæ™¯è‰²ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨ <code>ZStack</code> æ¥åŒ…è£…ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="n">View</span> <span class="p">{</span>
  	<span class="n">ZStack</span> <span class="p">{</span>
      <span class="n">Color</span><span class="p">(</span><span class="s">&#34;cappuccino&#34;</span><span class="p">)</span>

      <span class="n">LazyVStack</span><span class="p">(</span><span class="n">alignment</span><span class="p">:</span> <span class="p">.</span><span class="n">leading</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
   <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>è®©æˆ‘ä»¬æŠŠ <code>drinkName</code> å’Œ <code>drinkDate</code> ä¹Ÿå±•ç¤ºå‡ºæ¥ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="n">Text</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">data</span><span class="p">.</span><span class="n">drinkName</span><span class="si">)</span><span class="s"> â˜•ï¸&#34;</span><span class="p">)</span>
   <span class="p">.</span><span class="n">font</span><span class="p">(.</span><span class="n">body</span><span class="p">)</span>
   <span class="p">.</span><span class="n">bold</span><span class="p">()</span>
   <span class="p">.</span><span class="n">foregroundColor</span><span class="p">(</span><span class="n">Color</span><span class="p">(</span><span class="s">&#34;milk&#34;</span><span class="p">))</span>

<span class="c1">/// NOTE: *New* Date provider API</span>
<span class="n">Text</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">data</span><span class="p">.</span><span class="n">drinkDate</span><span class="p">,</span> <span class="n">style</span><span class="p">:</span> <span class="p">.</span><span class="n">relative</span><span class="si">)</span><span class="s"> ago&#34;</span><span class="p">)</span>
   <span class="p">.</span><span class="n">font</span><span class="p">(.</span><span class="n">caption</span><span class="p">)</span>
   <span class="p">.</span><span class="n">foregroundColor</span><span class="p">(</span><span class="n">Color</span><span class="p">(</span><span class="s">&#34;milk&#34;</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº† SwiftUI æ–°å‡ºçš„ <code>DateStyle</code> API</p>
<h3 id="datestyle">DateStyle</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">public</span> <span class="kd">struct</span> <span class="nc">DateStyle</span> <span class="p">{</span>

    <span class="c1">/// A style displaying only the time component for a date.</span>
    <span class="c1">/// Example output: </span>
    <span class="c1">///     11:23PM</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">let</span> <span class="nv">time</span><span class="p">:</span> <span class="n">Text</span><span class="p">.</span><span class="n">DateStyle</span>

    <span class="c1">/// A style displaying a date.</span>
    <span class="c1">/// Example output:</span>
    <span class="c1">///     June 3, 2019</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">let</span> <span class="nv">date</span><span class="p">:</span> <span class="n">Text</span><span class="p">.</span><span class="n">DateStyle</span>

    <span class="c1">/// A style displaying a date as relative to now.</span>
    <span class="c1">/// Example output:</span>
    <span class="c1">///     2 hours, 23 minutes</span>
    <span class="c1">///     1 year, 1 month</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">let</span> <span class="nv">relative</span><span class="p">:</span> <span class="n">Text</span><span class="p">.</span><span class="n">DateStyle</span>

    <span class="c1">/// A style displaying a date as offset from now.</span>
    <span class="c1">/// Example output:</span>
    <span class="c1">///     +2 hours</span>
    <span class="c1">///     -3 months</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">let</span> <span class="nv">offset</span><span class="p">:</span> <span class="n">Text</span><span class="p">.</span><span class="n">DateStyle</span>

    <span class="c1">/// A style displaying a date as timer counting from now.</span>
    <span class="c1">/// Example output:</span>
    <span class="c1">///    2:32</span>
    <span class="c1">///    36:59:01</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">let</span> <span class="nv">timer</span><span class="p">:</span> <span class="n">Text</span><span class="p">.</span><span class="n">DateStyle</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å†æ¥çœ‹ä¸€çœ¼æ•ˆæœï¼š</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg7aanrer2j214m0rr4ep.jpg" alt="05-allDataUsage"></p>
<h2 id="restructuring">Restructuring</h2>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç¨å¾®è°ƒæ•´ä¸€ä¸‹ä»£ç ç»“æ„ï¼Œå°†å†…éƒ¨çš„ä¸¤ä¸ª <code>LazyStack</code> æŠ½ç¦»æˆå•ç‹¬çš„ Viewã€‚è¿™é‡Œå¯ä»¥ç”¨ Xcode çš„ <code>Extra Subview</code> æ¥å¸®æˆ‘ä»¬å®Œæˆå·¥ä½œï¼Œæˆ‘ä»¬åªéœ€å°† ğŸ–±ï¸ç§»åŠ¨åˆ° <code>LazyStack</code> ä¸Šï¼ŒæŒ‰ä½ <code>Command</code> å¹¶ç‚¹å‡» ğŸ–±ï¸ å°±å¯ä»¥å¼¹å‡ºå¦‚ä¸‹çª—å£ï¼š</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg7aanun9zj20j20ib11g.jpg" alt="06-Extrack Subview"></p>
<p>è°ƒæ•´åï¼Œæˆ‘ä»¬çš„ç»“æ„å°±æ¸…çˆ½å¾ˆå¤šäº†ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="n">View</span> <span class="p">{</span>
    <span class="n">ZStack</span> <span class="p">{</span>
        <span class="n">Color</span><span class="p">(</span><span class="s">&#34;cappuccino&#34;</span><span class="p">)</span>

        <span class="n">LazyVStack</span><span class="p">(</span><span class="n">alignment</span><span class="p">:</span> <span class="p">.</span><span class="n">leading</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">CaffineAmountView</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">data</span><span class="p">)</span>
            <span class="n">Spacer</span><span class="p">()</span>
            <span class="n">DrinkView</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">data</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="p">.</span><span class="n">padding</span><span class="p">(.</span><span class="n">all</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>è®°å¾—ä¸ºæˆ‘ä»¬æ–°åŠ çš„ <code>CaffineAmountView</code> å’Œ <code>DrinkView</code> åŠ ä¸Š <code>CaffeineWidgetData</code> æ•°æ®ã€‚</p>
<h3 id="caffineamountview">CaffineAmountView</h3>
<p>æœ€åå†ç”¨æˆ‘ä»¬çš„å¦ä¸€ä¸ªæ–°çš„ API æ¥ä¿®æ”¹ <code>CaffineAmountView</code>ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="n">View</span> <span class="p">{</span>
    <span class="n">LazyHStack</span> <span class="p">{</span>
        <span class="n">VStack</span><span class="p">(</span><span class="n">alignment</span><span class="p">:</span> <span class="p">.</span><span class="n">leading</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">Text</span><span class="p">(</span><span class="s">&#34;Caffeine&#34;</span><span class="p">)</span>
                <span class="p">.</span><span class="n">font</span><span class="p">(.</span><span class="n">body</span><span class="p">)</span>
                <span class="p">.</span><span class="n">foregroundColor</span><span class="p">(</span><span class="n">Color</span><span class="p">(</span><span class="s">&#34;espresso&#34;</span><span class="p">))</span>
                <span class="p">.</span><span class="n">bold</span><span class="p">()</span>

            <span class="n">Text</span><span class="p">(</span><span class="n">Formatter</span><span class="p">.</span><span class="n">measurement</span><span class="p">.</span><span class="n">string</span><span class="p">(</span><span class="n">from</span><span class="p">:</span> <span class="n">data</span><span class="p">.</span><span class="n">caffeineAmount</span><span class="p">))</span>
                <span class="p">.</span><span class="n">font</span><span class="p">(.</span><span class="n">title</span><span class="p">)</span>
                <span class="p">.</span><span class="n">bold</span><span class="p">()</span>
                <span class="p">.</span><span class="n">foregroundColor</span><span class="p">(</span><span class="n">Color</span><span class="p">(</span><span class="s">&#34;espresso&#34;</span><span class="p">))</span>
                <span class="p">.</span><span class="n">minimumScaleFactor</span><span class="p">(</span><span class="mf">0.8</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="n">Spacer</span><span class="p">(</span><span class="n">minLength</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">// #1</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="n">padding</span><span class="p">(.</span><span class="n">all</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">)</span>
    <span class="p">.</span><span class="n">background</span><span class="p">(</span><span class="n">ContainerRelativeShape</span><span class="p">().</span><span class="n">fill</span><span class="p">(</span><span class="n">Color</span><span class="p">(</span><span class="s">&#34;latte&#34;</span><span class="p">)))</span> <span class="c1">// #2</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å…ˆæ³¨æ„ä¸€ä¸‹ï¼Œè¿™é‡Œå°† <code>Spacer</code> çš„ minLength è®¾ç½®ä¸º 0 æ˜¯ä¸ºäº†å°†æ•´ä¸ª AmountView çš„å†…å®¹æ’‘æ»¡ã€‚ç„¶ååœ¨ç¼–å†™ Demo çš„è¿‡ç¨‹ä¸­å‘ç°æ–°å¢çš„ <code>LazyVStack</code> åœ¨ layout è¿‡ç¨‹ä¸­æœ‰ bugï¼Œæ— æ³•æ­£å¸¸å°†å†…å®¹æ’‘æ»¡ï¼Œæ‰€ä»¥è¿™é‡Œæ”¹å›ç”¨ <code>VStack</code>ã€‚</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg7aanvwo6j21ds0n00wu.jpg" alt="07-LazyVStack"></p>
<h3 id="containerrelativeshape">ContainerRelativeShape</h3>
<blockquote>
<p>A shape that is replaced by an inset version of the current container shape. If no container shape was defined, is replaced by a rectangle.</p>
</blockquote>
<p>ç”±äºä¸åŒå¤§å°çš„è®¾å¤‡å¯èƒ½å¯¹å…¶ widget ä½¿ç”¨ä¸åŒçš„åŠå¾„ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æƒ…å†µå˜å¾—æœ‰äº›éº»çƒ¦ã€‚ è€Œæ–°å‡ºçš„ <code>ContainerRelativeShape</code> æ˜¯ä¸€ç§æ–°çš„å½¢çŠ¶ç±»å‹ï¼Œå®ƒå°†é‡‡ç”¨æœ€æ¥è¿‘çˆ¶è§†å›¾å®¹å™¨å½¢çŠ¶çš„è·¯å¾„ï¼Œå¹¶æ ¹æ®å½¢çŠ¶çš„ä½ç½®ä½¿ç”¨é€‚å½“çš„å€’è§’åŠå¾„ã€‚</p>
<p>é€šè¿‡æ·»åŠ  <code>ContainerRelativeShape</code>ï¼Œæˆ‘ä»¬çš„ AmountView ä¼šé‡‡ç”¨ä¸ç³»ç»Ÿä¸º widget å®šä¹‰å®¹å™¨å½¢çŠ¶ç›¸åŒçš„åŒå¿ƒçš„è§’åŠå¾„ã€‚å¦‚æœæ›´æ”¹ä¸» <code>VStack</code> çš„ padding çš„å€¼ï¼Œåˆ™ AmountView çš„å€’è§’å°†å‘ç”Ÿå˜åŒ–ï¼Œä»¥ä½¿å›´ç»•å®ƒçš„è¾¹æ¡†åœ¨æ‹è§’æ›²çº¿å‘¨å›´ä¿æŒæ’å®šçš„åšåº¦ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä¿®æ”¹å®¹å™¨çš„ padding ä¸º 10ï¼ŒAmountView çš„å€’è§’å˜åŒ–æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg7aanx48dj20n5081god.jpg" alt="08-adjust padding"></p>
<p>##PreviewProvider</p>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹ Widge åœ¨ä¸åŒåœºæ™¯ä¸‹çš„å®é™…æ•ˆæœã€‚</p>
<h3 id="darkmode">DarkMode</h3>
<p>é¦–å…ˆæ˜¯ <code>.envrioment</code> ä¿®é¥°ç¬¦åœ¨ DarkMode ä¸‹çš„æ•ˆæœï¼Œè¿™ä¸ªå…¶å®å®Œå…¨ç”±æˆ‘ä»¬é…ç½®çš„ ColorSet æ¥ä¿è¯çš„ã€‚</p>
<p><img src="http://ww1.sinaimg.cn/large/8157560cly1gg7aao0f8cj20jt05fgmr.jpg" alt="10-colorSet"></p>
<p>ç„¶åæˆ‘ä»¬åœ¨ View ä¸Šæ·»åŠ  <code>colorScheme</code> çš„ç¯å¢ƒé…ç½®å°±å¯ä»¥äº†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="n">CafeineDrinkWidgetEntryView</span><span class="p">(</span><span class="n">entry</span><span class="p">:</span> <span class="p">.</span><span class="n">preivewEntry</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="p">.</span><span class="n">previewData</span><span class="p">)</span>
    <span class="p">.</span><span class="n">previewContext</span><span class="p">(</span><span class="n">WidgetPreviewContext</span><span class="p">(</span><span class="n">family</span><span class="p">:</span> <span class="p">.</span><span class="n">systemSmall</span><span class="p">))</span>
    <span class="p">.</span><span class="n">environment</span><span class="p">(</span><span class="err">\</span><span class="p">.</span><span class="n">colorScheme</span><span class="p">,</span> <span class="p">.</span><span class="n">dark</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="sizecategory">SizeCategory</h3>
<p>å¯é€šè¿‡  <code>.envrioment</code> ä¿®é¥°ç¬¦çš„  <code>sizeCategory</code> æ¥æ§åˆ¶ widget çš„å­—ä½“å¤§å°ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="n">CafeineDrinkWidgetEntryView</span><span class="p">(</span><span class="n">entry</span><span class="p">:</span> <span class="p">.</span><span class="n">preivewEntry</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="p">.</span><span class="n">previewData</span><span class="p">)</span>
    <span class="p">.</span><span class="n">previewContext</span><span class="p">(</span><span class="n">WidgetPreviewContext</span><span class="p">(</span><span class="n">family</span><span class="p">:</span> <span class="p">.</span><span class="n">systemSmall</span><span class="p">))</span>
    <span class="p">.</span><span class="n">environment</span><span class="p">(</span><span class="err">\</span><span class="p">.</span><span class="n">sizeCategory</span><span class="p">,</span> <span class="p">.</span><span class="n">extraExtraLarge</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è¿™ä¸¤ç§æƒ…å†µçš„æ•ˆæœï¼š</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg7aanyx89j218p0sjh3g.jpg" alt="09-previewSize"></p>
<h3 id="placeholder">Placeholder</h3>
<p>ä»Šå¹´çš„ SwiftUI è¿˜æä¾›äº†ä¸€ä¸ªç‰¹åˆ«æ£’çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>isPlaceholder</code> ä¿®é¥°ç¬¦æ¥è®¾ç½®éª¨æ¶å›¾ã€‚</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg7aanzjjqj20v006jach.jpg" alt="11-isPlaceholder"></p>
<p><code>.isPlaceholder</code>  è¿˜æ”¯æŒå¯¹å•ä¸ªè§†å›¾çš„æ§åˆ¶ç­‰ã€‚ä¸è¿‡ï¼Œç›®å‰çš„ Xcode 12 Beta1 ç‰ˆæœ¬è¿˜æ— æ³•ä½¿ç”¨ ğŸ˜…ã€‚å¤§å®¶å°±ä¸”çœ‹ä¸€ä¸‹å§ã€‚</p>
<h3 id="widgetfamily">WidgetFamily</h3>
<p>æœ€åä¸€ä¸ªé¢„è§ˆï¼Œè®©æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹å¦‚ä½•é€šè¿‡ <code>WidgetFamily</code> æ¥æ§åˆ¶ Widge çš„å±•ç¤ºã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">struct</span> <span class="nc">CafeineDrinkWidgetEntryView</span> <span class="p">:</span> <span class="n">View</span> <span class="p">{</span>
    <span class="p">...</span>    
    <span class="p">@</span><span class="n">Environment</span><span class="p">(</span><span class="err">\</span><span class="p">.</span><span class="n">widgetFamily</span><span class="p">)</span> <span class="kd">var</span> <span class="nv">widgetFamily</span>

    <span class="kd">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="n">View</span> <span class="p">{</span>
        <span class="n">ZStack</span> <span class="p">{</span>
            <span class="p">...</span>
            <span class="n">LazyHStack</span> <span class="p">{</span>
                <span class="n">LazyVStack</span><span class="p">(</span><span class="n">alignment</span><span class="p">:</span> <span class="p">.</span><span class="n">leading</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">CaffineAmountView</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">data</span><span class="p">)</span>
                    <span class="n">Spacer</span><span class="p">()</span>
                    <span class="n">DrinkView</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">data</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="p">.</span><span class="n">padding</span><span class="p">(.</span><span class="n">all</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">widgetFamily</span> <span class="p">==</span> <span class="p">.</span><span class="n">systemMedium</span><span class="p">,</span> <span class="kd">let</span> <span class="nv">phoneName</span> <span class="p">=</span> <span class="n">data</span><span class="p">.</span><span class="n">phoneName</span> <span class="p">{</span>
                    <span class="n">Image</span><span class="p">(</span><span class="n">phoneName</span><span class="p">).</span><span class="n">resizable</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œæˆ‘ä»¬åœ¨ <code>widgetFamily</code> ä¸º <code>.systemMedium</code> çš„æƒ…å†µä¸‹ï¼Œä¸ºå…¶æ·»åŠ äº†ä¸€å¼ æœ€åå–è¿‡çš„å’–å•¡çš„å›¾ç‰‡ã€‚</p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg7aao6wfij20y3077n1x.jpg" alt="12-widgetFamily"></p>
<h1 id="new-apis">New APIs</h1>
<p>æœ€åä¸€èŠ‚ï¼Œå†æ¥å›é¡¾ä¸€ä¸‹æˆ‘ä»¬ä½¿ç”¨åˆ°çš„æ–° API</p>
<p><strong>DateStyle</strong></p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg7aanu0ekj20nc0d5jxx.jpg" alt="06-dateTeimAPI"></p>
<p><strong>ContainerRelativeShape</strong></p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg7aant2jjj20nc0d5q6i.jpg" alt="05-relativeShape"></p>
<p><strong>æ–‡æœ«ç¦åˆ©</strong></p>
<p>ç”±äºæœ¬æ–‡çš„ Session å¹¶æœªæä¾›ç›¸åº”çš„ SampleCodeã€‚æœ¬äººåœ¨æ–‡ç« æ’°å†™çš„è¿‡ç¨‹ä¸­ï¼Œé¡ºå¸¦å†™äº†å®Œæ•´çš„ Demoï¼Œå¦‚æœ‰éœ€è¦çš„åŒå­¦å¯ä»¥è‡ªå–ï¼š<a href="https://github.com/looseyi/WWDC20-100330-SampleCode.git">Github</a>ã€‚âš ï¸  æ³¨æ„ï¼Œåœ¨æœ‰çš„ macOS ç³»ç»Ÿä¸Šé€šè¿‡ Xcode 12 Beta è¿è¡Œåå¯èƒ½æ— æ³•åœ¨æ¨¡æ‹Ÿå™¨ä¸ŠæŸ¥çœ‹ widgetï¼Œä¸è¿‡åœ¨ Xcode çš„ sidebar é¢„è§ˆï¼Œå®Œæ•´æ•ˆæœå»ºè®®åœ¨çœŸå®è®¾å¤‡ä½“éªŒã€‚</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/8157560cly1gg89svkl11g20cg0qo1l3.gif" alt="widget.gif"></p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<ul>
<li>è‹¹æœé€šè¿‡ç‹¬ç«‹çš„ taget å°† <code>Widget</code> ä¸ä¸»é¡¹ç›®éš”ç¦»å¼€æ¥ï¼Œå¾ˆå¥½çš„æ”¯æŒäº† Widget å‘å±•ï¼Œå› ä¸ºä¸ä¼šæœ‰å†å²åŒ…è¢±ã€‚</li>
<li><code>Widge</code> çš„å®šä½è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼Œç”¨äºå¼¥è¡¥å®¿ä¸»åº”ç”¨ç¨‹åºæ— æ³•åŠæ—¶å±•ç¤ºç”¨æˆ·æ‰€å…³å¿ƒçš„æ•°æ®ï¼Œè€Œ Widget æ­£å¥½å¾ˆé€‚åˆå±•ç¤ºã€‚</li>
<li>é…åˆè¶Šæ¥è¶Šä¸°å¯Œçš„ SwiftUI çš„åŠŸèƒ½å’Œæ€§èƒ½çš„æå‡ï¼ŒWidget ä¹Ÿèƒ½å¤Ÿä¸ç°æœ‰çš„è‹¹æœç”Ÿæ€æ›´å¥½çš„é›†æˆã€‚</li>
<li>Widget ä¹Ÿä½¿å¾—è‹¹æœåœ¨ iOS å’Œ macOS ç”Ÿæ€çš„èåˆäº†ä¹Ÿæ›´è¿›äº†ä¸€æ­¥ã€‚</li>
</ul>
<h1 id="çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†">çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†</h1>
<ol>
<li><code>Widget</code> æ”¯æŒåœ¨æ‰€æœ‰çš„è‹¹æœç³»ç»Ÿä¸­ä½¿ç”¨å— ï¼Ÿ</li>
<li>æœ¬æ–‡çš„ç¤ºä¾‹ä¸­ä½¿ç”¨äº†å“ªå‡ ç§æ–° APIï¼Œè¯•ç€æè¿°å®ƒä»¬çš„åŠŸèƒ½ ï¼Ÿ</li>
<li>æœ¬æ–‡çš„ç¤ºä¾‹å±•ç¤ºäº†å‡ ç§ç¯å¢ƒæè¿°ç¬¦ ?</li>
</ol>
<h1 id="widges-ç›¸å…³è§†é¢‘">Widges ç›¸å…³è§†é¢‘</h1>
<ul>
<li><a href="https://developer.apple.com/videos/play/wwdc2020/10103">Design great widgets</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2020/10028">Meet WidgetKit</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2020/10034">Widgets Code-along, part 1: The adventure begins</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2020/10035">Widgets Code-along, part 2: Alternate timelines</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2020/10036">Widgets Code-along, part 3: Advancing timelines</a></li>
</ul>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">æ–‡ç« ä½œè€…</span>
    <span class="item-content">åœŸåœŸEdmondæœ¨</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">ä¸Šæ¬¡æ›´æ–°</span>
    <span class="item-content">
        2020-06-27
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/ios/">iOS&#39;</a>
          <a href="/tags/wwdc20/">WWDC20&#39;</a>
          <a href="/tags/swiftui/">SwiftUI</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/sourcecode-cocoapods/02-cocoapods-corecomponents/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">2. æ•´ä½“æŠŠæ¡ CocoaPods æ ¸å¿ƒç»„ä»¶</span>
            <span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span>
          </a>
        <a class="next" href="/post/swiftui/wwdc20-session-10041/">
            <span class="next-text nav-default">WWDC20 - What&#39;s new in SwiftUI</span>
            <span class="next-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  
    <script src="https://utteranc.es/client.js"
            repo="looseyi/looseyi.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:chun574271939@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://twitter.com/looseyi" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://github.com/looseyi" class="iconfont icon-github" title="github"></a>
      <a href="https://www.weibo.com/foreverclp" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://www.zhihu.com/people/tu-tu-edmondmu" class="iconfont icon-zhihu" title="zhihu"></a>
  <a href="http://looseyi.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://gohugo.io">Hugo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2019-12-11 - 
    2021
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">åœŸåœŸEdmondæœ¨</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-62789092-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







</body>
</html>
