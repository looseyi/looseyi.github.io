<!DOCTYPE html>















<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  
  <title>8. Xcode å·¥ç¨‹æ–‡ä»¶è§£æ - Aha Edmond</title>

  
  
  <meta name="description" content="å¼•å­ åœ¨ã€ŒMolinillo ä¾èµ–æ ¡éªŒã€é€šè¿‡åï¼ŒCocoaPods ä¼šæ ¹æ®ç¡®å®šçš„ PodSpec ä¸‹è½½å¯¹åº”çš„æºä»£ç å’Œèµ„æºï¼Œå¹¶ä¸ºæ¯ä¸ª PodSpec ç”Ÿæˆå¯¹åº”çš„ Xcode Targetã€‚æœ¬æ–‡" />
  <meta name="author" content="åœŸåœŸEdmondæœ¨" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="https://looseyi.github.io/app.min.css" />

  

  
  <link rel="preload" as="image" href="https://looseyi.github.io/theme.png" />

  
  <link rel="preload" as="image" href="https://looseyi.github.io/twitter.svg" />
  
  <link rel="preload" as="image" href="https://looseyi.github.io/github.svg" />
  

  
  <link rel="icon" href="https://looseyi.github.io/favicon.ico" />
  <link rel="apple-touch-icon" href="https://looseyi.github.io/apple-touch-icon.png" />

  
  <meta name="generator" content="Hugo 0.82.1" />

  
  
  <link
    rel="alternate"
    type="application/rss&#43;xml"
    href="https://looseyi.github.io/post/sourcecode-cocoapods/08-cocoapods-xcodeproj/index.xml"
    title="Aha Edmond"
  />
  

  
  
  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-62789092-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  
  
  
  <meta property="og:title" content="8. Xcode å·¥ç¨‹æ–‡ä»¶è§£æ" />
<meta property="og:description" content="å¼•å­ åœ¨ã€ŒMolinillo ä¾èµ–æ ¡éªŒã€é€šè¿‡åï¼ŒCocoaPods ä¼šæ ¹æ®ç¡®å®šçš„ PodSpec ä¸‹è½½å¯¹åº”çš„æºä»£ç å’Œèµ„æºï¼Œå¹¶ä¸ºæ¯ä¸ª PodSpec ç”Ÿæˆå¯¹åº”çš„ Xcode Targetã€‚æœ¬æ–‡" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://looseyi.github.io/post/sourcecode-cocoapods/08-cocoapods-xcodeproj/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-05-16T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2021-05-16T00:00:00&#43;00:00" />


  
  <meta itemprop="name" content="8. Xcode å·¥ç¨‹æ–‡ä»¶è§£æ">
<meta itemprop="description" content="å¼•å­ åœ¨ã€ŒMolinillo ä¾èµ–æ ¡éªŒã€é€šè¿‡åï¼ŒCocoaPods ä¼šæ ¹æ®ç¡®å®šçš„ PodSpec ä¸‹è½½å¯¹åº”çš„æºä»£ç å’Œèµ„æºï¼Œå¹¶ä¸ºæ¯ä¸ª PodSpec ç”Ÿæˆå¯¹åº”çš„ Xcode Targetã€‚æœ¬æ–‡"><meta itemprop="datePublished" content="2021-05-16T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2021-05-16T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="6731">
<meta itemprop="keywords" content="CocoaPods,iOS,Ruby," />
  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="8. Xcode å·¥ç¨‹æ–‡ä»¶è§£æ"/>
<meta name="twitter:description" content="å¼•å­ åœ¨ã€ŒMolinillo ä¾èµ–æ ¡éªŒã€é€šè¿‡åï¼ŒCocoaPods ä¼šæ ¹æ®ç¡®å®šçš„ PodSpec ä¸‹è½½å¯¹åº”çš„æºä»£ç å’Œèµ„æºï¼Œå¹¶ä¸ºæ¯ä¸ª PodSpec ç”Ÿæˆå¯¹åº”çš„ Xcode Targetã€‚æœ¬æ–‡"/>

  
  
</head>


  <body class="not-ready" data-menu="true">
    <header class="header">
  
  <p class="logo">
    <a class="site-name" href="https://looseyi.github.io/">Aha Edmond</a><a class="btn-dark"></a>
  </p>
  

  <script>
    let bodyClx = document.body.classList;
    let btnDark = document.querySelector('.btn-dark');
    let sysDark = window.matchMedia('(prefers-color-scheme: dark)');
    let darkVal = localStorage.getItem('dark');

    let setDark = (isDark) => {
      bodyClx[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark ? 'yes' : 'no');
    };

    setDark(darkVal ? darkVal === 'yes' : sysDark.matches);
    requestAnimationFrame(() => bodyClx.remove('not-ready'));

    btnDark.addEventListener('click', () => setDark(!bodyClx.contains('dark')));
    sysDark.addEventListener('change', (event) => setDark(event.matches));
  </script>

  
  
  <nav class="menu">
    
    <a class="" href="/">Home</a>
    
  </nav>
  

  
  <nav class="social">
    
    <a
      class="twitter"
      style="--url: url(./twitter.svg)"
      href="https://twitter.com/looseyi"
      target="_blank"
    ></a>
    
    <a
      class="github"
      style="--url: url(./github.svg)"
      href="https://github.com/looseyi"
      target="_blank"
    ></a>
    
  </nav>
  
</header>


    <main class="main">
			

<article class="post-single">
  <header class="post-title">
    <p>
      <time>2021-05-16</time>
      
      <span>åœŸåœŸEdmondæœ¨</span>
      
    </p>
    <h1>8. Xcode å·¥ç¨‹æ–‡ä»¶è§£æ</h1>
  </header>
  <section class="post-content"><p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/10-xcode-project-src.png" alt="10-xcode-project-src"></p>
<h1 id="å¼•å­">å¼•å­</h1>
<p>åœ¨ã€Œ<a href="https://zhuanlan.zhihu.com/p/355415807"><strong>Molinillo ä¾èµ–æ ¡éªŒ</strong></a>ã€é€šè¿‡åï¼ŒCocoaPods ä¼šæ ¹æ®ç¡®å®šçš„ PodSpec ä¸‹è½½å¯¹åº”çš„æºä»£ç å’Œèµ„æºï¼Œå¹¶ä¸ºæ¯ä¸ª PodSpec ç”Ÿæˆå¯¹åº”çš„ Xcode Targetã€‚æœ¬æ–‡é‡ç‚¹å°±æ¥èŠèŠ Xcode Project çš„å†…å®¹æ„æˆï¼Œä»¥åŠ <a href="https://github.com/CocoaPods/Xcodeproj">xcodeproj</a> æ˜¯å¦‚æœç»„ç»‡ Xcode Project å†…å®¹çš„ã€‚</p>
<h1 id="xcode-å·¥ç¨‹æ–‡ä»¶">Xcode å·¥ç¨‹æ–‡ä»¶</h1>
<p>æ—©åœ¨å‰æ–‡ã€Œ<a href="https://zhuanlan.zhihu.com/p/248308670"><strong>Podfile çš„è§£æé€»è¾‘</strong></a>ã€ä¸­ï¼Œæˆ‘ä»¬ç®€å•ä»‹ç»è¿‡ <strong>Xcode çš„å·¥ç¨‹ç»“æ„ï¼šWorkspaceã€Projectã€Target åŠ Build Setting</strong> ç­‰ã€‚</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/00-xcode-project-struct.png" alt="04-workspace"></p>
<p>æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹è¿™äº›æ•°æ®åœ¨ Xcode ä¸­æ˜¯å¦‚ä½•è¡¨ç¤ºï¼Œäº†è§£è¿™äº›ç»“æ„æ‰èƒ½æ–¹ä¾¿æˆ‘ä»¬ç†è§£ xcodeproj çš„ä»£ç è®¾è®¡æ€è·¯ã€‚</p>
<h2 id="xcworkspace">xcworkspace</h2>
<p>æ—©åœ¨ Xcode 4 ä¹‹å‰å°±å‡ºç° workspace bundle äº†ï¼Œåªæ˜¯é‚£ä¼š workspace ä»å†…åµŒäº <code>.xcodeproj</code> ä¸­ã€‚Xcode 4 ä¹‹åï¼Œæˆ‘ä»¬æ‰å¯¹ workspace å•ç‹¬å¯è§ã€‚è®©æˆ‘ä»¬æ–°å»ºä¸€ä¸ª Test.xcodeproj é¡¹ç›®ï¼Œæ¥çœ‹çœ‹å…¶ç›®å½•ç»“æ„ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span>Test.xcodeproj
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>â”œâ”€â”€ project.pbxproj
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span>â”œâ”€â”€ project.xcworkspace
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>â”‚Â Â  â”œâ”€â”€ contents.xcworkspacedata
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span>â”‚Â Â  â””â”€â”€ xcuserdata
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>â”‚Â Â      â””â”€â”€ edmond.xcuserdatad
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>â”‚Â Â          â””â”€â”€ UserInterfaceState.xcuserstate
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>â””â”€â”€ xcuserdata
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span>    â””â”€â”€ edmond.xcuserdatad
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span>        â””â”€â”€ xcschemes
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span>            â””â”€â”€ xcschememanagement.plist
</code></pre></div><p>å¯ä»¥å‘ç° <code>Test.xcodeproj</code> bundle å†…åŒ…å« <code>project.workspace</code>ã€‚è€Œå½“æˆ‘ä»¬é€šè¿‡ <code>pod install</code> å‘½ä»¤æˆåŠŸæ·»åŠ  Pod ä¾èµ–åï¼ŒXcode å·¥ç¨‹ç›®å½•ä¸‹ä¼šå¤šå‡º <code>Test.workspace</code>ï¼Œå®ƒæ˜¯ Xcodeproj æ›¿æˆ‘ä»¬ç”Ÿæˆçš„ï¼Œç”¨äºç®¡ç†å½“å‰çš„ <code>Test.project</code> ä¸ <code>Pods.pbxproj</code>ã€‚æ–°å»ºçš„ workspace ç›®å½•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span>Test.xcworkspace
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span>â””â”€â”€ contents.xcworkspacedata
</code></pre></div><p>ç”Ÿæˆçš„ workspace æ–‡ä»¶å¤¹å†…éƒ¨åªåŒ…å«äº† <code>contents.xcworkspacedata</code>ï¼Œä¸º xml æ ¼å¼çš„å†…å®¹ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#719e07">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span><span style="color:#268bd2">&lt;Workspace</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span>   version = <span style="color:#2aa198">&#34;1.0&#34;</span><span style="color:#268bd2">&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>   <span style="color:#268bd2">&lt;FileRef</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span>      location = <span style="color:#2aa198">&#34;group:Test.xcodeproj&#34;</span><span style="color:#268bd2">&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>   <span style="color:#268bd2">&lt;/FileRef&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>   <span style="color:#268bd2">&lt;FileRef</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>      location = <span style="color:#2aa198">&#34;group:Pods/Pods.xcodeproj&#34;</span><span style="color:#268bd2">&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span>   <span style="color:#268bd2">&lt;/FileRef&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span><span style="color:#268bd2">&lt;/Workspace&gt;</span>
</code></pre></div><p>åœ¨æ ‡ç­¾ Workspace ä¸‹å£°æ˜äº†ä¸¤ä¸ª <code>FileRef</code> å…¶åœ°å€åˆ†åˆ«æŒ‡å‘äº† <code>Test.xcodeproj</code> å’Œ <code>Pods.xcodeproj</code>ã€‚è¿™é‡Œæ³¨æ„çš„æ˜¯ <code>FileRef</code> å±æ€§çš„å€¼ä½¿ç”¨å‰ç¼€ <code>group + path</code> æ¥ä¿®é¥°çš„ï¼Œè€Œå†…åµŒçš„ <code>project.xcworkspace</code>ï¼Œä½¿ç”¨ <code>self</code> ä½œä¸ºå‰ç¼€ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span><span style="color:#719e07">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span><span style="color:#268bd2">&lt;Workspace</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3</span>   version = <span style="color:#2aa198">&#34;1.0&#34;</span><span style="color:#268bd2">&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">4</span>   <span style="color:#268bd2">&lt;FileRef</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">5</span>      location = <span style="color:#2aa198">&#34;self:&#34;</span><span style="color:#268bd2">&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">6</span>   <span style="color:#268bd2">&lt;/FileRef&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">7</span><span style="color:#268bd2">&lt;/Workspace&gt;</span>
</code></pre></div><p>å¦å¤–ï¼Œå½“æˆ‘ä»¬ç”¨ Xcode æ‰“å¼€é¡¹ç›®åï¼Œèƒ½å‘ç° workspace ç›®å½•ä¸‹ä¼šè‡ªåŠ¨ç”Ÿæˆ <code>xcuserdata</code> ç›®å½•ï¼Œå®ƒç”¨äºä¿å­˜ç”¨æˆ·çš„ Xcode é…ç½®ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li><code>UserInterfaceState.xcuserstate</code>ï¼šä»¥äºŒè¿›åˆ¶çš„ Plist ä¿å­˜ï¼Œç”¨äºè®°å½•çª—å£å¸ƒå±€ç­‰ä¸ªæ€§åŒ–è®¾ç½®ã€‚</li>
<li><code>xcdebugger</code>ï¼šè®°å½•å„ç§æ–­ç‚¹æ•°æ®ã€‚</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé€‰æ‹©å°† <code>xcuserdata</code> ç›®å½• ignore æ‰çš„åŸå› ã€‚</p>
<h2 id="xcodeproj">xcodeproj</h2>
<p>ä¸ <code>.xcworkspace</code> ç±»ä¼¼ <code>.xcodeproj</code> åŒä¸º Xcode å·¥ç¨‹é…ç½®çš„ bundleï¼Œæ¥ä¸‹æ¥é‡ç‚¹å±•å¼€ <code>project.pbxproj</code>ï¼Œå®ƒè®°å½•äº† Xcode å·¥ç¨‹çš„å„é¡¹é…ç½®ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ç§æ—§é£æ ¼çš„ Plist æ–‡ä»¶ã€‚</p>
<h3 id="property-list">Property List</h3>
<p>Plist è¢«è®¾è®¡ä¸ºäººç±»å¯è¯»çš„ã€å¯ä»¥æ‰‹å·¥ä¿®æ”¹çš„æ ¼å¼ï¼Œæ•…é‡‡ç”¨äº†ç±»ä¼¼äºç¼–ç¨‹è¯­è¨€çš„è¯­æ³•å°†æ•°æ®åºåˆ—åŒ–ä¸ºASCIIæ•°æ®ã€‚Plist æœ€æ—©å¯è¿½æº¯åˆ° NeXTSTEP æ—¶æœŸï¼Œç”±äºå†å²åŸå› ï¼Œç›®å‰å®ƒæ”¯æŒå¤šç§æ ¼å¼ï¼Œstringã€binaryã€arrayã€dictionary ç­‰ç±»å‹æ•°æ®ã€‚ç›¸æ¯”äº JSONï¼ŒPlist è¿˜æ”¯æŒäºŒè¿›åˆ¶æ•°æ®çš„è¡¨ç¤ºï¼Œä»¥ <code>&lt;&gt;</code> ä¿®é¥°æ–‡æœ¬å½¢å¼çš„åå…­è¿›åˆ¶æ•°ï¼Œå…¶ä¸­å­—å…¸ä¸æ•°ç»„çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span>Arrayï¼š
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span>plist =&gt; ( <span style="color:#2aa198">&#34;1&#34;</span>, <span style="color:#2aa198">&#34;2&#34;</span>, <span style="color:#2aa198">&#34;3&#34;</span> )
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3</span>json =&gt; [ <span style="color:#2aa198">&#34;1&#34;</span>, <span style="color:#2aa198">&#34;2&#34;</span>, <span style="color:#2aa198">&#34;3&#34;</span> ]
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">5</span>Dictionaryï¼š
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">6</span>plist =&gt; { <span style="color:#268bd2">&#34;key&#34;</span> = <span style="color:#2aa198">&#34;value&#34;</span>; ... }
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">7</span>json =&gt; { <span style="color:#268bd2">&#34;key&#34;</span> : <span style="color:#2aa198">&#34;value&#34;</span>, ... }
</code></pre></div><p>å¤„ç† Plist æ–‡ä»¶å¯ä½¿ç”¨ Unix æä¾›çš„ <code>plutil</code> å·¥å…·ã€‚ æ¯”å¦‚å°† Plist æ–‡ä»¶è½¬æˆ XML æ ¼å¼ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span>plutil -convert xml1 -s -r -o project.pbxproj.xml project.pbxproj
</code></pre></div><p><code>-convert fmt</code> é€‰é¡¹æ”¯æŒè½¬æ¢çš„æ ¼å¼æœ‰ï¼šxml1ã€binary1ã€jsonã€swiftã€jsonã€‚</p>
<h3 id="projectpbxproj">project.pbxproj</h3>
<p><strong>pbxproj æ–‡ä»¶å…¨ç§°ä¸º Project Builder Xcode Project</strong>ï¼Œå…‰çœ‹ç¬¬ä¸€å±‚å…ƒæ•°æ®æ¯”è¾ƒç®€å•ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span>// !$*UTF<span style="color:#2aa198">8</span>*$!
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>{
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span>	archiveVersion = 1;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>	classes = {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span>	};
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>	objectVersion = <span style="color:#2aa198">50</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>	objects = {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>		...
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span>   };
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span>	rootObject = <span style="color:#2aa198">8528</span>A<span style="color:#2aa198">0</span>D<span style="color:#2aa198">92651</span>F<span style="color:#2aa198">281005</span>BEBA<span style="color:#2aa198">5</span> /* Project object */;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span>}
</code></pre></div><p>æ–‡ä»¶ä»¥æ˜ç¡®çš„ç¼–ç ä¿¡æ¯å¼€å¤´ï¼Œ<code>archiveVersion</code> é€šå¸¸ä¸º 1ï¼Œè¡¨ç¤ºåºåˆ—åŒ–çš„ç‰ˆæœ¬å·ï¼›<code>classes</code> åˆ™ä¼¼ä¹ä¸€ç›´ä¸ºç©ºï¼›<code>objectVersion</code> è¡¨ç¤ºæ‰€å…¼å®¹çš„æœ€ä½ç‰ˆæœ¬çš„ Xcodeï¼Œè¯¥æ•°å­—ä¸ Xcode çš„ç‰ˆæœ¬å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span><span style="color:#2aa198">53</span> <span style="color:#719e07">=&gt;</span> <span style="color:#2aa198">&#39;Xcode 11.4&#39;</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span><span style="color:#2aa198">52</span> <span style="color:#719e07">=&gt;</span> <span style="color:#2aa198">&#39;Xcode 11.0&#39;</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3</span><span style="color:#2aa198">51</span> <span style="color:#719e07">=&gt;</span> <span style="color:#2aa198">&#39;Xcode 10.0&#39;</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">4</span><span style="color:#2aa198">50</span> <span style="color:#719e07">=&gt;</span> <span style="color:#2aa198">&#39;Xcode 9.3&#39;</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">5</span><span style="color:#2aa198">48</span> <span style="color:#719e07">=&gt;</span> <span style="color:#2aa198">&#39;Xcode 8.0&#39;</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">6</span><span style="color:#2aa198">47</span> <span style="color:#719e07">=&gt;</span> <span style="color:#2aa198">&#39;Xcode 6.3&#39;</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">7</span><span style="color:#2aa198">46</span> <span style="color:#719e07">=&gt;</span> <span style="color:#2aa198">&#39;Xcode 3.2&#39;</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">8</span><span style="color:#2aa198">45</span> <span style="color:#719e07">=&gt;</span> <span style="color:#2aa198">&#39;Xcode 3.1&#39;</span>,
</code></pre></div><p><code>rootObject</code> è®°å½•çš„ 16 è¿›åˆ¶æ•°å­—ï¼Œä¸º project å¯¹è±¡çš„ç´¢å¼•ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç§°å…¶ä¸º Xcode Object Identifierï¼Œpbxproj ä¸­çš„æ¯ä¸ª Xcode Object åˆ›å»ºæ—¶ï¼Œéƒ½ä¼šç”Ÿæˆå¯¹åº”å”¯ä¸€æ ‡è¯†æ•°å­—ï¼Œè€Œä¸Šé¢çš„ <code>objects</code> å­—å…¸åˆ™è®°å½•äº†æ•´ä¸ª Xcode é¡¹ç›®çš„æ‰€æœ‰ Xcode Objectã€‚</p>
<h3 id="xcode-object-identifiers">Xcode Object Identifiers</h3>
<p>Xcode Object Identifier æ˜¯ç”¨ 24 ä½çš„ 16 è¿›åˆ¶å­—ç¬¦è¡¨ç¤ºï¼Œæˆ‘ä»¬æš‚ä¸”ç§°å…¶ä¸º GUIDã€‚</p>
<blockquote>
<p>âš ï¸ æ³¨æ„è¿™å¹¶ä¸æ„å‘³ç€å®ƒä¸å…¶ä»–ç§°ä¸º GUID çš„å…¶ä»–äº‹ç‰©ç›¸ä¼¼ã€‚</p>
</blockquote>
<p>ç”Ÿæˆçš„ GUID ä¸ä»…åœ¨é¡¹ç›®æ–‡ä»¶ä¸­å¿…é¡»å”¯ä¸€ï¼Œå¹¶ä¸”åœ¨ Xcode ä¸­åŒæ—¶æ‰“å¼€çš„å…¶ä»–é¡¹ç›®æ–‡ä»¶ä¸­ä¹Ÿå¿…é¡»å”¯ä¸€ï¼Œå³<strong>è·¨å·¥ç¨‹å”¯ä¸€æ€§</strong>ã€‚åªæœ‰è¿™æ ·èƒ½é¿å…äº†å¤šäººåˆä½œä¸­ï¼ŒåŒæ—¶æ–°å¢æˆ–ç¼–è¾‘å·¥ç¨‹æ–‡ä»¶å¸¦æ¥çš„é—®é¢˜ã€‚è¿™å…¶å®æ˜¯ä¸€ä¸ªæœ‰è¶£çš„ç«äº‰éœ€æ±‚ï¼Œæœ‰å…´è¶£çš„å¯ä»¥æŸ¥çœ‹ <a href="https://github.com/premake/premake-core">Premake</a> è¿™ä¸ªé¡¹ç›®ï¼Œå®ƒèƒ½ä¿è¯é‡æ–°ç”Ÿæˆçš„é¡¹ç›®å…·æœ‰ç›¸åŒçš„ GUIDã€‚</p>
<p>å¯¹äº Xcode ä½¿ç”¨çš„ GUID ç®—æ³•å¯å‚è€ƒ <a href="https://pewpewthespells.com/blog/pbxproj_identifiers.html">PBXProj Identifers</a>ï¼Œå®ƒæ˜¯é€šè¿‡é€†å‘ <code>DevToolsCore.framework</code> è·å–çš„ï¼Œä»ä¸­å¯ä»¥çª¥è§ GUID çš„ç”Ÿæˆéœ€è¦ä¾èµ– ğŸ‘‡ è¿™äº›æ•°æ®ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#719e07">struct</span> globalidentifier {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>    int8_t user;            <span style="color:#586e75">// encoded username
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span><span style="color:#586e75"></span>    int8_t pid;             <span style="color:#586e75">// encoded current pid #
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span><span style="color:#586e75"></span>    int16_t _random;        <span style="color:#586e75">// encoded random value
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span><span style="color:#586e75"></span>    int32_t _time;          <span style="color:#586e75">// encoded time value
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span><span style="color:#586e75"></span>    int8_t zero;            <span style="color:#586e75">// zero
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span><span style="color:#586e75"></span>    int8_t host_shift;      <span style="color:#586e75">// encoded, shifted hostid
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span><span style="color:#586e75"></span>    int8_t host_h;          <span style="color:#586e75">// high byte of lower bytes of hostid
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span><span style="color:#586e75"></span>    int8_t host_l;          <span style="color:#586e75">// low byte of lower bytes of hostid
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span><span style="color:#586e75"></span>} __attribute__((packed));  <span style="color:#586e75">// packed, so we always have a length of 12 bytes
</span></code></pre></div><h3 id="xcode-object">Xcode Object</h3>
<p>Xcode Object æ˜¯æŒ‡æ‰€æœ‰è®°å½•åœ¨ <code>objects</code> å­—å…¸ä¸­çš„å¯¹è±¡ (åç»­ç®€ç§°ä¸º Object)ï¼Œå†…éƒ¨ä»¥ <code>isa</code> æ¥æ ‡è¯†ç±»å‹ã€‚åŒæ—¶Xcode æŒ‰ <code>isa</code> ç±»å‹åˆ’åˆ†å‡ºè‹¥å¹² sectionï¼Œä»¥æ³¨é‡Šçš„æ–¹å¼åˆ†èŠ‚ã€‚</p>
<p>ä»¥ <code>PBXProject</code> ä¸ºä¾‹ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span>/* Begin PBXProject section */
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>   <span style="color:#2aa198">8528</span>A<span style="color:#2aa198">0</span>D<span style="color:#2aa198">92651</span>F<span style="color:#2aa198">281005</span>BEBA<span style="color:#2aa198">5</span> /* Project object */ = {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span>      isa = PBXProject;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>      ...
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span>      mainGroup = 8528A0D82651F281005BEBA5;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>      productRefGroup = 8528A0E22651F281005BEBA5 /* Products */;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>      projectDirPath = <span style="color:#268bd2">&#34;&#34;</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>      projectRoot = <span style="color:#2aa198">&#34;&#34;</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span>      targets = ( 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span>         <span style="color:#2aa198">8528</span>A<span style="color:#2aa198">0E02651</span>F<span style="color:#2aa198">281005</span>BEBA<span style="color:#2aa198">5</span> /* Test */,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span>      );
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12</span>   };
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13</span>/* End PBXProject section */
</code></pre></div><p>è¿™é‡Œ <code>Project object</code> çš„ç´¢å¼•å€¼æ­£æ˜¯ <code>rootObject</code> è®°å½•çš„ <em>8528A0D92651F281005BEBA5</em>ï¼Œå…¶ <code>isa</code> ç±»å‹ä¸º <code>PBXProject</code>ï¼Œ<code>targets</code> æ•°ç»„è®°å½•äº†é¡¹ç›®éœ€è¦æ„å»ºçš„ä»»åŠ¡ï¼š<code>Test target</code>ã€‚æ•´ä¸ª PBXProject section å°±å®šä¹‰åœ¨ <code>objects</code> ä¸­ã€‚</p>
<p>Object ç±»å‹çš„å¼•ç”¨å…³ç³»å¤§è‡´å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/00-xcodte-project.png" alt="00-xcodte-project"></p>
<blockquote>
<p>å…³äº pbxproj å†… Object çš„è¯¦ç»†è¯´æ˜ï¼Œå¯å‚ç…§ <a href="http://www.monobjc.net/xcode-project-file-format.html">Xcode Project File Format</a>ã€‚</p>
</blockquote>
<ul>
<li>PBXProjectï¼šProject çš„è®¾ç½®ï¼Œç¼–è¯‘å·¥ç¨‹æ‰€éœ€ä¿¡æ¯</li>
<li>PBXNativeTargetï¼šTarget çš„è®¾ç½®</li>
<li>PBXTargetDependencyï¼š Target ä¾èµ–</li>
<li>PBXContainerItemProxyï¼šéƒ¨ç½²çš„å…ƒç´ </li>
<li>XCConfigurationListï¼šæ„å»ºé…ç½®ç›¸å…³ï¼ŒåŒ…å« project å’Œ target æ–‡ä»¶</li>
<li>XCBuildConfigurationï¼šç¼–è¯‘é…ç½®ï¼Œå¯¹åº” Xcode çš„ Build Setting å†…å®¹</li>
<li>PBXVariantGroupï¼šå›½é™…åŒ–å¯¹ç…§è¡¨æˆ– <code>.storyboard</code> æ–‡ä»¶</li>
<li>PBXBuildFileï¼šå„ç±»æ–‡ä»¶ï¼Œæœ€ç»ˆä¼šå…³è”åˆ° PBXFileReference</li>
<li>PBXFileReferenceï¼šæºç ã€èµ„æºã€åº“ï¼ŒInfo.plist ç­‰æ–‡ä»¶ç´¢å¼•</li>
<li>PBXGroupï¼šè™šæ‹Ÿæ–‡ä»¶å¤¹ï¼Œå¯åµŒå¥—ï¼Œè®°å½•ç®¡ç†çš„ PBXFileReference ä¸å­ PBXGroup</li>
<li>PBXSourcesBuildPhaseï¼šç¼–è¯‘æºæ–‡ä»¶ï¼ˆ.mã€.swiftï¼‰</li>
<li>PBXFrameworksBuildPhaseï¼šç”¨äº framework çš„æ„å»º</li>
<li>PBXResourcesBuildPhaseï¼šç¼–è¯‘èµ„æºæ–‡ä»¶ï¼Œæœ‰ xibã€storyboardã€plist ä»¥åŠ xcassets ç­‰èµ„æºæ–‡ä»¶</li>
</ul>
<h1 id="xcodeproj-1">Xcodeproj</h1>
<p><a href="https://github.com/CocoaPods/Xcodeproj">Xcodeproj</a> èƒ½å¤Ÿé€šè¿‡ Ruby æ¥åˆ›å»ºå’Œä¿®æ”¹ Xcode å·¥ç¨‹æ–‡ä»¶ï¼Œå…¶å†…éƒ¨å®Œæ•´æ˜ å°„äº† <code>project.pbxproj</code> çš„ Object ç±»å‹åŠå…¶å¯¹åº”çš„å±æ€§ï¼Œé™äºç¯‡å¹…æœ¬æ–‡ä¼šé‡ç‚¹ä»‹ç»å…³é”®çš„ Object å’Œè§£æé€»è¾‘ã€‚</p>
<h2 id="project-è§£æ">Project è§£æ</h2>
<p>ä¸ŠèŠ‚å†…å®¹å¯çŸ¥ï¼ŒXcode è§£æå·¥ç¨‹çš„æ˜¯ä¾æ¬¡æ£€æŸ¥ <code>*.xcworkspace</code> &gt; <code>*.xcproject</code> &gt; <code>project.pbxproj</code>ï¼Œæ ¹æ® <code>project.pbxproj</code> çš„æ•°æ®ç»“æ„ï¼ŒXcodeproj æä¾›äº† Project ç±»ï¼Œç”¨äºè®°å½•æ ¹å…ƒç´ ã€‚</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#719e07">module</span> Xcodeproj
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>  <span style="color:#719e07">class</span> <span style="color:#268bd2">Project</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span>    <span style="color:#586e75"># object æ¨¡å—ï¼Œåé¢ä¼šæåˆ°</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>    <span style="color:#719e07">include</span> <span style="color:#cb4b16">Object</span>	
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span>    <span style="color:#719e07">...</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>    <span style="color:#586e75"># åºåˆ—åŒ–æ—¶ project çš„æœ€ä½å…¼å®¹ç‰ˆæœ¬, ä¸ object_version å¯¹åº”</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>    <span style="color:#719e07">attr_reader</span> <span style="color:#2aa198">:archive_version</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>    <span style="color:#586e75"># ä½œç”¨æœªçŸ¥</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span>    <span style="color:#719e07">attr_reader</span> <span style="color:#2aa198">:classes</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span>    <span style="color:#586e75"># project æœ€ä½å…¼å®¹ç‰ˆæœ¬</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span>    <span style="color:#719e07">attr_reader</span> <span style="color:#2aa198">:object_version</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12</span>    <span style="color:#586e75"># project æ‰€åŒ…å«çš„ objectsï¼Œç»“æ„ä¸º [Hash{String =&gt; AbstractObject}]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13</span>    <span style="color:#719e07">attr_reader</span> <span style="color:#2aa198">:objects_by_uuid</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14</span>    <span style="color:#586e75"># project çš„æ ¹ç»“ç‚¹ï¼Œå³ PBXProject</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15</span>    <span style="color:#719e07">attr_reader</span> <span style="color:#2aa198">:root_object</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16</span>  <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17</span><span style="color:#719e07">end</span>
</code></pre></div><p>åœ¨ <code>pod install</code> çš„ä¾èµ–è§£æé˜¶æ®µï¼Œä¼šè¯»å– <code>project.pbxproj</code>ã€‚</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/01-resolve-dependencies.png" alt="01-resolve-dependencies"></p>
<p>æœ€ç»ˆåœ¨ <code>inspect_targets_to_integrate</code> æ–¹æ³•å†…æ‰“å¼€é¡¹ç›®ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span><span style="color:#719e07">def</span> <span style="color:#268bd2">inspect_targets_to_integrate</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span>  project <span style="color:#719e07">=</span> <span style="color:#cb4b16">Xcodeproj</span><span style="color:#719e07">::</span><span style="color:#cb4b16">Project</span><span style="color:#719e07">.</span>open(project_path)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3</span>  <span style="color:#719e07">...</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">4</span><span style="color:#719e07">end</span>
</code></pre></div><p>ç»§ç»­çœ‹ <code>Xcodeproj::Project::open</code> å®ç°ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#586e75"># lib/xcproject/Project.rb</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span><span style="color:#719e07">def</span> <span style="color:#268bd2">self</span><span style="color:#719e07">.</span><span style="color:#268bd2">open</span>(path)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>  path <span style="color:#719e07">=</span> <span style="color:#cb4b16">Pathname</span><span style="color:#719e07">.</span>pwd <span style="color:#719e07">+</span> path
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span>  <span style="color:#719e07">unless</span> <span style="color:#cb4b16">Pathname</span><span style="color:#719e07">.</span>new(path)<span style="color:#719e07">.</span>exist?
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>    <span style="color:#719e07">raise</span> <span style="color:#2aa198">&#34;[Xcodeproj] Unable to open `</span><span style="color:#2aa198">#{</span>path<span style="color:#2aa198">}</span><span style="color:#2aa198">` because it doesn&#39;t exist.&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>  <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>  project <span style="color:#719e07">=</span> <span style="color:#719e07">new</span>(path, <span style="color:#719e07">true</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span>  project<span style="color:#719e07">.</span>send(<span style="color:#2aa198">:initialize_from_file</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span>  project
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span><span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13</span><span style="color:#719e07">def</span> <span style="color:#268bd2">initialize_from_file</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14</span>  pbxproj_path <span style="color:#719e07">=</span> path <span style="color:#719e07">+</span> <span style="color:#2aa198">&#39;project.pbxproj&#39;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15</span>  plist <span style="color:#719e07">=</span> <span style="color:#cb4b16">Plist</span><span style="color:#719e07">.</span>read_from_path(pbxproj_path<span style="color:#719e07">.</span>to_s)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16</span>  root_object<span style="color:#719e07">.</span>remove_referrer(<span style="color:#b58900">self</span>) <span style="color:#719e07">if</span> root_object
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17</span>  @root_object     <span style="color:#719e07">=</span> new_from_plist(plist<span style="color:#719e07">[</span><span style="color:#2aa198">&#39;rootObject&#39;</span><span style="color:#719e07">]</span>, plist<span style="color:#719e07">[</span><span style="color:#2aa198">&#39;objects&#39;</span><span style="color:#719e07">]</span>, <span style="color:#b58900">self</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18</span>  @archive_version <span style="color:#719e07">=</span> plist<span style="color:#719e07">[</span><span style="color:#2aa198">&#39;archiveVersion&#39;</span><span style="color:#719e07">]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19</span>  @object_version  <span style="color:#719e07">=</span> plist<span style="color:#719e07">[</span><span style="color:#2aa198">&#39;objectVersion&#39;</span><span style="color:#719e07">]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20</span>  @classes         <span style="color:#719e07">=</span> plist<span style="color:#719e07">[</span><span style="color:#2aa198">&#39;classes&#39;</span><span style="color:#719e07">]</span> <span style="color:#719e07">||</span> {}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21</span>  @dirty           <span style="color:#719e07">=</span> <span style="color:#719e07">false</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23</span>  <span style="color:#719e07">unless</span> root_object
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24</span>    <span style="color:#719e07">raise</span> <span style="color:#2aa198">&#34;[Xcodeproj] Unable to find a root object in </span><span style="color:#2aa198">#{</span>pbxproj_path<span style="color:#2aa198">}</span><span style="color:#2aa198">.&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25</span>  <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27</span>  <span style="color:#719e07">if</span> archive_version<span style="color:#719e07">.</span>to_i <span style="color:#719e07">&gt;</span> <span style="color:#cb4b16">Constants</span><span style="color:#719e07">::</span><span style="color:#cb4b16">LAST_KNOWN_ARCHIVE_VERSION</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28</span>    <span style="color:#719e07">raise</span> <span style="color:#2aa198">&#39;[Xcodeproj] Unknown archive version.&#39;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29</span>  <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">30</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">31</span>  <span style="color:#719e07">if</span> object_version<span style="color:#719e07">.</span>to_i <span style="color:#719e07">&gt;</span> <span style="color:#cb4b16">Constants</span><span style="color:#719e07">::</span><span style="color:#cb4b16">LAST_KNOWN_OBJECT_VERSION</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">32</span>    <span style="color:#719e07">raise</span> <span style="color:#2aa198">&#39;[Xcodeproj] Unknown object version.&#39;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">33</span>  <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">34</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">35</span>  <span style="color:#586e75"># Projects can have product_ref_groups that are not listed in the main_groups[&#34;Products&#34;]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">36</span>  root_object<span style="color:#719e07">.</span>product_ref_group <span style="color:#719e07">||=</span> root_object<span style="color:#719e07">.</span>main_group<span style="color:#719e07">[</span><span style="color:#2aa198">&#39;Products&#39;</span><span style="color:#719e07">]</span> <span style="color:#719e07">||</span> root_object<span style="color:#719e07">.</span>main_group<span style="color:#719e07">.</span>new_group(<span style="color:#2aa198">&#39;Products&#39;</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">37</span><span style="color:#719e07">end</span>
</code></pre></div><ol>
<li>åœ¨ open æ–¹æ³•ä¸­ä¼šæ£€éªŒè·¯å¾„ï¼Œåˆå§‹åŒ– Project å¯¹è±¡;</li>
<li>ä½¿ç”¨å†…éƒ¨ Property List ç±» <code>Plist</code> æ¥è¯»å– <code>project.pbxproj</code> æ•°æ®;</li>
</ol>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ <code>new_from_plist</code> ä¸ä»…å®Œæˆäº† rootObject çš„è§£æï¼ŒåŒæ—¶ä¹Ÿå®Œæˆ objects çš„è§£æã€‚</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#719e07">def</span> <span style="color:#268bd2">new_from_plist</span>(uuid, objects_by_uuid_plist, root_object <span style="color:#719e07">=</span> <span style="color:#719e07">false</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>  attributes <span style="color:#719e07">=</span> objects_by_uuid_plist<span style="color:#719e07">[</span>uuid<span style="color:#719e07">]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span>  <span style="color:#719e07">if</span> attributes
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>    <span style="color:#586e75"># ä»¥ isa è·å– Xcodeproj ä¸­å¯¹åº”çš„ Xcode Object ç±»å‹</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span>    klass <span style="color:#719e07">=</span> <span style="color:#cb4b16">Object</span><span style="color:#719e07">.</span>const_get(attributes<span style="color:#719e07">[</span><span style="color:#2aa198">&#39;isa&#39;</span><span style="color:#719e07">]</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>    object <span style="color:#719e07">=</span> klass<span style="color:#719e07">.</span>new(<span style="color:#b58900">self</span>, uuid)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>    objects_by_uuid<span style="color:#719e07">[</span>uuid<span style="color:#719e07">]</span> <span style="color:#719e07">=</span> object
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>    object<span style="color:#719e07">.</span>add_referrer(<span style="color:#b58900">self</span>) <span style="color:#719e07">if</span> root_object
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span>    <span style="color:#586e75"># è§£æ objects èŠ‚ç‚¹ï¼Œå¹¶å®Œæˆ ISA æ•°æ®åˆ° Xcode Object çš„æ˜ å°„</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span>    object<span style="color:#719e07">.</span>configure_with_plist(objects_by_uuid_plist)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span>    object
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12</span>  <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13</span><span style="color:#719e07">end</span>
</code></pre></div><ol>
<li>ä»¥ uuid å–å‡º Plist æ•°æ®å¹¶åˆ©ç”¨ isa kclass å®Œæˆ Project å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ˜ å°„ã€‚<code>Object const</code> ä¸­è®°å½•äº†æ”¯æŒçš„ <code>isa</code>ï¼›</li>
<li>å°† object å­˜å…¥ objects_by_uuid å­—å…¸ä¸­ï¼Œä»¥è¦†ç›–åŸæœ‰çš„ GUIDï¼›</li>
<li>æ‰§è¡Œ <code>configure_with_plist</code> é€’å½’ï¼Œå®Œæˆ <code>objects</code> æ˜ å°„ã€‚</li>
</ol>
<blockquote>
<p>Tips: <code>configure_with_plist</code> äºä¸‹ç¯‡å±•å¼€.</p>
</blockquote>
<p><code>project.pbxproj</code> è§£æä¸»ä½“æµç¨‹å¦‚ä¸‹</p>
<p><img src="https://gitee.com/looseyi/blog-image/raw/master/uPic/02-parse-project.png" alt="02-parse-project"></p>
<p>å›¾ä¸­çš„ reference attributes æ˜¯æŒ‡ Object çš„å¼•ç”¨å±æ€§ï¼Œåé¢ä¼šæœ‰ä»‹ç»ã€‚</p>
<h2 id="object-module">Object Module</h2>
<h3 id="abstractobject">AbstractObject</h3>
<p>Object çš„æŠ½è±¡ç±»ï¼ŒXcode é¡¹ç›®å¹¶ä¸å­˜åœ¨å¯¹åº”çš„ <code>isa</code> ç±»å‹ã€‚å…ˆç®€å•ä»‹ç»éƒ¨åˆ†å±æ€§ï¼Œæ–¹ä¾¿åç»­ç†è§£ã€‚</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#719e07">class</span> <span style="color:#268bd2">AbstractObject</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>  <span style="color:#586e75"># object ç±»å‹</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span>  <span style="color:#719e07">attr_reader</span> <span style="color:#2aa198">:isa</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>  <span style="color:#586e75"># object å”¯ä¸€æ ‡è¯†</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span>  <span style="color:#719e07">attr_reader</span> <span style="color:#2aa198">:uuid</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>  <span style="color:#586e75"># æŒæœ‰ object çš„ project</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>  <span style="color:#719e07">attr_reader</span> <span style="color:#2aa198">:project</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span>  <span style="color:#719e07">def</span> <span style="color:#268bd2">initialize</span>(project, uuid)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span>    @project <span style="color:#719e07">=</span> project
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span>    @uuid <span style="color:#719e07">=</span> uuid
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12</span>    @isa <span style="color:#719e07">=</span> <span style="color:#b58900">self</span><span style="color:#719e07">.</span>class<span style="color:#719e07">.</span>isa
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13</span>    @referrers <span style="color:#719e07">=</span> <span style="color:#719e07">[]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14</span>    <span style="color:#719e07">unless</span> @isa <span style="color:#719e07">=~</span> <span style="color:#dc322f">/^(PBX|XC)/</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15</span>      <span style="color:#719e07">raise</span> <span style="color:#2aa198">&#34;[Xcodeproj] Attempt to initialize an abstract class (</span><span style="color:#2aa198">#{</span><span style="color:#b58900">self</span><span style="color:#719e07">.</span>class<span style="color:#2aa198">}</span><span style="color:#2aa198">).&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16</span>    <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17</span>  <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18</span>  <span style="color:#719e07">...</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19</span><span style="color:#719e07">end</span>
</code></pre></div><p>æ³¨æ„ï¼ŒObject ç±»åœ¨ initialize æ—¶å…³è”äº† project å¯¹è±¡ï¼Œä½œè€…ä¸å»ºè®®æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ï¼Œè€Œåœ¨ Xcodeproj æ¨¡å—å†…æä¾›äº† convince æ–¹æ³•ã€‚</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span><span style="color:#719e07">def</span> <span style="color:#268bd2">new</span>(klass)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span>   <span style="color:#719e07">if</span> klass<span style="color:#719e07">.</span>is_a?(<span style="color:#b58900">String</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3</span>     klass <span style="color:#719e07">=</span> <span style="color:#cb4b16">Object</span><span style="color:#719e07">.</span>const_get(klass)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">4</span>   <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">5</span>   object <span style="color:#719e07">=</span> klass<span style="color:#719e07">.</span>new(<span style="color:#b58900">self</span>, generate_uuid)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">6</span>   object<span style="color:#719e07">.</span>initialize_defaults
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">7</span>   object
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">8</span><span style="color:#719e07">end</span>
</code></pre></div><p>ä½œè€…ä¿ç•™ project çš„å¼•ç”¨æ˜¯ä¸ºäº†æ–¹ä¾¿å¤„ç† Object çš„å¼•ç”¨è®¡æ•°ï¼Œproject ä½œä¸ºé¡¹ç›®çš„æ ¹èŠ‚ç‚¹ï¼Œè®°å½•äº†å®Œæ•´çš„å·¥ç¨‹é…ç½®å’Œå„æ¨¡å—çš„äº¤å‰å¼•ç”¨å…³ç³»ï¼Œæœ‰äº† project çš„å¼•ç”¨èƒ½ç»™è¿›è¡Œ object çš„å¼•ç”¨ç®¡ç†ã€‚</p>
<h3 id="const-accessor">Const Accessor</h3>
<p>è¿™é‡Œå…ˆæ’æ’­ä¸€ä¸‹ Object æ¨¡å—ä¸­ <code>const</code> å®šä¹‰åŠå…¶å­˜å‚¨çš„å€¼ã€‚åœ¨ Ruby ä¸­ Module å¯ä»¥åœ¨è¿è¡Œæ—¶æ·»åŠ æ¨¡å—çº§çš„å¸¸é‡ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span><span style="color:#cb4b16">Module</span><span style="color:#586e75">#const_get</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span><span style="color:#cb4b16">Module</span><span style="color:#586e75">#const_set</span>
</code></pre></div><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè¿™äº› const å¸¸é‡æ˜¯åœ¨ä»€ä¹ˆæ—¶æœºå­˜å…¥ Object ä¸­çš„å‘¢ ï¼Ÿ</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span><span style="color:#586e75"># lib/xcodeproj/project/object.rb</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3</span><span style="color:#cb4b16">Xcodeproj</span><span style="color:#719e07">::</span><span style="color:#cb4b16">Constants</span><span style="color:#719e07">::</span><span style="color:#cb4b16">KNOWN_ISAS</span><span style="color:#719e07">.</span>each <span style="color:#719e07">do</span> <span style="color:#719e07">|</span>superclass_name, isas<span style="color:#719e07">|</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">4</span>  superklass <span style="color:#719e07">=</span> <span style="color:#cb4b16">Xcodeproj</span><span style="color:#719e07">::</span><span style="color:#cb4b16">Project</span><span style="color:#719e07">::</span><span style="color:#cb4b16">Object</span><span style="color:#719e07">.</span>const_get(superclass_name)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">5</span>  isas<span style="color:#719e07">.</span>each <span style="color:#719e07">do</span> <span style="color:#719e07">|</span>isa<span style="color:#719e07">|</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">6</span>    c <span style="color:#719e07">=</span> <span style="color:#cb4b16">Class</span><span style="color:#719e07">.</span>new(superklass)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">7</span>    <span style="color:#cb4b16">Xcodeproj</span><span style="color:#719e07">::</span><span style="color:#cb4b16">Project</span><span style="color:#719e07">::</span><span style="color:#cb4b16">Object</span><span style="color:#719e07">.</span>const_set(isa, c)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">8</span>  <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">9</span><span style="color:#719e07">end</span>
</code></pre></div><p>åœ¨ object.rb æ–‡ä»¶ä¸­ï¼Œå¯ä»¥å®šä½åˆ° <code>Object.const_set</code> çš„è°ƒç”¨ï¼Œå®ƒæ˜¯åœ¨ Object ç±»è¢«åŠ è½½æ—¶è§¦å‘çš„ã€‚Xcodeproj æ”¯æŒçš„ <code>isa</code> ç±»å‹åç§°éƒ½å®šä¹‰åœ¨ <code>Xcodeproj::Constants::KNOWN_ISAS</code> ä¸­ã€‚Object åŠ è½½æ—¶é€šè¿‡éå†å®ƒæ¥è½½å…¥ <code>isa class</code>ã€‚</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#cb4b16">KNOWN_ISAS</span> <span style="color:#719e07">=</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>  <span style="color:#2aa198">&#39;AbstractObject&#39;</span> <span style="color:#719e07">=&gt;</span> <span style="color:#2aa198">%w(
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span><span style="color:#2aa198">    PBXBuildFile
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span><span style="color:#2aa198">    AbstractBuildPhase
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span><span style="color:#2aa198">    PBXBuildRule
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span><span style="color:#2aa198">    XCBuildConfiguration
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span><span style="color:#2aa198">    XCConfigurationList
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span><span style="color:#2aa198">    PBXContainerItemProxy
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span><span style="color:#2aa198">    PBXFileReference
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span><span style="color:#2aa198">    PBXGroup
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span><span style="color:#2aa198">    PBXProject
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12</span><span style="color:#2aa198">    PBXTargetDependency
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13</span><span style="color:#2aa198">    PBXReferenceProxy
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14</span><span style="color:#2aa198">    AbstractTarget
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15</span><span style="color:#2aa198">  )</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17</span>  <span style="color:#2aa198">&#39;AbstractBuildPhase&#39;</span> <span style="color:#719e07">=&gt;</span> <span style="color:#2aa198">%w(
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18</span><span style="color:#2aa198">    PBXCopyFilesBuildPhase
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19</span><span style="color:#2aa198">    PBXResourcesBuildPhase
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20</span><span style="color:#2aa198">    PBXSourcesBuildPhase
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21</span><span style="color:#2aa198">    PBXFrameworksBuildPhase
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22</span><span style="color:#2aa198">    PBXHeadersBuildPhase
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23</span><span style="color:#2aa198">    PBXShellScriptBuildPhase
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24</span><span style="color:#2aa198">  )</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26</span>  <span style="color:#2aa198">&#39;AbstractTarget&#39;</span> <span style="color:#719e07">=&gt;</span> <span style="color:#2aa198">%w(
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27</span><span style="color:#2aa198">    PBXNativeTarget
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28</span><span style="color:#2aa198">    PBXAggregateTarget
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29</span><span style="color:#2aa198">    PBXLegacyTarget
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">30</span><span style="color:#2aa198">  )</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">31</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">32</span>  <span style="color:#2aa198">&#39;PBXGroup&#39;</span> <span style="color:#719e07">=&gt;</span> <span style="color:#2aa198">%w(
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">33</span><span style="color:#2aa198">    XCVersionGroup
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">34</span><span style="color:#2aa198">    PBXVariantGroup
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">35</span><span style="color:#2aa198">  )</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">36</span>}<span style="color:#719e07">.</span>freeze
</code></pre></div><h2 id="object-attributes">Object Attributes</h2>
<p><code>AbstractObject</code> ä½œä¸º <code>Xcodeproj</code> æä¾›çš„ Object åŸºç±»ï¼Œå®ƒä¸ä»…æä¾›äº†åŸºæœ¬å±æ€§ï¼Œå¦‚ <code>isa</code> ç±»å‹å’Œ uuid ç­‰ï¼Œè¿˜æä¾›äº†ç‰¹æ®Šçš„å±æ€§ä¿®é¥°å™¨å¦‚ <code>Attribute</code>ï¼Œæ–¹ä¾¿å¿«é€Ÿæ·»åŠ å±æ€§ã€‚å…‰ä» <code>KNOWN_ISAS</code> çœ‹æ¥è¿™äº› <code>isa</code> ç±»å‹å°±å·²ç»å¤Ÿå¤šäº†ï¼Œè¿˜è¦è€ƒè™‘å±æ€§çš„ CURD ä»¥åŠæ•°æ®åˆ°å¯¹è±¡æ˜ å°„ç­‰ä¸€ç³»åˆ—æ“ä½œã€‚</p>
<p>ä¸ºæ­¤ï¼Œ<strong>Xcodeproj å®ç°äº†ä¸€å¥—é’ˆå¯¹ <code>project.pbxproj</code> çš„ DSL è§£æ</strong>ã€‚è¿™äº›ç‰¹æ€§çš„å®ç°æ­£æ˜¯ä¾èµ–äºå±æ€§ä¿®é¥°å™¨å’Œ Ruby å¼ºå¤§çš„ Runtime èƒ½åŠ›ã€‚</p>
<h3 id="abstractobjectattribute">AbstractObjectAttribute</h3>
<p><code>AbstractObjectAttribute</code> æ˜¯ç”¨äºå£°æ˜å’Œå­˜å‚¨ Object å±æ€§çš„å…³é”®ä¿¡æ¯ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#719e07">class</span> <span style="color:#268bd2">AbstractObjectAttribute</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>   
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span>  <span style="color:#586e75"># å±æ€§æœ¬èº«ç±»å‹ï¼Œ:simple, :to_one, :to_many.</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>  <span style="color:#719e07">attr_reader</span> <span style="color:#2aa198">:type</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span>   
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>  <span style="color:#586e75"># å±æ€§å</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>  <span style="color:#719e07">attr_reader</span> <span style="color:#2aa198">:name</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>   
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span>  <span style="color:#586e75"># å±æ€§çš„æŒæœ‰è€…</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span>  <span style="color:#719e07">attr_accessor</span> <span style="color:#2aa198">:owner</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12</span>  <span style="color:#719e07">def</span> <span style="color:#268bd2">initialize</span>(type, <span style="color:#b58900">name</span>, owner)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13</span>    @type  <span style="color:#719e07">=</span> type
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14</span>    @name  <span style="color:#719e07">=</span> <span style="color:#b58900">name</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15</span>    @owner <span style="color:#719e07">=</span> owner
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16</span>  <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18</span>  <span style="color:#586e75"># å±æ€§æ”¯æŒçš„ç±»å‹</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19</span>  <span style="color:#719e07">attr_accessor</span> <span style="color:#2aa198">:classes</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20</span>   
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21</span>  <span style="color:#586e75"># ä»…é™äº :references_by_keys å…³è”çš„ç±»å‹</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22</span>  <span style="color:#719e07">attr_accessor</span> <span style="color:#2aa198">:classes_by_key</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23</span>   
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24</span>  <span style="color:#586e75"># ä»…é™äº :simple ç±»å‹æŒ‡å®šé»˜è®¤å€¼</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25</span>  <span style="color:#719e07">attr_accessor</span> <span style="color:#2aa198">:default_value</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26</span>  <span style="color:#719e07">...</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27</span><span style="color:#719e07">end</span>
</code></pre></div><p><code>AbstractObject</code> é€šè¿‡ Ruby æä¾›çš„ <code>Singleton Classes</code> ä»¥å®ç°å±æ€§ä¿®é¥°å™¨æ–¹æ³•çš„æ‰©å±•ã€‚</p>
<p>å¯¹äºå•ä¾‹æ¨¡å¼ï¼ŒRuby æä¾›äº†å¤šç§å®ç°æ–¹å¼ã€‚åœ¨ Ruby ä¸­ï¼Œæ¯ä¸ªå¯¹è±¡å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªåŒ¿å<strong>å•ä¾‹ç±»</strong>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè‡ªå®šä¹‰ç±»æ˜¯ä¸å­˜åœ¨å•ä¾‹ç±»ï¼Œä¸è¿‡å¯é€šè¿‡ <code>class &lt;&lt; obj</code> æ¥æ‰“å¼€å¯¹è±¡çš„å•ä¾‹ç±»ç©ºé—´ã€‚</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span><span style="color:#719e07">class</span> <span style="color:#268bd2">C</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span>  <span style="color:#719e07">class</span> <span style="color:#719e07">&lt;&lt;</span> <span style="color:#b58900">self</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3</span>    <span style="color:#b58900">puts</span> <span style="color:#b58900">self</span>	<span style="color:#586e75"># è¾“å‡ºï¼š#&lt;Class:C&gt;ï¼Œç±» C ç±»å¯¹è±¡çš„å•ä¾‹ç±»</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">4</span>  <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">5</span><span style="color:#719e07">end</span>
</code></pre></div><blockquote>
<p>æ³¨æ„ï¼šRuby ä¸­æ¯ä¸ªå¯¹è±¡ (Class / Module ä¹Ÿæ˜¯å¯¹è±¡) éƒ½æœ‰è‡ªå·±æ‰€å±çš„ç±»ï¼Œå®ƒä»¬éƒ½æ˜¯æœ‰å…·ä½“åç§°çš„ç±»ã€‚</p>
</blockquote>
<p><code>Xcodeproj</code> é’ˆå¯¹ Attribute æä¾›äº†å¤šç§å•ä¾‹ç±»æ–¹æ³•ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#719e07">module</span> Object
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>  <span style="color:#719e07">class</span> <span style="color:#268bd2">AbstractObject</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span>    <span style="color:#719e07">class</span> <span style="color:#719e07">&lt;&lt;</span> <span style="color:#b58900">self</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>      <span style="color:#586e75"># æ™®é€šå±æ€§å£°æ˜æ–¹æ³•</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span>      <span style="color:#719e07">def</span> <span style="color:#268bd2">attribute</span>(<span style="color:#b58900">name</span>, klass, default_value <span style="color:#719e07">=</span> <span style="color:#719e07">nil</span>) <span style="color:#719e07">...</span> <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>       
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>      <span style="color:#586e75"># å•ä¸€å¼•ç”¨çš„å±æ€§å£°æ˜æ–¹æ³•</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>      <span style="color:#719e07">def</span> <span style="color:#268bd2">has_one</span>(singular_name, isas) <span style="color:#719e07">...</span> <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span>       
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span>      <span style="color:#586e75"># å¤šå¼•ç”¨çš„å±æ€§å£°æ˜æ–¹æ³•</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span>      <span style="color:#719e07">def</span> <span style="color:#268bd2">has_many</span>(plural_name, isas) <span style="color:#719e07">...</span> <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12</span>       
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13</span>      <span style="color:#586e75"># å¤šå¼•ç”¨ä¸”ä¸åŒ key çš„å±æ€§å£°æ˜æ–¹æ³•</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14</span>      <span style="color:#719e07">def</span> <span style="color:#268bd2">has_many_references_by_keys</span>(plural_name, classes_by_key) <span style="color:#719e07">...</span> <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15</span>    <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16</span>  <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17</span><span style="color:#719e07">end</span>
</code></pre></div><p>ç›´æ¥çœ‹å¦‚ä½•ä½¿ç”¨ï¼Œå£°æ˜å±æ€§æ¯”è¾ƒç›´è§‚ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#719e07">module</span> Object
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>  <span style="color:#719e07">class</span> <span style="color:#268bd2">PBXProject</span> <span style="color:#719e07">&lt;</span> <span style="color:#cb4b16">AbstractObject</span>     
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span>     
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>    <span style="color:#586e75"># å£°æ˜ä¸º [String] ç±»å‹çš„ project_dir_pathï¼Œé»˜è®¤å€¼ä¸ºç©º</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span>    attribute <span style="color:#2aa198">:project_dir_path</span>, <span style="color:#b58900">String</span>, <span style="color:#2aa198">&#39;&#39;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>    
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>    <span style="color:#586e75"># å£°æ˜ä¸º [PBXGroup] ç±»å‹çš„ main_group</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>    has_one <span style="color:#2aa198">:main_group</span>, <span style="color:#cb4b16">PBXGroup</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span>    <span style="color:#586e75"># å£°æ˜ä¸º [ObjectList&lt;AbstractTarget&gt;] ç±»å‹çš„ targets</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span>    has_many <span style="color:#2aa198">:targets</span>, <span style="color:#cb4b16">AbstractTarget</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12</span>     
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13</span>    <span style="color:#586e75"># å£°æ˜ä¸º [Array&lt;ObjectDictionary&gt;] ç±»å‹çš„ project_references </span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14</span>    has_many_references_by_keys <span style="color:#2aa198">:project_references</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15</span>                                <span style="color:#2aa198">:project_ref</span>   <span style="color:#719e07">=&gt;</span> <span style="color:#cb4b16">PBXFileReference</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16</span>                                <span style="color:#2aa198">:product_group</span> <span style="color:#719e07">=&gt;</span> <span style="color:#cb4b16">PBXGroup</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17</span>    <span style="color:#719e07">...</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18</span>  <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19</span><span style="color:#719e07">end</span>
</code></pre></div><p>æ‰€è°“çš„å•ä¸€æˆ–è€…å¤šå¼•ç”¨æ˜¯æŒ‡<strong>Object ä¹‹é—´å¼•ç”¨å…³ç³»</strong>ã€‚ä»¥ <code>PBXProject</code> ä¸ºä¾‹ï¼Œä¸€ä¸ªé¡¹ç›®åªèƒ½æŒ‡å®šä¸€ä¸ª mainGroupï¼Œä½†å¯¹äº targets å¯ä»¥å­˜åœ¨å¤šä¸ªã€‚è¿™é‡Œä¸ç›´æ¥ä½¿ç”¨ <code>attribute</code> æ¥ä¿®é¥°æ˜¯å› ä¸ºï¼Œåƒ target è¿™ç§å­˜åœ¨äº¤å‰å¼•ç”¨çš„ Object è¢«åˆ é™¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è°å¼•ç”¨äº†å®ƒï¼Œæ‰ä¿è¯æ‰€æœ‰çš„å¼•ç”¨éƒ½èƒ½è¢«æ¸…ç†å¹²å‡€ã€‚å› æ­¤ï¼Œ<strong>Xcodeproj å®ç°äº†ä¸€å¥—é’ˆå¯¹ Object çš„å¼•ç”¨è®¡æ•°ç®¡ç†</strong> (ä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´)ã€‚</p>
<h3 id="attribute">Attribute</h3>
<p>ä»Šå¤©å…ˆçœ‹æ™®é€šå±æ€§çš„ DSL å®ç°ï¼Œ<code>has_one</code> ä¸ <code>has_many</code> çš„å±æ€§ä¿®é¥°å°†åœ¨ä¸‹ç¯‡å±•å¼€ã€‚</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#586e75"># lib/xcodeproj/project/object_attributes.rb</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span><span style="color:#719e07">def</span> <span style="color:#268bd2">attribute</span>(<span style="color:#b58900">name</span>, klass, default_value <span style="color:#719e07">=</span> <span style="color:#719e07">nil</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>  <span style="color:#586e75"># 1. åˆå§‹åŒ– attributeï¼Œè®°å½•å±æ€§åï¼Œå±æ€§ç±»å‹åŠé»˜è®¤å€¼</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span>  attrb <span style="color:#719e07">=</span> <span style="color:#cb4b16">AbstractObjectAttribute</span><span style="color:#719e07">.</span>new(<span style="color:#2aa198">:simple</span>, <span style="color:#b58900">name</span>, <span style="color:#b58900">self</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>  attrb<span style="color:#719e07">.</span>classes <span style="color:#719e07">=</span> <span style="color:#719e07">[</span>klass<span style="color:#719e07">]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>  attrb<span style="color:#719e07">.</span>default_value <span style="color:#719e07">=</span> default_value
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>  <span style="color:#586e75"># 2. å°† attrb å­˜å…¥ @attributes</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span>  add_attribute(attrb)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span>  
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span>  <span style="color:#586e75"># 3. æ·»åŠ åä¸º name çš„ getter</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12</span>  define_method(attrb<span style="color:#719e07">.</span>name) <span style="color:#719e07">do</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13</span>    @simple_attributes_hash <span style="color:#719e07">||=</span> {}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14</span>    @simple_attributes_hash<span style="color:#719e07">[</span>attrb<span style="color:#719e07">.</span>plist_name<span style="color:#719e07">]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15</span>  <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17</span>  <span style="color:#586e75"># 4. æ·»åŠ åä¸º #{name}= çš„ setterï¼Œå¹¶å°†å€¼å­˜å…¥ @simple_attributes_hash å­—å…¸ä¸­</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18</span>  define_method(<span style="color:#2aa198">&#34;</span><span style="color:#2aa198">#{</span>attrb<span style="color:#719e07">.</span>name<span style="color:#2aa198">}</span><span style="color:#2aa198">=&#34;</span>) <span style="color:#719e07">do</span> <span style="color:#719e07">|</span>value<span style="color:#719e07">|</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19</span>    @simple_attributes_hash <span style="color:#719e07">||=</span> {}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20</span>    <span style="color:#586e75"># 5. æ£€æŸ¥ value æ˜¯å¦ä¸º klass æ”¯æŒçš„ç±»å‹</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21</span>    attrb<span style="color:#719e07">.</span>validate_value(value)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">23</span>    existing <span style="color:#719e07">=</span> @simple_attributes_hash<span style="color:#719e07">[</span>attrb<span style="color:#719e07">.</span>plist_name<span style="color:#719e07">]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">24</span>    <span style="color:#719e07">if</span> existing<span style="color:#719e07">.</span>is_a?(<span style="color:#cb4b16">Hash</span>) <span style="color:#719e07">&amp;&amp;</span> value<span style="color:#719e07">.</span>is_a?(<span style="color:#cb4b16">Hash</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">25</span>      <span style="color:#719e07">return</span> value <span style="color:#719e07">if</span> existing<span style="color:#719e07">.</span>keys <span style="color:#719e07">==</span> value<span style="color:#719e07">.</span>keys <span style="color:#719e07">&amp;&amp;</span> existing <span style="color:#719e07">==</span> value
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">26</span>    <span style="color:#719e07">elsif</span> existing <span style="color:#719e07">==</span> value
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">27</span>      <span style="color:#719e07">return</span> value
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">28</span>    <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">29</span>    mark_project_as_dirty!
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">30</span>    @simple_attributes_hash<span style="color:#719e07">[</span>attrb<span style="color:#719e07">.</span>plist_name<span style="color:#719e07">]</span> <span style="color:#719e07">=</span> value
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">31</span>  <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">32</span><span style="color:#719e07">end</span>
</code></pre></div><p>ä»£ç æ¯”è¾ƒé•¿æ ¸å¿ƒé€»è¾‘å°± 2 æ­¥ï¼š</p>
<ol>
<li>
<p>åˆå§‹åŒ– attributeï¼Œè®°å½•å±æ€§åï¼Œå±æ€§ç±»å‹åŠé»˜è®¤å€¼ï¼Œå°† attrb å­˜å…¥å¯¹è±¡çš„ <code>@attributes</code> ç”¨äºåç»­éå†ï¼›</p>
</li>
<li>
<p>åˆ©ç”¨ <code>define_method</code> ä¸ºä¿®é¥°çš„å¯¹è±¡æ·»åŠ å®ä¾‹å˜é‡å­˜å–æ–¹æ³•ã€‚</p>
<p>ç”±äºä¿®é¥°çš„å±æ€§ç±»å‹ä¸åŒï¼Œaccessor æ–¹æ³•ç›´æ¥ä½¿ç”¨ Hash å®¹å™¨æ¥ä¿å­˜å˜é‡å€¼ï¼Œkey ä¸º <code>attribute.name</code>ï¼Œä½¿ç”¨ Hash æ˜¯ä¸ºäº†é¿å…å—åˆ° Object å¼•ç”¨è®¡æ•°çš„å½±å“ã€‚</p>
</li>
</ol>
<p>æœ¬è´¨ä¸Š attribute ä¸ºæˆ‘ä»¬ç”Ÿæˆçš„ accessor å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span><span style="color:#719e07">def</span> <span style="color:#268bd2">project_dir_path</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span>  @simple_attributes_hash<span style="color:#719e07">[</span>projectDirPath<span style="color:#719e07">]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3</span><span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">5</span><span style="color:#719e07">def</span> <span style="color:#268bd2">project_dir_path</span><span style="color:#719e07">=</span>(value)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">6</span>  attribute<span style="color:#719e07">.</span>validate_value(value)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">7</span>  @simple_attributes_hash<span style="color:#719e07">[</span>projectDirPath<span style="color:#719e07">]</span> <span style="color:#719e07">=</span> value
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">8</span><span style="color:#719e07">end</span>
</code></pre></div><h2 id="xcode-object-1">Xcode Object</h2>
<p>æœ€åæˆ‘ä»¬æ¥èŠä¸¤ä¸ª <code>project.pbxproj</code> ä¸­çš„åŸºç¡€ Object ç±»å‹ï¼š<code>PBXFileReference</code> å’Œ <code>PBXGroup</code>ã€‚æ”¾åœ¨æ–‡ç« æœ«å°¾ï¼Œæ˜¯å¸Œæœ›çœ‹åˆ°è¿™é‡Œçš„åŒå­¦èƒ½ç†è§£Xcode è®¾è®¡çš„èƒŒåæ€æƒ³ã€‚</p>
<h3 id="pbxfilereference">PBXFileReference</h3>
<p><code>PBXFileReference</code> è®°å½•äº†æ„å»º Xcode é¡¹ç›®æ‰€éœ€è¦çš„çœŸå®æ–‡ä»¶ä¿¡æ¯ï¼Œ<strong>ä¸»è¦è®°å½•äº†æ–‡ä»¶è·¯å¾„</strong>ã€‚è¿™äº› <code>PBXFileReference</code> å°±æ˜¯æˆ‘ä»¬åœ¨ Xcode é¡¹ç›®çš„å·¦ä¾§è¾¹æ ä¸­æ‰€è§çš„æ–‡ä»¶ã€‚</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span><span style="color:#cb4b16">F8DA09E31396AC040057D0CC</span> <span style="color:#dc322f">/* main.m */</span> <span style="color:#719e07">=</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span>  isa <span style="color:#719e07">=</span> <span style="color:#cb4b16">PBXFileReference</span>; 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3</span>  fileEncoding <span style="color:#719e07">=</span> <span style="color:#2aa198">4</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">4</span>  lastKnownFileType <span style="color:#719e07">=</span> sourcecode<span style="color:#719e07">.</span>c<span style="color:#719e07">.</span>objc; 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">5</span>  path <span style="color:#719e07">=</span> main<span style="color:#719e07">.</span>m; 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">6</span>  sourceTree <span style="color:#719e07">=</span> <span style="color:#cb4b16">SOURCE_ROOT</span>; 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">7</span>};
</code></pre></div><p>å¯¹äº <code>PBXFileReference</code> è·¯å¾„ï¼Œé‡ç‚¹åœ¨äºç¡®è®¤è¯¥ path æ˜¯ç›¸å¯¹è·¯å¾„è¿˜æ˜¯ç»å¯¹è·¯å¾„ï¼Œ<code>sourceTree</code> å°±æ˜¯ç”¨æ¥æè¿°è¿™ä¸ªçš„ï¼Œå®ƒæœ‰å‡ ç§ç›¸å¯¹å…³ç³»ï¼š</p>
<ul>
<li>
<p><code>&lt;absolute&gt;</code>ï¼šç»å¯¹è·¯å¾„</p>
</li>
<li>
<p><code>&lt;group&gt;</code> åŸºäº PBXGroup çš„ç›¸å¯¹è·¯å¾„</p>
</li>
<li>
<p><code>SOURCE_ROOT</code> åŸºäº project çš„ç›¸å¯¹è·¯å¾„</p>
</li>
<li>
<p><code>DEVELOPER_DIR</code> åŸºäº developer directory çš„ç›¸å¯¹è·¯å¾„</p>
</li>
<li>
<p><code>BUILT_PRODUCTS_DIR</code> åŸºäº build  products directory çš„ç›¸å¯¹è·¯å¾„</p>
</li>
<li>
<p><code>SDKROOT</code> åŸºäº SDK directory çš„ç›¸å¯¹è·¯å¾„</p>
</li>
</ul>
<p><code>Xcodeproj</code> æä¾›äº† <code>GroupableHelper</code> ç”¨äºè·å–å„ç§çŠ¶æ€çš„æ–‡ä»¶ç›®å½•ï¼Œæ¯”å¦‚æ–‡ä»¶çš„ç»å¯¹ç›®å½•ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#719e07">def</span> <span style="color:#268bd2">source_tree_real_path</span>(object)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>  <span style="color:#719e07">case</span> object<span style="color:#719e07">.</span>source_tree
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span>  <span style="color:#719e07">when</span> <span style="color:#2aa198">&#39;&lt;group&gt;&#39;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>    object_parent <span style="color:#719e07">=</span> parent(object)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span>    <span style="color:#719e07">if</span> object_parent<span style="color:#719e07">.</span>isa <span style="color:#719e07">==</span> <span style="color:#2aa198">&#39;PBXProject&#39;</span><span style="color:#719e07">.</span>freeze
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>      object<span style="color:#719e07">.</span>project<span style="color:#719e07">.</span>project_dir <span style="color:#719e07">+</span> object<span style="color:#719e07">.</span>project<span style="color:#719e07">.</span>root_object<span style="color:#719e07">.</span>project_dir_path
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>    <span style="color:#719e07">else</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>      real_path(object_parent)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span>    <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span>  <span style="color:#719e07">when</span> <span style="color:#2aa198">&#39;SOURCE_ROOT&#39;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span>    object<span style="color:#719e07">.</span>project<span style="color:#719e07">.</span>project_dir
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12</span>  <span style="color:#719e07">when</span> <span style="color:#2aa198">&#39;&lt;absolute&gt;&#39;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13</span>    <span style="color:#719e07">nil</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14</span>  <span style="color:#719e07">else</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15</span>    <span style="color:#cb4b16">Pathname</span><span style="color:#719e07">.</span>new(<span style="color:#2aa198">&#34;${</span><span style="color:#2aa198">#{</span>object<span style="color:#719e07">.</span>source_tree<span style="color:#2aa198">}</span><span style="color:#2aa198">}&#34;</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16</span>  <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17</span><span style="color:#719e07">end</span>
</code></pre></div><p><code>PBXFileReference</code> ä¸»è¦å®šä¹‰å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span><span style="color:#719e07">module</span> Object
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span>  <span style="color:#719e07">class</span> <span style="color:#268bd2">PBXFileReference</span> <span style="color:#719e07">&lt;</span> <span style="color:#cb4b16">AbstractObject</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3</span>    attribute <span style="color:#2aa198">:name</span>, <span style="color:#b58900">String</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">4</span>    attribute <span style="color:#2aa198">:path</span>, <span style="color:#b58900">String</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">5</span>    attribute <span style="color:#2aa198">:source_tree</span>, <span style="color:#b58900">String</span>, <span style="color:#2aa198">&#39;SOURCE_ROOT&#39;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">6</span><span style="color:#719e07">end</span>
</code></pre></div><h3 id="pbxgroup">PBXGroup</h3>
<p>åŸºäº <code>PBXFileReference</code> ä¹‹ä¸Šçš„ä¸€å±‚æŠ½è±¡ï¼Œèƒ½æ›´å¥½çš„å¯¹ <code>PBXFileReference</code> è¿›è¡Œç®¡ç†å’Œåˆ†ç»„ã€‚<code>PBXGroup</code> èƒŒåå¹¶ä¸ä¸€å®šçœŸå®å­˜åœ¨å¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œå¦å¤– <code>PBXGroup</code> å¯ä»¥å¼•ç”¨å…¶ä»– <code>PBXGroup</code>ï¼Œè¿›è¡ŒåµŒå¥—ã€‚å®šä¹‰å¦‚ä¸‹:</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#719e07">module</span> Object
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>  <span style="color:#719e07">class</span> <span style="color:#268bd2">PBXGroup</span> <span style="color:#719e07">&lt;</span> <span style="color:#cb4b16">AbstractObject</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span>    <span style="color:#586e75"># group å¯åŒ…å«çš„ç±»å‹</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>    has_many <span style="color:#2aa198">:children</span>, <span style="color:#719e07">[</span><span style="color:#cb4b16">PBXGroup</span>, <span style="color:#cb4b16">PBXFileReference</span>, <span style="color:#cb4b16">PBXReferenceProxy</span><span style="color:#719e07">]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span>    attribute <span style="color:#2aa198">:source_tree</span>, <span style="color:#b58900">String</span>, <span style="color:#2aa198">&#39;&lt;group&gt;&#39;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>    <span style="color:#586e75"># è®°å½• group åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„è·¯å¾„</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>    attribute <span style="color:#2aa198">:path</span>, <span style="color:#b58900">String</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>		<span style="color:#586e75"># é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæŒ‡å®šäº†è·¯å¾„ï¼Œåˆ™æ­¤å±æ€§ä¸å­˜åœ¨ã€‚</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span>    attribute <span style="color:#2aa198">:name</span>, <span style="color:#b58900">String</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span><span style="color:#719e07">end</span>
</code></pre></div><p>å®ƒæä¾›äº†ä¸€ä¸ªä¾¿åˆ©çš„åˆå§‹åŒ–æ–¹æ³•ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span><span style="color:#719e07">def</span> <span style="color:#268bd2">new_group</span>(<span style="color:#b58900">name</span>, path <span style="color:#719e07">=</span> <span style="color:#719e07">nil</span>, source_tree <span style="color:#719e07">=</span> <span style="color:#2aa198">:group</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span>  group <span style="color:#719e07">=</span> project<span style="color:#719e07">.</span>new(<span style="color:#cb4b16">PBXGroup</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3</span>  children <span style="color:#719e07">&lt;&lt;</span> group
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">4</span>  group<span style="color:#719e07">.</span>name <span style="color:#719e07">=</span> <span style="color:#b58900">name</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">5</span>  group<span style="color:#719e07">.</span>set_source_tree(source_tree)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">6</span>  group<span style="color:#719e07">.</span>set_path(path)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">7</span>  group
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">8</span><span style="color:#719e07">end</span>
</code></pre></div><p>è¿™é‡Œçš„ name æ˜¯å¿…é¡»ä¼ çš„ï¼Œpath åˆ™å¯ä»¥ä¸ºç©ºã€‚è€Œæˆ‘ä»¬åœ¨ Xcode çš„å¯¼èˆªæ ä¸­æ‰€è§çš„å„ä¸ªåˆ†ç»„åç§°å’Œè·¯å¾„å°±æ˜¯ç”±è¿™ä¸¤ä¸ªå±æ€§æ¥å†³å®šçš„ã€‚æ²¡æœ‰ name çš„æƒ…å†µä¸‹åˆ™æ˜¯ä»¥ path çš„ basename ä½œä¸º display_name æ¥å‘ˆç°ã€‚</p>
<p>æœ€åæ¥çœ‹ä¸ªä¾‹å­ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span><span style="color:#cb4b16">F8E469631395739D00DB05C8</span> <span style="color:#dc322f">/* Frameworks */</span> <span style="color:#719e07">=</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span>  isa <span style="color:#719e07">=</span> <span style="color:#cb4b16">PBXGroup</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3</span>  children <span style="color:#719e07">=</span> (
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">4</span>    <span style="color:#2aa198">50</span><span style="color:#cb4b16">ABD6EC159FC2CE001BE42C</span> <span style="color:#dc322f">/* MobileCoreServices.framework */</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">5</span>    <span style="color:#719e07">...</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">6</span>  );
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">7</span>  <span style="color:#b58900">name</span> <span style="color:#719e07">=</span> <span style="color:#cb4b16">Frameworks</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">8</span>  sourceTree <span style="color:#719e07">=</span> <span style="color:#2aa198">&#34;&lt;group&gt;&#34;</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">9</span>};
</code></pre></div><p>é¡¹ç›®ä¸­å¹¶ä¸å­˜åœ¨çœŸå®çš„ <code>Framework</code> æ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥æ— éœ€æŒ‡å®š pathã€‚å¦å¤–æ³¨æ„ï¼ŒmainGroup æ—¢æ²¡æœ‰ name ä¹Ÿæ²¡æœ‰ pathï¼Œå¤§å®¶å¯ä»¥æ€è€ƒä¸€ä¸‹åŸå› ã€‚</p>
<h1 id="é€šè¿‡ä»£ç ç¼–è¾‘-xcode-å·¥ç¨‹">é€šè¿‡ä»£ç ç¼–è¾‘ Xcode å·¥ç¨‹</h1>
<p>æœ€åä¸€ç« ï¼Œä¸€èµ·æ¥å®è·µä¸€ä¸‹ç®€å•çš„åŠŸèƒ½ã€‚</p>
<h2 id="ä¸º-xcode-å·¥ç¨‹æ·»åŠ æ–‡ä»¶">ä¸º Xcode å·¥ç¨‹æ·»åŠ æ–‡ä»¶</h2>
<h3 id="0x01-æ·»åŠ æºæ–‡ä»¶">0x01 æ·»åŠ æºæ–‡ä»¶</h3>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">1</span>project <span style="color:#719e07">=</span> <span style="color:#cb4b16">Xcodeproj</span><span style="color:#719e07">::</span><span style="color:#cb4b16">Project</span><span style="color:#719e07">.</span>open(path)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">2</span>target <span style="color:#719e07">=</span> project<span style="color:#719e07">.</span>targets<span style="color:#719e07">.</span>first
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">3</span>group <span style="color:#719e07">=</span> project<span style="color:#719e07">.</span>main_group<span style="color:#719e07">.</span>find_subpath(<span style="color:#cb4b16">File</span><span style="color:#719e07">.</span>join(<span style="color:#2aa198">&#39;Xcodeproj&#39;</span>, <span style="color:#2aa198">&#39;Test&#39;</span>), <span style="color:#719e07">true</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">4</span>group<span style="color:#719e07">.</span>set_source_tree(<span style="color:#2aa198">&#39;SOURCE_ROOT&#39;</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">5</span>file_ref <span style="color:#719e07">=</span> group<span style="color:#719e07">.</span>new_reference(file_path)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">6</span>target<span style="color:#719e07">.</span>add_file_references(<span style="color:#719e07">[</span>file_ref<span style="color:#719e07">]</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">7</span>project<span style="color:#719e07">.</span>save
</code></pre></div><p>ç»™ Xcode å·¥ç¨‹æ·»åŠ æ–‡ä»¶ç®—æ˜¯å¸¸è§„æ“ä½œã€‚è¿™æ®µä»£ç å¼•ç”¨è‡ª <a href="https://draveness.me/bei-xcodeproj-keng-de-zhe-ji-tian/">draveness çš„æ–‡ç« </a>ï¼Œä½œè€…å¯¹æ¯ä¸€æ­¥éƒ½åšäº†è¯¦ç»†çš„è§£é‡Šäº†ã€‚æˆ‘ä»¬ä»ä»£ç è§’åº¦é‡ç‚¹è¯´ä¸€ä¸‹ <code>new_reference</code> å’Œ <code>add_file_references</code>ã€‚</p>
<p><strong>PBXGroup::new_references</strong></p>
<p>Xcode å·¥ç¨‹ä¼šæŒ‡å®š main_group ä½œä¸ºé¡¹ç›®èµ„æºçš„å…¥å£ï¼Œæ‰€æ·»åŠ çš„æ–‡ä»¶èµ„æºéœ€è¦å…ˆåŠ å…¥ main_group å†…ï¼Œä»¥ç”Ÿæˆå¯¹åº”çš„ <code>PBXFileReference</code>ï¼Œè¿™æ · target ä»»åŠ¡å’Œ buildPhase ç­‰é…ç½®æ‰èƒ½è®¿é—®è¯¥èµ„æºã€‚å› æ­¤ï¼Œ<code>new_reference</code> æ ¸å¿ƒæ˜¯ <code>new_file_reference</code> ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#719e07">def</span> <span style="color:#268bd2">new_reference</span>(group, path, source_tree)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>  ref <span style="color:#719e07">=</span> <span style="color:#719e07">case</span> <span style="color:#cb4b16">File</span><span style="color:#719e07">.</span>extname(path)<span style="color:#719e07">.</span>downcase
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span>        <span style="color:#719e07">when</span> <span style="color:#2aa198">&#39;.xcdatamodeld&#39;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>          new_xcdatamodeld(group, path, source_tree)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span>        <span style="color:#719e07">when</span> <span style="color:#2aa198">&#39;.xcodeproj&#39;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>          new_subproject(group, path, source_tree)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>        <span style="color:#719e07">else</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>          new_file_reference(group, path, source_tree)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span>        <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span>  configure_defaults_for_file_reference(ref)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12</span>  ref
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13</span><span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15</span><span style="color:#719e07">def</span> <span style="color:#268bd2">new_file_reference</span>(group, path, source_tree)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16</span>  path <span style="color:#719e07">=</span> <span style="color:#cb4b16">Pathname</span><span style="color:#719e07">.</span>new(path)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17</span>  ref <span style="color:#719e07">=</span> group<span style="color:#719e07">.</span>project<span style="color:#719e07">.</span>new(<span style="color:#cb4b16">PBXFileReference</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18</span>  group<span style="color:#719e07">.</span>children <span style="color:#719e07">&lt;&lt;</span> ref
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19</span>  <span style="color:#cb4b16">GroupableHelper</span><span style="color:#719e07">.</span>set_path_with_source_tree(ref, path, source_tree)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20</span>  ref<span style="color:#719e07">.</span>set_last_known_file_type
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">21</span>  ref
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">22</span><span style="color:#719e07">end</span>
</code></pre></div><p><strong>PBXNativeTarget::add_file_references</strong></p>
<p>åŠ å…¥æ–‡ä»¶èµ„æºåï¼Œä¾¿å¯å°†å…¶åŠ å…¥å¯¹åº”çš„æ„å»ºä»»åŠ¡ä¸­å»ã€‚</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#719e07">def</span> <span style="color:#268bd2">add_file_references</span>(file_references, compiler_flags <span style="color:#719e07">=</span> {})
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>  file_references<span style="color:#719e07">.</span>map <span style="color:#719e07">do</span> <span style="color:#719e07">|</span>file<span style="color:#719e07">|</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span>    extension <span style="color:#719e07">=</span> <span style="color:#cb4b16">File</span><span style="color:#719e07">.</span>extname(file<span style="color:#719e07">.</span>path)<span style="color:#719e07">.</span>downcase
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>    header_extensions <span style="color:#719e07">=</span> <span style="color:#cb4b16">Constants</span><span style="color:#719e07">::</span><span style="color:#cb4b16">HEADER_FILES_EXTENSIONS</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span>    <span style="color:#586e75"># ä¾æ®èµ„æºç±»å‹åŒºåˆ†æ˜¯å¤´æ–‡ä»¶è¿˜æ˜¯æºæ–‡ä»¶ </span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>    is_header_phase <span style="color:#719e07">=</span> header_extensions<span style="color:#719e07">.</span>include?(extension)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>    phase <span style="color:#719e07">=</span> is_header_phase ? headers_build_phase : source_build_phase
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span>    <span style="color:#586e75"># å°†æ–‡ä»¶èµ„æºä½œä¸ºç¼–è¯‘èµ„æºåŠ å…¥åˆ°ç¼–è¯‘æºä¸­</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span>    <span style="color:#719e07">unless</span> build_file <span style="color:#719e07">=</span> phase<span style="color:#719e07">.</span>build_file(file)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span>      build_file <span style="color:#719e07">=</span> project<span style="color:#719e07">.</span>new(<span style="color:#cb4b16">PBXBuildFile</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12</span>      build_file<span style="color:#719e07">.</span>file_ref <span style="color:#719e07">=</span> file
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13</span>      phase<span style="color:#719e07">.</span>files <span style="color:#719e07">&lt;&lt;</span> build_file
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14</span>    <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15</span>	 <span style="color:#719e07">...</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16</span>    <span style="color:#719e07">yield</span> build_file <span style="color:#719e07">if</span> <span style="color:#b58900">block_given?</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18</span>    build_file
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">19</span>  <span style="color:#719e07">end</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">20</span><span style="color:#719e07">end</span>
</code></pre></div><h3 id="0x02-æ·»åŠ ç¼–è¯‘ä¾èµ–">0x02 æ·»åŠ ç¼–è¯‘ä¾èµ–</h3>
<p>è¿™é‡Œçš„ç¼–è¯‘ä¾èµ–æ˜¯æŒ‡ï¼Œä¾èµ–çš„ frameworkã€libraryã€bundleã€‚ä¸åŒäºæ–‡ä»¶ï¼Œä»–æœ‰å‡æœ‰å¯¹åº”çš„è™šæ‹Ÿ groupã€‚</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1</span><span style="color:#586e75"># æ·»åŠ  framework å¼•ç”¨</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2</span>file_ref <span style="color:#719e07">=</span> project<span style="color:#719e07">.</span>frameworks_group<span style="color:#719e07">.</span>new_file(<span style="color:#2aa198">&#39;path/to/A.framework&#39;</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3</span>target<span style="color:#719e07">.</span>frameworks_build_phases<span style="color:#719e07">.</span>add_file_reference(file_ref)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5</span><span style="color:#586e75"># æ·»åŠ  libA.a å¼•ç”¨</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6</span>file_ref <span style="color:#719e07">=</span> project<span style="color:#719e07">.</span>frameworks_group<span style="color:#719e07">.</span>new_file(<span style="color:#2aa198">&#39;path/to/libA.a&#39;</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7</span>target<span style="color:#719e07">.</span>frameworks_build_phases<span style="color:#719e07">.</span>add_file_reference(file_ref)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9</span><span style="color:#586e75"># æ·»åŠ  bundle å¼•ç”¨</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10</span>file_ref <span style="color:#719e07">=</span> project<span style="color:#719e07">.</span>frameworks_group<span style="color:#719e07">.</span>new_file(<span style="color:#2aa198">&#39;path/to/xxx.bundle&#39;</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11</span>target<span style="color:#719e07">.</span>resources_build_phase<span style="color:#719e07">.</span>add_file_reference(file_ref)
</code></pre></div><p>å¤§å®¶æœ‰å…´è¶£å¯ä»¥çœ‹çœ‹ CocoaPods æ˜¯å¦‚ä½•é…ç½® <code>Pods.project</code>ï¼Œä¸º Pod  ç”Ÿæˆå¯¹åº” targetï¼Œå…¥å£åœ¨ <code>Installer::generate_pods_project</code> å¤„ã€‚</p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p><strong>Xcode é€šè¿‡ project.pbxprojï¼Œåœ¨æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸ŠåˆæŠ½è±¡å‡ºåŸºäº <code>PBXFileReference</code> å’Œ <code>PBXGroup</code> çš„ä»»åŠ¡æ„å»ºç³»ç»Ÿ</strong>ã€‚å¯¹äºè¿™ä¸€æ“ä½œä¸€ç›´æ˜¯ä¸èƒ½ç†è§£çš„ã€‚ä¸ºä»€ä¹ˆä¸åƒå…¶ä»– IDE ä¸€æ ·ç›´æ¥ä½¿ç”¨é¡¹ç›®çš„æ–‡ä»¶ç›®å½•ï¼Œè€Œæ˜¯å¦èµ·ç‚‰ç¶æäº†ä¸€å¥—ä¼¼ä¹å¹¶ä¸å¥½ç”¨æ„å»ºä»¶ç³»ç»Ÿå‘¢ ï¼Ÿ</p>
<p>åœ¨äº†è§£å®Œ <code>project.pbxproj</code> å’Œ Xcodeproj åï¼Œä¼¼ä¹èƒ½ç†è§£ä¸€äº›è®¾è®¡è€…çš„æ„å›¾ã€‚</p>
<p>å‡è®¾ä½ å‚ä¸çš„æ˜¯ä¸€ä¸ªå¤šäººåˆä½œçš„è¶…å¤§å‹é¡¹ç›® (Project)ï¼Œå®ƒå°†åŒæ—¶å­˜åœ¨å¤šä¸ªå­ä»»åŠ¡ (Target)ï¼ŒåŒæ—¶è¿™äº›ä»»åŠ¡ä¹‹é—´å¯èƒ½å­˜åœ¨å¤§é‡äº¤å‰çš„èµ„æºä¾èµ–ã€‚è¿™äº›èµ„æºä¸é™äº  Fileã€Frameworkã€Targetã€Projectã€‚å¦‚æœæˆ‘ä»¬ç›´æ¥åŸºäºæ–‡ä»¶è·¯å¾„æ¥è®°å½•è¿™äº›èµ„æºåŠå…¶ä¾èµ–å…³ç³»ï¼Œé‚£ä¹ˆå½“èµ„æºå‘ç”Ÿäº§ç”Ÿå˜åŒ–æ—¶ï¼Œå°†ä¼šäº§ç”Ÿå¤§é‡çš„ä¿®æ”¹ï¼Œä¾‹å¦‚æ–‡ä»¶è·¯å¾„å˜æ›´ã€‚</p>
<p>è¿™å…¶å®æ˜¯ä¸èƒ½æ¥å—çš„ã€‚è€Œæœ‰äº† <code>PBXFileReference</code> çš„å­˜åœ¨ï¼Œä»»åŠ¡æ„å»ºè€…åªéœ€å…³å¿ƒ <code>PBXFileReference</code> è¿™å”¯ä¸€å¼•ç”¨ï¼Œæ— éœ€åœ¨æ„å®ƒèƒŒåçš„æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œç”šè‡³æ˜¯å†…å®¹æ˜¯å¦å˜æ›´ï¼Œè¿™äº›éƒ½ä¸é‡è¦ã€‚<strong>é€šè¿‡ <code>PBXFileReference</code> è¿™å±‚éš”ç¦»ï¼Œå®ç°äº†ä»»åŠ¡çš„æ„å»ºè¡Œä¸ºåŠèµ„æºå…³ç³»çš„å›ºåŒ–ã€‚</strong></p>
<h1 id="çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†">çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†</h1>
<p>è¿™é‡Œç½—åˆ—äº†äº”ä¸ªé—®é¢˜ç”¨æ¥è€ƒå¯Ÿä½ æ˜¯å¦å·²ç»æŒæ¡äº†è¿™ç¯‡æ–‡ç« ï¼Œå¦‚æœæ²¡æœ‰å»ºè®®ä½ åŠ å…¥<strong>æ”¶è—</strong>å†æ¬¡é˜…è¯»ï¼š</p>
<ol>
<li>è¯´è¯´ <code>xcworkspace</code> å’Œ <code>xcodeproj</code> æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆåŒºåˆ« ï¼Ÿ</li>
<li><code>pbxproj</code> ä¸­ <code>isa</code> å…³é”®å­—çš„ä½œç”¨ï¼Œæœ‰å“ªäº›ç±»å‹ ï¼Ÿ</li>
<li>è¯´è¯´ <code>pbxproj</code> ä¸­æ˜¯å¦‚ä½•å®šä¹‰å’Œå¼•ç”¨æºæ–‡ä»¶çš„ ï¼Ÿ</li>
<li><code>pbxproj</code> å¦‚ä½•æ˜ å°„ä¸º Xcodeproj ä¸­çš„å¯¹è±¡çš„ ï¼Ÿ</li>
<li>è°ˆè°ˆä½ å¯¹ <code>PBXGroup</code> å’Œ <code>PBXFileReference</code> çš„ç†è§£ ï¼Ÿ</li>
</ol>
</section>

  
  
  <footer class="post-tags">
     
    <a href="https://looseyi.github.io/tags/cocoapods">CocoaPods</a>
     
    <a href="https://looseyi.github.io/tags/ios">iOS</a>
     
    <a href="https://looseyi.github.io/tags/ruby">Ruby</a>
    
  </footer>
  

  
  
  
  <nav class="post-nav">
    
    <a class="prev" href="https://looseyi.github.io/post/wwdc/wwdc21/wwdc21-session-10019/"><span>â†</span><span>WWDC21 - Discover concurrency in SwiftUI</span></a>
     
    <a class="next" href="https://looseyi.github.io/post/sourcecode-cocoapods/07-cocoapods-molinillo/"><span>7. Molinillo ä¾èµ–æ ¡éªŒ</span><span>â†’</span></a>
    
  </nav>
  

  
  
</article>


			

  

  
    <script src="https://utteranc.es/client.js"
            repo="looseyi/looseyi.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

		</main>

    <footer class="footer">
  <p>&copy; 2021 <a href="https://looseyi.github.io/">Aha Edmond</a></p>
  <p>Powered by <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugoï¸ï¸</a>ï¸</p>
  <p>
    <a href="https://github.com/nanxiaobei/hugo-paper" rel="noopener" target="_blank">Paper 5.1</a>
  </p>
</footer>

		


  </body>
</html>
