<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>3. CocoaPods å‘½ä»¤è§£æ - CLAide - </title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="åœŸåœŸEdmondæœ¨" /><meta name="description" content="å¼•å­ åœ¨ä¸Šæ–‡ æ•´ä½“æŠŠæ¡ CocoaPods æ ¸å¿ƒç»„ä»¶ ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å¯¹ pod install çš„æµç¨‹çš„ä»‹ç»ï¼Œå¼•å‡º CocoaPods çš„å„ä¸ªæ ¸å¿ƒç»„ä»¶çš„è§’è‰²åˆ†å·¥å’Œå…¶ä¸»è¦ä½œç”¨ï¼Œå¸Œæœ›é€šè¿‡å¯¹è¿™äº›ç»„ä»¶çš„ä½¿ç”¨å’Œä»‹ç»æ¥å¸®åŠ©" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.71.1 with theme even" />


<link rel="canonical" href="http://looseyi.github.io/post/sourcecode-cocoapods/03-cocoapods-claide/" />
  <link href="http://looseyi.github.io/post/sourcecode-cocoapods/03-cocoapods-claide/index.xml" rel="alternate" type="application/rss+xml" title="" />
  <link href="http://looseyi.github.io/post/sourcecode-cocoapods/03-cocoapods-claide/index.xml" rel="feed" type="application/rss+xml" title="" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">


<link href="/dist/even.c2a46f00.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="3. CocoaPods å‘½ä»¤è§£æ - CLAide" />
<meta property="og:description" content="å¼•å­ åœ¨ä¸Šæ–‡ æ•´ä½“æŠŠæ¡ CocoaPods æ ¸å¿ƒç»„ä»¶ ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å¯¹ pod install çš„æµç¨‹çš„ä»‹ç»ï¼Œå¼•å‡º CocoaPods çš„å„ä¸ªæ ¸å¿ƒç»„ä»¶çš„è§’è‰²åˆ†å·¥å’Œå…¶ä¸»è¦ä½œç”¨ï¼Œå¸Œæœ›é€šè¿‡å¯¹è¿™äº›ç»„ä»¶çš„ä½¿ç”¨å’Œä»‹ç»æ¥å¸®åŠ©" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://looseyi.github.io/post/sourcecode-cocoapods/03-cocoapods-claide/" />
<meta property="article:published_time" content="2020-09-02T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-09-02T00:00:00+00:00" />
<meta itemprop="name" content="3. CocoaPods å‘½ä»¤è§£æ - CLAide">
<meta itemprop="description" content="å¼•å­ åœ¨ä¸Šæ–‡ æ•´ä½“æŠŠæ¡ CocoaPods æ ¸å¿ƒç»„ä»¶ ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å¯¹ pod install çš„æµç¨‹çš„ä»‹ç»ï¼Œå¼•å‡º CocoaPods çš„å„ä¸ªæ ¸å¿ƒç»„ä»¶çš„è§’è‰²åˆ†å·¥å’Œå…¶ä¸»è¦ä½œç”¨ï¼Œå¸Œæœ›é€šè¿‡å¯¹è¿™äº›ç»„ä»¶çš„ä½¿ç”¨å’Œä»‹ç»æ¥å¸®åŠ©">
<meta itemprop="datePublished" content="2020-09-02T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-09-02T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="6141">



<meta itemprop="keywords" content="CocoaPods,iOS,Ruby," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="3. CocoaPods å‘½ä»¤è§£æ - CLAide"/>
<meta name="twitter:description" content="å¼•å­ åœ¨ä¸Šæ–‡ æ•´ä½“æŠŠæ¡ CocoaPods æ ¸å¿ƒç»„ä»¶ ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å¯¹ pod install çš„æµç¨‹çš„ä»‹ç»ï¼Œå¼•å‡º CocoaPods çš„å„ä¸ªæ ¸å¿ƒç»„ä»¶çš„è§’è‰²åˆ†å·¥å’Œå…¶ä¸»è¦ä½œç”¨ï¼Œå¸Œæœ›é€šè¿‡å¯¹è¿™äº›ç»„ä»¶çš„ä½¿ç”¨å’Œä»‹ç»æ¥å¸®åŠ©"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Aha Moment</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Aha Moment</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">3. CocoaPods å‘½ä»¤è§£æ - CLAide</h1>

      <div class="post-meta">
        <span class="post-time"> 2020-09-02 </span>
        <div class="post-category">
            <a href="/categories/ios/"> iOS </a>
            <a href="/categories/cocoapods/"> CocoaPods </a>
            </div>
          <span class="more-meta"> çº¦ 6141 å­— </span>
          <span class="more-meta"> é¢„è®¡é˜…è¯» 13 åˆ†é’Ÿ </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#claide-åŠŸèƒ½æ¦‚è§ˆ">CLAide åŠŸèƒ½æ¦‚è§ˆ</a></li>
    <li><a href="#calide-çš„ç›®å½•ç»“æ„">CALide çš„ç›®å½•ç»“æ„</a></li>
    <li><a href="#command-æŠ½è±¡ç±»">Command æŠ½è±¡ç±»</a>
      <ul>
        <li><a href="#abstract-command">Abstract Command</a></li>
        <li><a href="#normal-command">Normal Command</a></li>
        <li><a href="#run-æ–¹æ³•">Run æ–¹æ³•</a></li>
        <li><a href="#argv-ä¼ å…¥å‚æ•°">ARGV ä¼ å…¥å‚æ•°</a></li>
      </ul>
    </li>
    <li><a href="#banner-ä¸è¾“å‡ºæ ¼å¼åŒ–">Banner ä¸è¾“å‡ºæ ¼å¼åŒ–</a></li>
    <li><a href="#pluginmanager-è½½å…¥æ’ä»¶">PluginManager è½½å…¥æ’ä»¶</a></li>
  </ul>

  <ul>
    <li><a href="#é…ç½®æ¨¡ç‰ˆé¡¹ç›®">é…ç½®æ¨¡ç‰ˆé¡¹ç›®</a>
      <ul>
        <li><a href="#0x1-ç”Ÿæˆæ¨¡ç‰ˆé¡¹ç›®">0x1 ç”Ÿæˆæ¨¡ç‰ˆé¡¹ç›®</a></li>
        <li><a href="#0x2-ä¿®æ”¹-gemspec-é…ç½®">0x2 ä¿®æ”¹ gemspec é…ç½®</a></li>
        <li><a href="#0x3-æ·»åŠ å‘½ä»¤è¡Œå…¥å£">0x3 æ·»åŠ å‘½ä»¤è¡Œå…¥å£</a></li>
      </ul>
    </li>
    <li><a href="#æ·»åŠ å‘½ä»¤å®ç°">æ·»åŠ å‘½ä»¤å®ç°</a>
      <ul>
        <li><a href="#beveragemaker">BeverageMaker</a></li>
        <li><a href="#coffee">Coffee</a></li>
        <li><a href="#tea">Tea</a></li>
      </ul>
    </li>
    <li><a href="#å®‰è£…--è´©å–æœº">å®‰è£… ğŸ¥¤ è´©å–æœº</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h1 id="å¼•å­">å¼•å­</h1>
<p>åœ¨ä¸Šæ–‡ <a href="https://juejin.im/post/6861792671489327111">æ•´ä½“æŠŠæ¡ CocoaPods æ ¸å¿ƒç»„ä»¶</a> ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å¯¹ <code>pod install</code> çš„æµç¨‹çš„ä»‹ç»ï¼Œå¼•å‡º CocoaPods çš„å„ä¸ªæ ¸å¿ƒç»„ä»¶çš„è§’è‰²åˆ†å·¥å’Œå…¶ä¸»è¦ä½œç”¨ï¼Œå¸Œæœ›é€šè¿‡å¯¹è¿™äº›ç»„ä»¶çš„ä½¿ç”¨å’Œä»‹ç»æ¥å¸®åŠ©å¤§å®¶æ›´å¥½çš„äº†è§£ CocoaPods çš„å®Œæ•´å·¥ä½œæµä»¥åŠèƒŒåçš„åŸç†ã€‚
ä»Šå¤©æˆ‘ä»¬ä¸»è¦èŠä¸€èŠä¸º CocoaPods æä¾›çš„å‘½ä»¤è¡Œè§£æçš„å·¥å…· <code>CLAide</code>ï¼Œå®ƒæ˜¯å¦‚ä½•æ¥è§£æ pod å‘½ä»¤ä»¥åŠ CocoaPods çš„æ’ä»¶æœºåˆ¶ã€‚</p>
<h1 id="open-class">Open Class</h1>
<p>å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸ª Ruby çš„è¯­è¨€ç‰¹æ€§ï¼š<a href="http://rubylearning.com/satishtalim/ruby_open_classes.html">Open Classes</a>
åœ¨ Ruby ä¸­ï¼Œç±»æ°¸è¿œæ˜¯å¼€æ”¾çš„ï¼Œä½ æ€»æ˜¯å¯ä»¥å°†æ–°çš„æ–¹æ³•åŠ å…¥åˆ°å·²æœ‰çš„ç±»ä¸­ï¼Œé™¤äº†åœ¨ä½ è‡ªå·±çš„ä»£ç ä¸­ï¼Œè¿˜å¯ä»¥ç”¨åœ¨æ ‡å‡†åº“å’Œå†…ç½®ç±»ä¸­ï¼Œè¿™ä¸ªç‰¹æ€§è¢«ç§°ä¸º <code>Open Classes</code>ã€‚è¯´åˆ°è¿™é‡Œä½œä¸º iOS å·¥ç¨‹å¸ˆï¼Œè„‘ä¸­åŸºæœ¬èƒ½é—ªç°å‡º Objective-C çš„ <a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/DevPedia-CocoaCore/Category.html"><strong>Category</strong></a> æˆ–è€… Swift çš„ <a href="https://docs.swift.org/swift-book/LanguageGuide/Extensions.html"><strong>Extensions</strong></a> ç‰¹æ€§ã€‚ä¸è¿‡ï¼Œè¿™ç§åŠ¨æ€æ›¿æ¢æ–¹æ³•çš„åŠŸèƒ½ä¹Ÿç§°ä½œ Monkeypatchã€‚(ğŸ’  åˆ°åº•æ‹›è°æƒ¹è°äº†ï¼‰
ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨ <code>Monkey.rb</code> æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰ç±» <code>Monkey</code> æ¥ç®€å•çœ‹ä¸€ä¸‹è¯¥ç‰¹æ€§ï¼Œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Monkey</span>
  <span class="k">def</span> <span class="nf">eat</span>
    <span class="nb">puts</span> <span class="s2">&#34;i have banana&#34;</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">monkey</span> <span class="o">=</span> <span class="no">Monkey</span><span class="o">.</span><span class="n">new</span>

<span class="k">class</span> <span class="nc">Monkey</span>
  <span class="k">def</span> <span class="nf">eat</span>
    <span class="nb">puts</span> <span class="s2">&#34;I have apple&#34;</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">monkey</span><span class="o">.</span><span class="n">eat</span>
</code></pre></td></tr></table>
</div>
</div><p>ç›´æ¥åœ¨ VSCode ä¸­è¿è¡Œï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>Running<span class="o">]</span> ruby <span class="s2">&#34;/Users/edmond/Desktop/Monkey.rb&#34;</span>
I have apple
</code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>Monkey</code> ç±»çš„å®ä¾‹è¾“å‡ºå·²ç»æ”¹ä¸º <code>I have apple</code>ã€‚</p>
<blockquote>
<p>éœ€è¦æ³¨æ„ï¼Œå³ä½¿æ˜¯å·²ç»åˆ›å»ºå¥½çš„å®ä¾‹ï¼Œæ–¹æ³•æ›¿æ¢åŒæ ·æ˜¯ç”Ÿæ•ˆçš„ã€‚
å¦å¤– âš ï¸ <code>Open Class</code> å¯ä»¥è·¨æ–‡ä»¶ã€è·¨æ¨¡å—è¿›è¡Œè®¿é—®çš„ï¼Œç”šè‡³å¯¹ Ruby å†…ç½®æ–¹æ³•çš„ä¹ŸåŒæ ·é€‚ç”¨ (è°¨æ…)ã€‚</p>
</blockquote>
<p>è¿™å¼ºå¤§çš„åŠŸèƒ½è®©æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„å¯¹ä¸‰æ–¹æ¨¡å—è¿›è¡Œæ‰©å±•ï¼Œè¿™ä¹Ÿæ˜¯ CocoaPods çš„æ’ä»¶ä½“ç³»æ‰€ä¾èµ–çš„åŸºç¡€ã€‚
ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ <em>CocoaPods</em> ä¸»ä»“åº“ <code>cocoapods/downloader.rb</code> ä¸­å®šä¹‰äº†ä¸€äº› download æ–¹æ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="k">module</span> <span class="nn">Pod</span>
  <span class="k">module</span> <span class="nn">Downloader</span>
    <span class="c1"># ...</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p>ä½†æ˜¯åœ¨ <em><a href="https://github.com/CocoaPods/cocoapods-downloader">cocoapods-downloader</a></em> æ¨¡å—ä¸­ï¼Œmodule <code>Downloader</code> çš„æ–¹æ³•å¹¶ä¸èƒ½æ»¡è¶³å…¨éƒ¨éœ€æ±‚ï¼Œäºæ˜¯åœ¨ <code>cocoapods-downloader/api.rbapi.rb</code> ä¸­å°±å¯¹å…¶è¿›è¡Œäº†æ‰©å±•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="k">module</span> <span class="nn">Pod</span>
  <span class="k">module</span> <span class="nn">Downloader</span>
    <span class="k">module</span> <span class="nn">API</span>
      <span class="k">def</span> <span class="nf">execute_command</span><span class="p">(</span><span class="n">executable</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">raise_on_failure</span> <span class="o">=</span> <span class="kp">false</span><span class="p">)</span>
        <span class="c1"># ...</span>
      <span class="k">end</span>
      <span class="c1"># ...</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="claide">CLAide</h1>
<p><a href="https://github.com/CocoaPods/CLAide">CLAide</a> è™½ç„¶æ˜¯ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œè§£é‡Šå™¨ï¼Œä½†å®ƒæä¾›äº†åŠŸèƒ½é½å…¨çš„å‘½ä»¤è¡Œç•Œé¢å’Œ APIã€‚å®ƒä¸ä»…è´Ÿè´£è§£ææˆ‘ä»¬ä½¿ç”¨åˆ°çš„ <code>Pods</code> å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š<code>pod install</code>, <code>pod update</code> ç­‰ï¼Œè¿˜å¯ç”¨äºå°è£…å¸¸ç”¨çš„ä¸€äº›è„šæœ¬ï¼Œå°†å…¶æ‰“åŒ…æˆç®€å•çš„å‘½ä»¤è¡Œå°å·¥å…·ã€‚</p>
<blockquote>
<p>å¤‡æ³¨ï¼šæ‰€è°“å‘½ä»¤è¡Œè§£é‡Šå™¨å°±æ˜¯ä»æ ‡å‡†è¾“å…¥æˆ–è€…æ–‡ä»¶ä¸­è¯»å–å‘½ä»¤å¹¶æ‰§è¡Œçš„ç¨‹åºã€‚è¯¦è§ <a href="https://www.wikiwand.com/en/Command-line_argument_parsing">Wiki</a>ã€‚</p>
</blockquote>
<h2 id="claide-åŠŸèƒ½æ¦‚è§ˆ">CLAide åŠŸèƒ½æ¦‚è§ˆ</h2>
<p>æˆ‘ä»¬å…ˆé€šè¿‡ <code>pod --help</code> æ¥æŸ¥çœ‹ <code>CLAide</code> çš„çœŸå®è¾“å‡ºæ•ˆæœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="err">$</span> <span class="n">pod</span>
<span class="ss">Usage</span><span class="p">:</span>
  <span class="err">$</span> <span class="n">pod</span> <span class="no">COMMAND</span>
    <span class="no">CocoaPods</span><span class="p">,</span> <span class="n">the</span> <span class="no">Cocoa</span> <span class="n">library</span> <span class="n">package</span> <span class="n">manager</span><span class="o">.</span>

<span class="ss">Commands</span><span class="p">:</span>
  <span class="o">+</span> <span class="n">cache</span>               <span class="no">Manipulate</span> <span class="n">the</span> <span class="no">CocoaPods</span> <span class="n">cache</span>
  <span class="o">+</span> <span class="n">deintegrate</span>         <span class="no">Deintegrate</span> <span class="no">CocoaPods</span> <span class="n">from</span> <span class="n">your</span> <span class="n">project</span>
  <span class="o">+</span> <span class="n">env</span>                 <span class="no">Display</span> <span class="n">pod</span> <span class="n">environment</span>
  <span class="o">+</span> <span class="n">init</span>                <span class="no">Generate</span> <span class="n">a</span> <span class="no">Podfile</span> <span class="k">for</span> <span class="n">the</span> <span class="n">current</span> <span class="n">directory</span>
  <span class="o">...</span>

<span class="ss">Options</span><span class="p">:</span>
  <span class="o">--</span><span class="n">allow</span><span class="o">-</span><span class="n">root</span>          <span class="no">Allows</span> <span class="no">CocoaPods</span> <span class="n">to</span> <span class="n">run</span> <span class="n">as</span> <span class="n">root</span>
  <span class="o">--</span><span class="n">silent</span>              <span class="no">Show</span> <span class="n">nothing</span>
  <span class="o">--</span><span class="n">version</span>             <span class="no">Show</span> <span class="n">the</span> <span class="n">version</span> <span class="n">of</span> <span class="n">the</span> <span class="n">tool</span>
  <span class="o">...</span>
</code></pre></td></tr></table>
</div>
</div><p>ğŸ‘†æ‰€å±•ç¤ºçš„ <code>Usage</code>ã€<code>Commands</code>ã€<code>Options</code> section åŠå…¶å†…å®¹å‡æ˜¯ç”± <code>CALide</code> çš„è¾“å‡ºæ¨¡ç‰ˆ <strong>Banner</strong> æ¥å®Œæˆçš„ã€‚<code>CALide</code> æä¾›äº† Command åŸºç±»å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä¹‰å‡ºæ ‡å‡†ä¸”ç¾è§‚çš„å‘½ä»¤ã€‚é™¤äº† <code>pod</code> å‘½ä»¤ä¹‹å¤–ï¼Œä¾‹å¦‚ï¼š<a href="https://github.com/CocoaPods/Xcodeproj">Xcodeproj</a> æ‰€æä¾›çš„å‘½ä»¤ä¹Ÿæ˜¯ç”± <code>CALide</code> æ¥å®ç°çš„ã€‚
<code>CALide</code> è¿˜æä¾›äº†ä¸€å¥—æ’ä»¶åŠ è½½æœºåˆ¶åœ¨å‘½ä»¤æ‰§è¡Œå‰è·å–æ‰€æœ‰æ’ä»¶ä¸­çš„å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š<code>cocoapods-packeger</code> æä¾›çš„ <code>pod package NAME [SOURCE]</code> å°±æ˜¯ä»å…¶ source code ä¸­çš„ <code>lib/pod/commnad/package.rb</code> è¯»å–å‡ºæ¥çš„ï¼Œå®ƒä»¤æˆ‘ä»¬ä»…éœ€ä¸€ä»½ <code>podspec</code> ä¿¡æ¯ï¼Œå³å¯å®Œæˆ Cocoa ä¾èµ–åº“çš„ ğŸ“¦ã€‚</p>
<h2 id="calide-çš„ç›®å½•ç»“æ„">CALide çš„ç›®å½•ç»“æ„</h2>
<blockquote>
<p>å¯¹äº Ruby çš„é¡¹ç›®ç»“æ„ï¼Œåœ¨ Rubygems.org ä¸­æœ‰ <a href="https://guides.rubygems.org/make-your-own-gem/">æ–‡ä»¶ç»“æ„æ‰‹å†Œ</a> è¿™ä¸ªæ ‡å‡†ä¾›å¤§å®¶å‚è€ƒå­¦ä¹ ã€‚</p>
</blockquote>
<p>é¦–å…ˆæ¥çœ‹ CALide é¡¹ç›®çš„æ–‡ä»¶å…¥å£ lib/calide.rb ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="k">module</span> <span class="nn">CLAide</span>
  <span class="no">VERSION</span> <span class="o">=</span> <span class="s1">&#39;1.0.3&#39;</span><span class="o">.</span><span class="n">freeze</span>
  <span class="nb">require</span> <span class="s1">&#39;claide/ansi&#39;</span>
  <span class="nb">require</span> <span class="s1">&#39;claide/argument&#39;</span>
  <span class="nb">require</span> <span class="s1">&#39;claide/argv&#39;</span>
  <span class="nb">require</span> <span class="s1">&#39;claide/command&#39;</span>
  <span class="nb">require</span> <span class="s1">&#39;claide/help&#39;</span>
  <span class="nb">require</span> <span class="s1">&#39;claide/informative_error&#39;</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬æ¥ä¸‹æ¥åˆ†æä¸€ä¸‹ <code>lib/cladie/</code> ç›®å½•ä¸‹çš„ç›¸å…³ä»£ç ã€‚</p>
<h2 id="command-æŠ½è±¡ç±»">Command æŠ½è±¡ç±»</h2>
<p><code>Command</code> æ˜¯ç”¨äºæ„å»ºå‘½ä»¤è¡Œç•Œé¢çš„åŸºç¡€æŠ½è±¡ç±»ã€‚æ‰€æœ‰æˆ‘ä»¬æ·»åŠ çš„å‘½ä»¤éƒ½éœ€è¦ç»§æ‰¿è‡ª <code>Command</code>ï¼Œè¿™äº›å­ç±»å¯ä»¥åµŒå¥—ç»„åˆæˆæ›´åŠ ç²¾ç»†çš„å‘½ä»¤ã€‚
<code>pod</code> å‘½ä»¤æ­£æ˜¯ç”±å¤šä¸ª <code>Pod::Command &lt; CLAide::Command</code> çš„å­ç±»ç»„åˆè€Œæˆçš„ <code>abstract command</code>ã€‚å½“ç„¶ <code>pod</code> çš„ subcommand åŒæ ·ä¹Ÿèƒ½å£°æ˜ä¸º <code>abstact command</code>ï¼Œé€šè¿‡è¿™æ ·çš„æ–¹å¼æˆ‘ä»¬å°±èƒ½è¾¾åˆ°å¤šçº§åµŒå¥—å‘½ä»¤çš„æ•ˆæœã€‚æœ‰æŠ½è±¡å‘½ä»¤å½“ç„¶ä¹Ÿéœ€è¦æœ‰å…·ä½“æ‰§è¡Œä»»åŠ¡çš„ <code>normal command</code>ã€‚
ä¸¾ä¸ªä¾‹å­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-basic" data-lang="basic"><span class="err">$</span><span class="w"> </span><span class="vg">pod</span><span class="w"> </span><span class="vg">update</span><span class="w"> </span><span class="o">--</span><span class="vg">help</span>
<span class="nl">Usage:</span>
<span class="w">  </span><span class="err">$</span><span class="w"> </span><span class="vg">pod</span><span class="w"> </span><span class="vg">update</span><span class="w"> </span><span class="p">[</span><span class="vg">POD_NAMES</span><span class="w"> </span><span class="o">...</span><span class="p">]</span>
<span class="w">    </span><span class="vg">Updates</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">Pods</span><span class="w"> </span><span class="vg">identified</span><span class="w"> </span><span class="vg">by</span><span class="w"> </span><span class="vg">the</span><span class="w"> </span><span class="vg">specified</span><span class="w"> </span><span class="err">`</span><span class="vg">POD_NAMES</span><span class="err">`</span>

<span class="nl">Options:</span>
<span class="w">  </span><span class="o">--</span><span class="vg">verbose</span><span class="w">                              </span><span class="vg">Show</span><span class="w"> </span><span class="vg">more</span><span class="w"> </span><span class="vg">debugging</span><span class="w"> </span><span class="vg">information</span>
<span class="w">  </span><span class="o">--</span><span class="vg">no</span><span class="o">-</span><span class="vg">ansi</span><span class="w">                              </span><span class="vg">Show</span><span class="w"> </span><span class="vg">output</span><span class="w"> </span><span class="vg">without</span><span class="w"> </span><span class="vg">ANSI</span><span class="w"> </span><span class="vg">codes</span>
<span class="w">  </span><span class="o">--</span><span class="vg">help</span><span class="w">                                 </span><span class="vg">Show</span><span class="w"> </span><span class="vg">help</span><span class="w"> </span><span class="vg">banner</span><span class="w"> </span><span class="vg">of</span><span class="w"> </span><span class="vg">specified</span><span class="w"> </span><span class="vg">command</span>
</code></pre></td></tr></table>
</div>
</div><p>å¯¹åº”çš„ï¼Œ <code>pod update</code>Â è¿™ä¸ªå‘½ä»¤çš„é€»è¾‘åœ¨ <code>CLAide</code> ä¸­å°±æ˜¯å¦‚ä¸‹æè¿°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="k">module</span> <span class="nn">Pod</span>
  <span class="k">class</span> <span class="nc">Command</span>
    <span class="k">class</span> <span class="nc">Update</span> <span class="o">&lt;</span> <span class="no">Command</span>
      <span class="nb">self</span><span class="o">.</span><span class="n">arguments</span> <span class="o">=</span> <span class="o">[</span>
        <span class="no">CLAide</span><span class="o">::</span><span class="no">Argument</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;POD_NAMES&#39;</span><span class="p">,</span> <span class="kp">false</span><span class="p">,</span> <span class="kp">true</span><span class="p">),</span>
      <span class="o">]</span>
      
      <span class="nb">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s">&lt;&lt;-DESC
</span><span class="s"></span>        <span class="no">Updates</span> <span class="n">the</span> <span class="no">Pods</span> <span class="n">identified</span> <span class="n">by</span> <span class="n">the</span> <span class="n">specified</span> <span class="sb">`POD_NAMES`</span><span class="o">.</span>
      <span class="no">DESC</span>
      
      <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">options</span>
        <span class="o">[</span>
          <span class="o">[</span><span class="s2">&#34;--sources&#34;</span><span class="p">,</span> <span class="s1">&#39;The sources from which to update dependent pods&#39;</span><span class="o">]</span><span class="p">,</span>
          <span class="o">[</span><span class="s1">&#39;--exclude-pods&#39;</span><span class="p">,</span> <span class="s1">&#39;Pods to exclude during update&#39;</span><span class="o">]</span><span class="p">,</span>
          <span class="o">[</span><span class="s1">&#39;--clean-install&#39;</span><span class="p">,</span> <span class="s1">&#39;Ignore the contents of the project cache and force a full pod installation&#39;</span><span class="o">]</span>
        <span class="o">].</span><span class="n">concat</span><span class="p">(</span><span class="k">super</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p>å½“æˆ‘ä»¬å¦‚æ­¤æè¿°åï¼ŒCLAide ä¼šå¯¹è¿™ä¸ªç±»è¿›è¡Œä»¥ä¸‹æ–¹å¼çš„è§£æï¼š</p>
<p><img src="http://cdn.nlark.com/yuque/0/2020/png/227152/1599005020049-ddaee5cf-5280-4586-b5ab-0a3587f0d245.png?x-oss-process=image%2Fresize%2Cw_746" alt="pod update"></p>
<p>æ­¤å¤–ï¼Œ<code>Command</code> class æä¾›äº†å¤§é‡åŸºç¡€åŠŸèƒ½ï¼Œå…¶ä¸­æœ€æ ¸å¿ƒçš„æ–¹æ³•ä¸º <code>run</code>ï¼Œä¼šåœ¨ <code>normal command</code> å°èŠ‚ä¼šä»‹ç»ã€‚å¯¹äºä»»ä½•å‘½ä»¤ç±»å‹éƒ½å¯ä»¥è®¾ç½®ä»¥ä¸‹å‡ ä¸ªå±æ€§å’Œæ–¹æ³•ï¼š</p>
<ul>
<li><strong>summary</strong>: ç”¨äºç®€å•æè¿°è¯¥å‘½ä»¤çš„ä½œç”¨</li>
<li><strong>options</strong>: ç”¨äºè¿”å›è¯¥å‘½ä»¤çš„å¯é€‰é¡¹åŠå¯¹åº”çš„æè¿°ï¼Œè¿”å›çš„ options éœ€è¦é€šè¿‡è°ƒç”¨ <code>super</code> æ’å…¥åˆ°çˆ¶ç±»çš„å¯é€‰é¡¹å‰</li>
<li><strong>initialize</strong>: å¦‚æœéœ€è¦è·å–å‘½ä»¤è¡Œä¼ é€’çš„å®å‚ï¼Œéœ€è¦é€šè¿‡é‡è½½ <code>initialize</code> æ–¹æ³•æ¥è·å–</li>
<li><strong>validate!</strong>: ç”¨äºæ£€æŸ¥è¾“å…¥å®å‚çš„æœ‰æ•ˆæ€§ï¼Œå¦‚æœæ ¡éªŒå¤±è´¥ï¼Œä¼šé€šè¿‡è°ƒç”¨ <code>help!</code> æ–¹æ³•æ¥è¾“å‡ºå¸®åŠ©ä¿¡æ¯</li>
<li><strong>help!</strong>ï¼šç”¨äºé”™è¯¯ä¿¡æ¯çš„å¤„ç†å’Œå±•ç¤º</li>
</ul>
<p>æ³¨æ„ âš ï¸ï¼šè¿™é‡Œæˆ‘ä»¬è¯´çš„ <strong><code>abstract command</code> å’Œ <code>normal command</code> å‡æ˜¯é€šè¿‡ <code>Command</code> æ¥å®ç°çš„</strong>ï¼Œåªæ˜¯å®ƒä»¬çš„é…ç½®ä¸åŒã€‚</p>
<h3 id="abstract-command">Abstract Command</h3>
<p><code>abstract command</code> ä¸ºä¸æä¾›å…·ä½“å‘½ä»¤å®ç°çš„æŠ½è±¡å®¹å™¨å‘½ä»¤ç±»ï¼Œä¸è¿‡å®ƒå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªçš„ subcommandsã€‚æˆ‘ä»¬å¯ä»¥æŒ‡å®š subcommands ä¸­çš„ <code>normal command</code> ä¸ºé»˜è®¤å‘½ä»¤ï¼Œå°±èƒ½å°† <code>abstract command</code> ä½œä¸ºä½œä¸ºæ™®é€šå‘½ä»¤ç›´æ¥æ‰§è¡Œäº†ã€‚
æŠ½è±¡å‘½ä»¤çš„ç°å®æ¯”è¾ƒç®€å•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="nb">self</span><span class="o">.</span><span class="n">abstract_command</span> <span class="o">=</span> <span class="kp">true</span>
</code></pre></td></tr></table>
</div>
</div><p>ä»…éœ€è®¾ç½® <code>abstract_command</code>ï¼Œç„¶åå°±å¯ä»¥ç»§æ‰¿å®ƒæ¥å®ç°æ™®é€šå‘½ä»¤æˆ–è€…å¤šçº§åµŒå¥—çš„æŠ½è±¡å‘½ä»¤ã€‚
ä»¥ <code>pod</code> å‘½ä»¤çš„å®ç°ä¸ºä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="k">module</span> <span class="nn">Pod</span>
  <span class="k">class</span> <span class="nc">Command</span> <span class="o">&lt;</span> <span class="no">CLAide</span><span class="o">::</span><span class="no">Command</span>
    <span class="nb">require</span> <span class="s1">&#39;cocoapods/command/install&#39;</span> <span class="c1"># 1</span>
    <span class="nb">require</span> <span class="s1">&#39;cocoapods/command/update&#39;</span>
    <span class="c1"># ...</span>
    <span class="nb">self</span><span class="o">.</span><span class="n">abstract_command</span> <span class="o">=</span> <span class="kp">true</span>
    <span class="nb">self</span><span class="o">.</span><span class="n">command</span> <span class="o">=</span> <span class="s1">&#39;pod&#39;</span>
    <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p>ä¸Šè¿°é€šè¿‡ <strong>require</strong> å¼•å…¥çš„ <code>update</code>ã€<code>install</code> ç­‰å­å‘½ä»¤éƒ½æ˜¯ç»§æ‰¿è‡ª <code>Pod::Command</code> çš„ <code>normal command</code>ã€‚
<img src="http://cdn.nlark.com/yuque/0/2020/jpeg/98641/1598855030376-84980ad9-7ff0-4c97-bee8-266bc77772e9.jpeg?x-oss-process=image%2Fresize%2Cw_746" alt=""></p>
<h3 id="normal-command">Normal Command</h3>
<p>ç›¸å¯¹äºæŠ½è±¡å‘½ä»¤ï¼Œæ™®é€šå‘½ä»¤å°±éœ€è¦è®¾ç½®ä¼ é€’å®å‚çš„åç§°å’Œæè¿°ï¼Œä»¥åŠé‡è½½ <code>run</code> æ–¹æ³•ã€‚
<strong>Arguments</strong>
<code>arguments</code> ç”¨äºé…ç½®è¯¥å‘½ä»¤æ”¯æŒçš„å‚æ•°åˆ—è¡¨çš„ banner è¾“å‡ºï¼Œç±»å‹ä¸º <code>Array&lt;Argument&gt;]</code>ï¼Œå®ƒæœ€ç»ˆä¼šæ ¼å¼åŒ–æˆå¯¹åº”çš„ä¿¡æ¯å±•ç¤ºåœ¨ <code>Usage</code> banner ä¸­ã€‚
æˆ‘ä»¬æ¥çœ‹ <code>pod update</code> çš„ <code>arguments</code> æ˜¯å¦‚ä½•é…ç½®çš„ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="nb">self</span><span class="o">.</span><span class="n">arguments</span> <span class="o">=</span> <span class="o">[</span>
  <span class="no">CLAide</span><span class="o">::</span><span class="no">Argument</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;POD_NAMES&#39;</span><span class="p">,</span> <span class="kp">false</span><span class="p">,</span> <span class="kp">true</span><span class="p">),</span>
<span class="o">]</span>
</code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­ <code>Argument</code> çš„æ„é€ æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="k">module</span> <span class="nn">CLAide</span>
  <span class="k">class</span> <span class="nc">Argument</span>
   
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">required</span><span class="p">,</span> <span class="n">repeatable</span> <span class="o">=</span> <span class="kp">false</span><span class="p">)</span>
      <span class="vi">@names</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
      <span class="vi">@required</span> <span class="o">=</span> <span class="n">required</span>
      <span class="vi">@repeatable</span> <span class="o">=</span> <span class="n">repeatable</span>
    <span class="k">end</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œä¼ å…¥çš„ names å°±æ˜¯åœ¨ <code>Usage</code> banner ä¸­è¾“å‡ºçš„ <code>[POD_NAMES ...]</code> ã€‚
<strong>require</strong> è¡¨ç¤ºè¯¥ Argument æ˜¯å¦ä¸ºå¿…ä¼ å‚æ•°ï¼Œå¯é€‰å‚æ•°ä¼šç”¨ <code>[ ]</code> å°†å…¶åŒ…è£¹èµ·æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ <code>pod update</code> å‘½ä»¤é»˜è®¤æ˜¯ä¸éœ€è¦ä¼  <code>POD_NAMES</code>
<strong>repeatable</strong> è¡¨ç¤ºè¯¥ Argument æ˜¯å¦å¯ä»¥é‡å¤å¤šæ¬¡å‡ºç°ã€‚å¦‚æœè®¾ç½®ä¸ºå¯é‡å¤ï¼Œé‚£ä¹ˆä¼šåœ¨ names çš„è¾“å‡ºä¿¡æ¯åé¢ä¼šæ·»åŠ  <code>...</code> è¡¨ç¤ºè¯¥å‚æ•°ä¸ºå¤æ•°å‚æ•°ã€‚
ä¸¾ä¸ªä¾‹å­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ pod update Alamofire, SwiftyJSON
</code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬å¯ä»¥æŒ‡å®š <code>pod update</code> ä»…æ›´æ–°ç‰¹å®šçš„ä¾èµ–åº“ï¼Œå¦‚æœä¸ä¼  <code>POD_NAMES</code> å°†è¿›è¡Œå…¨é‡æ›´æ–°ã€‚</p>
<h3 id="run-æ–¹æ³•">Run æ–¹æ³•</h3>
<p>åœ¨ <code>Command</code> ç±»ä¸­å®šä¹‰äº†ä¸¤ä¸ª <code>run</code> æ–¹æ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">run</span><span class="p">(</span><span class="n">argv</span> <span class="o">=</span> <span class="o">[]</span><span class="p">)</span>
  <span class="c1"># æ ¹æ®æ–‡ä»¶å‰ç¼€æ¥åŒ¹é…å¯¹åº”çš„æ’ä»¶</span>
  <span class="n">plugin_prefixes</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">plugin_prefix</span><span class="o">|</span>
    <span class="no">PluginManager</span><span class="o">.</span><span class="n">load_plugins</span><span class="p">(</span><span class="n">plugin_prefix</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">argv</span> <span class="o">=</span> <span class="no">ARGV</span><span class="o">.</span><span class="n">coerce</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
  <span class="c1"># è§£æ argument ç”Ÿæˆå¯¹åº”çš„ command instance</span>
  <span class="n">command</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span> 
  <span class="no">ANSI</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="o">!</span><span class="n">command</span><span class="o">.</span><span class="n">ansi_output?</span>
  <span class="k">unless</span> <span class="n">command</span><span class="o">.</span><span class="n">handle_root_options</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">command</span><span class="o">.</span><span class="n">validate!</span>
    <span class="n">command</span><span class="o">.</span><span class="n">run</span>
  <span class="k">end</span>
<span class="k">rescue</span> <span class="no">Object</span> <span class="o">=&gt;</span> <span class="n">exception</span>
  <span class="n">handle_exception</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">exception</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">run</span>
  <span class="k">raise</span> <span class="s1">&#39;A subclass should override the `CLAide::Command#run` method to &#39;</span> <span class="p">\</span>
  <span class="s1">&#39;actually perform some work.&#39;</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œçš„ <code>self.run</code> æ–¹æ³•æ˜¯ class methodï¼Œè€Œ <code>run</code> æ˜¯ instanced methodã€‚å¯¹äº <code>Ruby</code> ä¸å¤ªç†Ÿæ‚‰çš„åŒå­¦å¯ä»¥çœ‹çœ‹è¿™ä¸ªï¼š<a href="https://stackoverflow.com/questions/13706373/what-does-def-self-function-name-mean">What does def <code>self.function</code> name mean?</a>
ä½œä¸º <code>Command</code> ç±»çš„æ ¸å¿ƒæ–¹æ³•ï¼Œç±»æ–¹æ³• <code>self.run</code> å°†ç»ˆç«¯ä¼ å…¥çš„å‚æ•°è§£ææˆå¯¹åº”çš„ <strong>command</strong> å’Œ <strong>argv</strong>ï¼Œå¹¶æœ€ç»ˆè°ƒç”¨ command çš„å®ä¾‹æ–¹æ³• <code>run</code> æ¥è§¦å‘çœŸæ­£çš„å‘½ä»¤é€»è¾‘ã€‚å› æ­¤ï¼Œå­ç±»éœ€è¦é€šè¿‡é‡è½½ <code>run</code> æ–¹æ³•æ¥å®Œæˆå¯¹åº”å‘½ä»¤çš„å®ç°ã€‚
é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ–¹æ³• <code>Command::parse</code> æ˜¯å¦‚ä½•å°† <code>run</code> çš„ç±»æ–¹æ³•è½¬æ¢ä¸ºå®ä¾‹æ–¹æ³•çš„å‘¢ï¼Ÿ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
  <span class="c1"># é€šè¿‡è§£æ argv è·å–åˆ°ä¸ cmd åç§°</span>
  <span class="n">argv</span> <span class="o">=</span> <span class="no">ARGV</span><span class="o">.</span><span class="n">coerce</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
  <span class="n">cmd</span> <span class="o">=</span> <span class="n">argv</span><span class="o">.</span><span class="n">arguments</span><span class="o">.</span><span class="n">first</span>
  <span class="c1"># å¦‚æœ cmd å¯¹åº”çš„ Command ç±»ï¼Œåˆ™æ›´æ–° argvï¼Œç»§ç»­è§£æå‘½ä»¤</span>
  <span class="k">if</span> <span class="n">cmd</span> <span class="o">&amp;&amp;</span> <span class="n">subcommand</span> <span class="o">=</span> <span class="n">find_subcommand</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
    <span class="n">argv</span><span class="o">.</span><span class="n">shift_argument</span>
    <span class="n">subcommand</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
  <span class="c1"># å¦‚æœ cmd ä¸ºæŠ½è±¡å‘½ä»¤ä¸”æŒ‡å®šäº†é»˜è®¤å‘½ä»¤ï¼Œåˆ™è¿”å›é»˜è®¤å‘½ä»¤ç»§ç»­è§£æå‚æ•°</span>
  <span class="k">elsif</span> <span class="n">abstract_command?</span> <span class="o">&amp;&amp;</span> <span class="n">default_subcommand</span>
    <span class="n">load_default_subcommand</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
  <span class="k">else</span>
    <span class="c1"># åˆå§‹åŒ–çœŸæ­£çš„ cmd å®ä¾‹</span>
    <span class="kp">new</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥è¯´ï¼Œ<code>CLAide</code> çš„å‘½ä»¤è§£æå°±æ˜¯ä¸€ä¸ª<strong>å¤šå‰æ ‘éå†</strong>ï¼Œé€šè¿‡åˆ†å‰²å‚æ•°åŠéå† <code>CLAide::Command</code> çš„å­ç±»ï¼Œæœ€ç»ˆæ‰¾åˆ°ç”¨æˆ·è¾“å…¥çš„ <code>normal command</code> å¹¶åˆå§‹åŒ–è¿”å›ã€‚<img src="http://cdn.nlark.com/yuque/0/2020/png/227152/1599006816575-464e442d-5b43-475f-bc5f-4b086c59190c.png?x-oss-process=image%2Fresize%2Cw_746" alt=""></p>
<p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªçŸ¥è¯†ç‚¹å°±æ˜¯ï¼Œ<code>CLAide::Command</code> æ˜¯å¦‚ä½•çŸ¥é“æœ‰å“ªäº›å­ç±»é›†æˆå®ƒçš„å‘¢ï¼Ÿ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">inherited</span><span class="p">(</span><span class="n">subcommand</span><span class="p">)</span>
  <span class="n">subcommands</span> <span class="o">&lt;&lt;</span> <span class="n">subcommand</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>è¿™é‡Œåˆ©ç”¨äº† <code>Ruby</code> æä¾›çš„ <em>Hook Method</em> <code>self.inherited</code> æ¥è·å–å®ƒæ‰€ç»§æ‰¿çš„å­ç±»ï¼Œå¹¶å°†å…¶ä¿å­˜åœ¨ <code>subcommands</code>ã€‚</strong>
å¦å¤–ï¼Œè¿™é‡Œåœ¨çœŸæ­£æ‰§è¡Œ <code>self.run</code> æ–¹æ³•ä¹‹å‰ä¼šéå†å½“å‰é¡¹ç›®æ‰€å¼•å…¥çš„ Gems åŒ…ä¸­çš„æŒ‡å®šç›®å½•ä¸‹çš„å‘½ä»¤æ’ä»¶æ–‡ä»¶ï¼Œå¹¶è¿›è¡Œæ’ä»¶åŠ è½½ï¼Œå…·ä½“å†…å®¹å°†åœ¨ <code>PluginManager</code> ä¸­å±•å¼€ã€‚</p>
<h3 id="argv-ä¼ å…¥å‚æ•°">ARGV ä¼ å…¥å‚æ•°</h3>
<p><code>CLAide</code> æä¾›äº†ä¸“é—¨çš„ç±» <code>ARGV</code> ç”¨äºè§£æå‘½ä»¤è¡Œä¼ å…¥çš„å‚æ•°ã€‚ä¸»è¦åŠŸèƒ½æ˜¯å¯¹ <code>Parse</code> è§£æåçš„ tuple åˆ—è¡¨è¿›è¡Œå„ç§è¿‡æ»¤ã€CURD ç­‰æ“ä½œã€‚
æŒ‰ç…§ <code>CALide</code> çš„å®šä¹‰å‚æ•°åˆ†ä¸‰ç§ç±»å‹ï¼š</p>
<ul>
<li><code>arg</code>: æ™®é€šçš„å®å‚ï¼Œæ‰€è°“çš„å®å‚å°±æ˜¯ç›´æ¥è·Ÿåœ¨å‘½ä»¤åé¢çš„ï¼Œä¸”ä¸å¸¦ä»»ä½• <code>--</code> ä¿®é¥°çš„å­—ç¬¦</li>
<li><code>flag</code>: ç®€å•ç†è§£ <code>flag</code> å°±æ˜¯é™å®šä¸º bool å˜é‡çš„ <code>option</code> ç±»å‹å‚æ•°ï¼Œå¦‚æœ <code>flag</code> å‰é¢æ·»åŠ å¸¦ <code>--no-</code> åˆ™å€¼ä¸º falseï¼Œå¦åˆ™ä¸º true</li>
<li><code>option</code>: å¯é€‰é¡¹å‚æ•°ï¼Œä»¥ <code>--</code> ä¸ºå‰ç¼€ä¸”ä»¥ <code>=</code> ä½œä¸ºåˆ†å‰²ç¬¦æ¥åŒºåˆ† key å’Œ value</li>
</ul>
<p>è€Œåœ¨ <code>ARGV</code> å†…éƒ¨åˆæä¾›äº†ç§æœ‰å·¥å…·ç±» <code>Parser</code> æ¥è§£æç»ˆç«¯çš„è¾“å…¥ï¼Œå…¶æ ¸å¿ƒæ–¹æ³•ä¸º <code>parse</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="k">module</span> <span class="nn">Parser</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">entries</span> <span class="o">=</span> <span class="o">[]</span>
    <span class="n">copy</span> <span class="o">=</span> <span class="n">argv</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:to_s</span><span class="p">)</span>
    <span class="n">double_dash</span> <span class="o">=</span> <span class="kp">false</span>
    <span class="k">while</span> <span class="n">argument</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">shift</span>
      <span class="k">next</span> <span class="k">if</span> <span class="o">!</span><span class="n">double_dash</span> <span class="o">&amp;&amp;</span> <span class="n">double_dash</span> <span class="o">=</span> <span class="p">(</span><span class="n">argument</span> <span class="o">==</span> <span class="s1">&#39;--&#39;</span><span class="p">)</span>
      <span class="n">type</span> <span class="o">=</span> <span class="n">double_dash</span> <span class="p">?</span> <span class="ss">:arg</span> <span class="p">:</span> <span class="n">argument_type</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
      <span class="n">parsed_argument</span> <span class="o">=</span> <span class="n">parse_argument</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span>
      <span class="n">entries</span> <span class="o">&lt;&lt;</span> <span class="o">[</span><span class="n">type</span><span class="p">,</span> <span class="n">parsed_argument</span><span class="o">]</span>
    <span class="k">end</span>
    <span class="n">entries</span>
  <span class="k">end</span>
  <span class="c1"># ,,,</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p>parse çš„è¿”å›å€¼ä¸º <code>[Array&lt;Array&lt;Symbol, String, Array&gt;&gt;]</code> ç±»å‹çš„ tupleï¼Œå…¶ä¸­ tuple çš„ç¬¬ä¸€ä¸ªå˜é‡ä¸ºå®å‚çš„ç±»å‹ï¼Œç¬¬äºŒä¸ªæ‰æ˜¯å¯¹åº”çš„å®å‚ã€‚
ä¾æ—§ä»¥ <code>pod update</code> ä¸ºä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">pod update Alamofire --no-repo-update --exclude-pods<span class="o">=</span>SwiftyJSON
</code></pre></td></tr></table>
</div>
</div><p><img src="http://cdn.nlark.com/yuque/0/2020/jpeg/98641/1598855030381-29d93c99-1c6c-4a40-8bf7-a40eee4140a7.jpeg?x-oss-process=image%2Fresize%2Cw_746" alt="">
è§£æåï¼Œè¾“å‡ºçš„ tuple åˆ—è¡¨å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="o">[</span>
  <span class="o">[</span><span class="ss">:arg</span><span class="p">,</span> <span class="s2">&#34;Alamofire&#34;</span><span class="o">]</span><span class="p">,</span>
  <span class="o">[</span><span class="ss">:flag</span><span class="p">,</span> <span class="o">[</span><span class="s2">&#34;repo-update&#34;</span><span class="p">,</span> <span class="kp">false</span><span class="o">]]</span><span class="p">,</span>
  <span class="o">[</span><span class="ss">:option</span><span class="p">,</span> <span class="o">[</span><span class="s2">&#34;exclude-pods&#34;</span><span class="p">,</span> <span class="s2">&#34;SwiftyJSON&#34;</span><span class="o">]]</span>
<span class="o">]</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="banner-ä¸è¾“å‡ºæ ¼å¼åŒ–">Banner ä¸è¾“å‡ºæ ¼å¼åŒ–</h2>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥èŠèŠ <code>CLAide</code> æä¾›çš„æ ¼å¼åŒ–æ•ˆæœçš„ bannerã€‚
é‚£ä»€ä¹ˆæ˜¯ banner å‘¢ï¼Ÿå›çœ‹ç¬¬ä¸€ä¸ªä¾‹å­ <code>pod --help</code> æ‰€è¾“å‡ºçš„å¸®åŠ©ä¿¡æ¯ï¼Œå®ƒåˆ†ä¸ºä¸‰ä¸ª Sectionï¼š</p>
<ul>
<li><code>Usage</code>ï¼šç”¨äºæè¯¥è¿°å‘½ä»¤çš„ç”¨æ³•</li>
<li><code>Commands</code>ï¼šç”¨äºæè¿°è¯¥å‘½ä»¤æ‰€åŒ…å«çš„å­å‘½ä»¤ï¼Œæ²¡æœ‰åˆ™ä¸æ˜¾ç¤ºã€‚åœ¨å­å‘½ä»¤å‰é¢å­˜åœ¨ä¸¤ç§ç±»å‹çš„æ ‡è¯†
<ul>
<li><code>+</code> ï¼šç”¨äºå¼ºè°ƒè¯¥ command æ˜¯å•ç‹¬æ·»åŠ çš„å­å‘½ä»¤</li>
<li><code>&gt;</code> ï¼šç”¨äºè¡¨ç¤ºæŒ‡å¼•çš„æ„æ€ï¼Œè¡¨ç¤ºè¯¥ command æ˜¯å½“å‰å‘½ä»¤çš„é»˜è®¤å®ç°</li>
</ul>
</li>
<li><code>Options</code>ï¼šç”¨äºæè¿°è¯¥å‘½ä»¤çš„å¯é€‰é¡¹</li>
</ul>
<p><strong>è¿™ä¸‰æ®µå¸®åŠ©ä¿¡æ¯å°±æ˜¯å¯¹åº”çš„ä¸åŒçš„ bannerã€‚</strong>
<code>CLAide</code> å¯¹äºè¾“å‡ºçš„ banner ä¿¡æ¯æä¾›äº† <a href="https://www.wikiwand.com/en/ANSI_escape_code">ANSI è½¬ä¹‰</a>ï¼Œç”¨äºåœ¨ä¸åŒçš„ç»ˆç«¯é‡Œæ˜¾ç¤ºå¯Œæ–‡æœ¬çš„æ•ˆæœã€‚banner çš„ä¸»è¦æ ¼å¼åŒ–æ•ˆæœå¦‚ä¸‹ï¼š</p>
<ol>
<li>å¯¹äº setcion æ ‡é¢˜ï¼š <code>Usage</code>ã€<code>Commands</code>ã€<code>Options</code> æ·»åŠ äº†ä¸‹åˆ’çº¿ä¸”åŠ ç²—å¤„ç†</li>
<li>Command é…ç½®ä¸ºç»¿è‰²</li>
<li>Options é…ç½®ä¸ºè“è‰²</li>
<li>æç¤ºè­¦å‘Šä¿¡æ¯é…ç½®ä¸ºé»„è‰²</li>
<li>é”™è¯¯ä¿¡æ¯åˆ™æ˜¯çº¢è‰²</li>
</ol>
<p>å¯¹äºè¿™äº›é…è‰²æ–¹æ¡ˆï¼Œ<code>CLAide</code> æä¾›äº† String çš„ convince method æ¥å®Œæˆ ANSI è½¬ä¹‰ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">String</span>
  <span class="k">def</span> <span class="nf">ansi</span>
    <span class="no">CLAide</span><span class="o">::</span><span class="no">ANSI</span><span class="o">::</span><span class="no">StringEscaper</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p>ä¾‹å¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="s2">&#34;example&#34;</span><span class="o">.</span><span class="n">ansi</span><span class="o">.</span><span class="n">yellow</span> <span class="c1">#=&gt; &#34;\e[33mexample\e[39m&#34;</span>
<span class="s2">&#34;example&#34;</span><span class="o">.</span><span class="n">ansi</span><span class="o">.</span><span class="n">on_red</span> <span class="c1">#=&gt; &#34;\e[41mexample\e[49m&#34;</span>
<span class="s2">&#34;example&#34;</span><span class="o">.</span><span class="n">ansi</span><span class="o">.</span><span class="n">bold</span>   <span class="c1">#=&gt; &#34;\e[1mexample\e[21m&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>å¯¹äº Banner çš„ä¸€äº›é«˜äº®æ•ˆæœä¹Ÿæä¾›äº† convince methodï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">prettify_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
  <span class="n">title</span><span class="o">.</span><span class="n">ansi</span><span class="o">.</span><span class="n">underline</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">prettify_subcommand</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
  <span class="nb">name</span><span class="o">.</span><span class="n">chomp</span><span class="o">.</span><span class="n">ansi</span><span class="o">.</span><span class="n">green</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">prettify_option_name</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
  <span class="nb">name</span><span class="o">.</span><span class="n">chomp</span><span class="o">.</span><span class="n">ansi</span><span class="o">.</span><span class="n">blue</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="pluginmanager-è½½å…¥æ’ä»¶">PluginManager è½½å…¥æ’ä»¶</h2>
<p><code>PluginManager</code> æ˜¯ Command çš„ç®¡ç†ç±»ï¼Œä¼šåœ¨ç¬¬ä¸€æ¬¡è¿è¡Œå‘½ä»¤ <code>self.run</code> æ—¶è¿›è¡ŒåŠ è½½ï¼Œä¸”ä»…åŠ è½½å‘½ä»¤ç±»ä¸­æŒ‡å®šå‰ç¼€æ ‡è¯†çš„æ–‡ä»¶ä¸‹çš„å‘½ä»¤ã€‚è®©æˆ‘ä»¬å…ˆçœ‹ <code>PluginManager.rb</code> çš„æ ¸å¿ƒå®ç°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">load_plugins</span><span class="p">(</span><span class="n">plugin_prefix</span><span class="p">)</span>
   <span class="n">loaded_plugins</span><span class="o">[</span><span class="n">plugin_prefix</span><span class="o">]</span> <span class="o">||=</span>
   <span class="n">plugin_gems_for_prefix</span><span class="p">(</span><span class="n">plugin_prefix</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">spec</span><span class="p">,</span> <span class="n">paths</span><span class="o">|</span>
     <span class="n">spec</span> <span class="k">if</span> <span class="n">safe_activate_and_require</span><span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="n">paths</span><span class="p">)</span>
   <span class="k">end</span><span class="o">.</span><span class="n">compact</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">plugin_gems_for_prefix</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>
   <span class="n">glob</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="si">#{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">_plugin</span><span class="si">#{</span><span class="no">Gem</span><span class="o">.</span><span class="n">suffix_pattern</span><span class="si">}</span><span class="s2">&#34;</span>
   <span class="no">Gem</span><span class="o">::</span><span class="no">Specification</span><span class="o">.</span><span class="n">latest_specs</span><span class="p">(</span><span class="kp">true</span><span class="p">)</span><span class="o">.</span><span class="n">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">spec</span><span class="o">|</span>
      <span class="n">matches</span> <span class="o">=</span> <span class="n">spec</span><span class="o">.</span><span class="n">matches_for_glob</span><span class="p">(</span><span class="n">glob</span><span class="p">)</span>
      <span class="o">[</span><span class="n">spec</span><span class="p">,</span> <span class="n">matches</span><span class="o">]</span> <span class="k">unless</span> <span class="n">matches</span><span class="o">.</span><span class="n">empty?</span>
   <span class="k">end</span><span class="o">.</span><span class="n">compact</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">safe_activate_and_require</span><span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="n">paths</span><span class="p">)</span>
  <span class="n">spec</span><span class="o">.</span><span class="n">activate</span>
  <span class="n">paths</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">path</span><span class="o">|</span> <span class="nb">require</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="p">}</span>
  <span class="kp">true</span>
<span class="k">rescue</span> <span class="no">Exception</span> <span class="o">=&gt;</span> <span class="n">exception</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p>æ•´ä½“çš„æµç¨‹å¤§è‡´æ˜¯ï¼š</p>
<ol>
<li>è°ƒç”¨ <code>load_plugins</code> å¹¶ä¼ å…¥ <code>plugin_prefix</code></li>
<li><code>plugin_gems_for_prefix</code> å¯¹æ’ä»¶åè¿›è¡Œå¤„ç†ï¼Œå–å‡ºæˆ‘ä»¬éœ€è¦åŠ è½½çš„æ–‡ä»¶</li>
<li>è°ƒç”¨ <code>safe_activate_and_require</code> è¿›è¡Œå¯¹åº”çš„ gem spec æ£€éªŒå¹¶å¯¹æ¯ä¸ªæ–‡ä»¶è¿›è¡ŒåŠ è½½</li>
</ol>
<p>CocoaPods çš„æ’ä»¶åŠ è½½æ­£æ˜¯ä¾æ‰˜äº CLAide çš„ <code>load_plugins</code>ï¼Œå®ƒä¼šéå†æ‰€æœ‰çš„ RubyGemï¼Œå¹¶æœç´¢è¿™äº› Gem ä¸­æ˜¯å¦åŒ…å«åä¸º <code>#{plugin_prefix}_plugin.rb</code> çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œåœ¨ Pod å‘½ä»¤çš„å®ç°ä¸­æœ‰å¦‚ä¸‹é…ç½®ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="nb">self</span><span class="o">.</span><span class="n">plugin_prefixes</span> <span class="o">=</span> <span class="sx">%w(claide cocoapods)</span>
</code></pre></td></tr></table>
</div>
</div><p>ä¹Ÿå°±æ˜¯è¯´åœ¨ Pod å‘½ä»¤æ‰§è¡Œå‰ï¼Œ<strong>å®ƒä¼šåŠ è½½æ‰€æœ‰åŒ…å« <code>claide_plugin.rb</code> æˆ– <code>cocoapods_plugin.rb</code> æ–‡ä»¶çš„ Gem</strong>ã€‚é€šè¿‡åœ¨è¿è¡Œæ—¶çš„æ–‡ä»¶æ£€æŸ¥æ¥åŠ è½½ç¬¦åˆè¦æ±‚çš„ç›¸å…³å‘½ä»¤ã€‚</p>
<p><img src="http://cdn.nlark.com/yuque/0/2020/png/227152/1599006816575-464e442d-5b43-475f-bc5f-4b086c59190c.png?x-oss-process=image%2Fresize%2Cw_746" alt="image.png"></p>
<h1 id="ç”¨-claide-å®ç°ä¸€æ¬¾--è´©å–æœº">ç”¨ CLAide å®ç°ä¸€æ¬¾ ğŸ¥¤ è´©å–æœº</h1>
<p>æœ€åä¸€èŠ‚è®©æˆ‘ä»¬ä¸€èµ·æ¥åˆ›å»ºä¸€ä¸ª CLAide å‘½ä»¤ã€‚éœ€æ±‚æ˜¯å¸Œæœ›å®ç°ä¸€ä¸ªè‡ªåŠ¨ ğŸ¥¤ è´©å–æœºï¼Œå®ƒæœ‰å¦‚ä¸‹åŠŸèƒ½ï¼šä¸»è¦å”®å– â˜•ï¸ å’Œ ğŸµï¼Œè¿™ä¸¤ç§ ğŸ¥¤ éƒ½å¯ä»¥æŒ‰éœ€é€‰æ‹©æ˜¯å¦æ·»åŠ  ğŸ¥› å’Œ ğŸ¬ï¼Œå¯¹äº ğŸ¬ è¿˜å¯ä»¥é€‰æ‹©ä¸åŒçš„ç”œåº¦ã€‚</p>
<ul>
<li>â˜•ï¸ï¼šå¯¹äºå’–å•¡ï¼Œæˆ‘ä»¬æä¾›äº†ï¼šBlackEyeã€Affogatoã€CaPheSuaDaã€RedTux çš„å£å‘³</li>
<li>ğŸµï¼šå¯¹äºèŒ¶ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸åŒçš„å“ç§ï¼Œæœ‰é»‘èŒ¶ã€ç»¿èŒ¶ã€ä¹Œé¾™èŒ¶å’Œç™½èŒ¶ï¼ŒåŒæ—¶èŒ¶è¿˜æä¾›äº†åŠ  ğŸ§Š çš„é€‰é¡¹</li>
</ul>
<h2 id="é…ç½®æ¨¡ç‰ˆé¡¹ç›®">é…ç½®æ¨¡ç‰ˆé¡¹ç›®</h2>
<p>åŸºäºä¸Šè¿°æ„æƒ³ï¼Œæˆ‘ä»¬æœ€ç»ˆçš„ <code>BeverageMaker</code> ç›®å½•å°†ç”±ä»¥ä¸‹æ–‡ä»¶ç»„æˆï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">.
â”œâ”€â”€ BeverageMaker.gemspec
â”‚   <span class="c1"># ...</span>
â”œâ”€â”€ exe
â”‚Â Â  â””â”€â”€ beverage-maker
â”œâ”€â”€ lib
â”‚Â Â  â”œâ”€â”€ beveragemaker
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ <span class="nb">command</span>
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ coffee.rb <span class="c1"># åŒ…å« abstract command ä»¥åŠç”¨äºåˆ¶ä½œä¸åŒå’–å•¡çš„ normal command</span>
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ maker.rb  <span class="c1"># Command æŠ½è±¡ç±»</span>
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ tea.rb    <span class="c1"># normal command, ä¸åŒç§ç±»çš„ ğŸµ é€šè¿‡å‚æ•°é…ç½®æ¥å®Œæˆ</span>
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ command.rb
â”‚Â Â  â”‚Â Â  â””â”€â”€ version.rb
â”‚Â Â  â””â”€â”€ beveragemaker.rb
â””â”€â”€ spec
    â”œâ”€â”€ BeverageMaker_spec.rb
    â””â”€â”€ spec_helper.rb
</code></pre></td></tr></table>
</div>
</div><h3 id="0x1-ç”Ÿæˆæ¨¡ç‰ˆé¡¹ç›®">0x1 ç”Ÿæˆæ¨¡ç‰ˆé¡¹ç›®</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>bundler gem GEM_NAME</code> å‘½ä»¤ç”Ÿæˆä¸€ä¸ªæ¨¡ç‰ˆé¡¹ç›®ï¼Œé¡¹ç›®å–åä¸º <strong>BeverageMaker</strong>ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="err">$</span> <span class="n">bundle</span> <span class="n">gem</span> <span class="no">BeverageMaker</span>
<span class="no">Creating</span> <span class="n">gem</span> <span class="s1">&#39;BeverageMaker&#39;</span><span class="o">...</span>
<span class="no">MIT</span> <span class="no">License</span> <span class="n">enabled</span> <span class="k">in</span> <span class="n">config</span>
<span class="no">Code</span> <span class="n">of</span> <span class="n">conduct</span> <span class="n">enabled</span> <span class="k">in</span> <span class="n">config</span>
  <span class="n">create</span>  <span class="no">BeverageMaker</span><span class="o">/</span><span class="no">Gemfile</span>
  <span class="n">create</span>  <span class="no">BeverageMaker</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="no">BeverageMaker</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">create</span>  <span class="no">BeverageMaker</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="no">BeverageMaker</span><span class="o">/</span><span class="n">version</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">create</span>  <span class="no">BeverageMaker</span><span class="o">/</span><span class="no">BeverageMaker</span><span class="o">.</span><span class="n">gemspec</span>
  <span class="n">create</span>  <span class="no">BeverageMaker</span><span class="o">/</span><span class="no">Rakefile</span>
  <span class="c1"># ...</span>
<span class="no">Initializing</span> <span class="n">git</span> <span class="n">repo</span> <span class="k">in</span> <span class="o">~</span><span class="sr">/$HOME/</span><span class="no">Desktop</span><span class="o">/</span><span class="no">BeverageMaker</span>
<span class="no">Gem</span> <span class="s1">&#39;BeverageMaker&#39;</span> <span class="n">was</span> <span class="n">successfully</span> <span class="n">created</span><span class="o">.</span> <span class="no">For</span> <span class="n">more</span> <span class="n">information</span> <span class="n">on</span> <span class="n">making</span> <span class="n">a</span> <span class="no">RubyGem</span> <span class="n">visit</span> <span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">bundler</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">guides</span><span class="o">/</span><span class="n">creating_gem</span><span class="o">.</span><span class="n">html</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="0x2-ä¿®æ”¹-gemspec-é…ç½®">0x2 ä¿®æ”¹ gemspec é…ç½®</h3>
<p>ç”Ÿæˆçš„é¡¹ç›®ä¸­éœ€è¦å°† <code>BeverageMaker.gemspec</code> æ–‡ä»¶æ‰€åŒ…å« <strong>TODO</strong> çš„å­—æ®µè¿›è¡Œæ›¿æ¢ï¼Œä½œä¸ºç¤ºä¾‹é¡¹ç›®ç›¸å…³é“¾æ¥éƒ½æ›¿æ¢ä¸ºä¸ªäººä¸»é¡µäº† ğŸ˜‚ã€‚
å¦å¤–ï¼Œéœ€è¦æ·»åŠ æˆ‘ä»¬çš„ä¾èµ– <code>'claide', '&gt;= 1.0.2', '&lt; 2.0'</code> å’Œ <code>'colored2', '~&gt; 3.1'</code>ã€‚</p>
<blockquote>
<p><strong>colored2</strong> ç”¨äº banner ä¿¡æ¯çš„ ANSI è½¬ä¹‰å¹¶ä½¿å…¶èƒ½åœ¨ç»ˆç«¯ä»¥å¯Œæ–‡æœ¬æ ¼å¼è¾“å‡ºã€‚</p>
</blockquote>
<p>æœ€ç»ˆ <code>.gempsc</code> é…ç½®å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="n">require_relative</span> <span class="s1">&#39;lib/BeverageMaker/version&#39;</span>

<span class="no">Gem</span><span class="o">::</span><span class="no">Specification</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">spec</span><span class="o">|</span>
  <span class="n">spec</span><span class="o">.</span><span class="n">name</span>          <span class="o">=</span> <span class="s2">&#34;BeverageMaker&#34;</span>
  <span class="n">spec</span><span class="o">.</span><span class="n">version</span>       <span class="o">=</span> <span class="no">BeverageMaker</span><span class="o">::</span><span class="no">VERSION</span>
  <span class="n">spec</span><span class="o">.</span><span class="n">authors</span>       <span class="o">=</span> <span class="o">[</span><span class="s2">&#34;Edmond&#34;</span><span class="o">]</span>
  <span class="n">spec</span><span class="o">.</span><span class="n">email</span>         <span class="o">=</span> <span class="o">[</span><span class="s2">&#34;chun574271939@gmail.com&#34;</span><span class="o">]</span>

  <span class="n">spec</span><span class="o">.</span><span class="n">summary</span>       <span class="o">=</span> <span class="s2">&#34;BeverageMaker&#34;</span>
  <span class="n">spec</span><span class="o">.</span><span class="n">description</span>   <span class="o">=</span> <span class="s2">&#34;BeverageMaker&#34;</span>
  <span class="n">spec</span><span class="o">.</span><span class="n">homepage</span>      <span class="o">=</span> <span class="s2">&#34;https://looseyi.github.io&#34;</span>
  <span class="n">spec</span><span class="o">.</span><span class="n">license</span>       <span class="o">=</span> <span class="s2">&#34;MIT&#34;</span>
  <span class="n">spec</span><span class="o">.</span><span class="n">required_ruby_version</span> <span class="o">=</span> <span class="no">Gem</span><span class="o">::</span><span class="no">Requirement</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&#34;&gt;= 2.3.0&#34;</span><span class="p">)</span>

  <span class="n">spec</span><span class="o">.</span><span class="n">metadata</span><span class="o">[</span><span class="s2">&#34;allowed_push_host&#34;</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&#34;https://looseyi.github.io&#34;</span>

  <span class="n">spec</span><span class="o">.</span><span class="n">metadata</span><span class="o">[</span><span class="s2">&#34;homepage_uri&#34;</span><span class="o">]</span> <span class="o">=</span> <span class="n">spec</span><span class="o">.</span><span class="n">homepage</span>
  <span class="n">spec</span><span class="o">.</span><span class="n">metadata</span><span class="o">[</span><span class="s2">&#34;source_code_uri&#34;</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&#34;https://looseyi.github.io&#34;</span>
  <span class="n">spec</span><span class="o">.</span><span class="n">metadata</span><span class="o">[</span><span class="s2">&#34;changelog_uri&#34;</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&#34;https://looseyi.github.io&#34;</span>

  <span class="n">spec</span><span class="o">.</span><span class="n">files</span>         <span class="o">=</span> <span class="no">Dir</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">,</span> <span class="bp">__FILE__</span><span class="p">))</span> <span class="k">do</span>
    <span class="sb">`git ls-files -z`</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\x0</span><span class="s2">&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">reject</span> <span class="p">{</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="n">f</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sr">%r{^(test|spec|features)/}</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>
  <span class="c1"># 1</span>
  <span class="n">spec</span><span class="o">.</span><span class="n">bindir</span>        <span class="o">=</span> <span class="s2">&#34;exe&#34;</span>
  <span class="n">spec</span><span class="o">.</span><span class="n">executables</span>   <span class="o">=</span> <span class="s2">&#34;beverage-maker&#34;</span>
  <span class="n">spec</span><span class="o">.</span><span class="n">require_paths</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&#34;lib&#34;</span><span class="o">]</span>
   
  <span class="n">spec</span><span class="o">.</span><span class="n">add_runtime_dependency</span> <span class="s1">&#39;claide&#39;</span><span class="p">,</span>         <span class="s1">&#39;&gt;= 1.0.2&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt; 2.0&#39;</span>
  <span class="n">spec</span><span class="o">.</span><span class="n">add_runtime_dependency</span> <span class="s1">&#39;colored2&#39;</span><span class="p">,</span>       <span class="s1">&#39;~&gt; 3.1&#39;</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="0x3-æ·»åŠ å‘½ä»¤è¡Œå…¥å£">0x3 æ·»åŠ å‘½ä»¤è¡Œå…¥å£</h3>
<p>é€šè¿‡ä¿®æ”¹ <code>.gemspec</code> çš„ <code>bindir</code> å’Œ <code>executables</code> å­—æ®µï¼ŒæŠŠæœ€ç»ˆçš„ binary æ‰§è¡Œæ–‡ä»¶æš´éœ²ç»™ç”¨æˆ·ï¼Œä½¿å…¶æˆä¸ºä¸€ä¸ªçœŸæ­£çš„ CLIï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="n">spec</span><span class="o">.</span><span class="n">bindir</span>        <span class="o">=</span> <span class="s2">&#34;exe&#34;</span>
<span class="n">spec</span><span class="o">.</span><span class="n">executables</span>   <span class="o">=</span> <span class="s2">&#34;beverage-maker&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>åœ¨é»˜è®¤ç”Ÿæˆçš„æ¨¡ç‰ˆä¸­æŒ‡å®šçš„ <code>bindir</code> ä¸º <code>/bin</code> ç›®å½•ï¼Œè¿™é‡Œæˆ‘ä»¬æ›¿æ¢ä¸ºæ–°å»ºçš„ <code>exe</code> ç›®å½•ï¼Œå¹¶åœ¨ <code>exe</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º <code>beverage-maker</code> çš„æ–‡ä»¶ï¼Œå®ƒå°†ä½œä¸º CLI çš„å…¥å£ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="ch">#!/usr/bin/env ruby</span>

<span class="nb">require</span> <span class="s1">&#39;beveragemaker&#39;</span>

<span class="no">BeverageMaker</span><span class="o">::</span><span class="no">Command</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="no">ARGV</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="æ·»åŠ å‘½ä»¤å®ç°">æ·»åŠ å‘½ä»¤å®ç°</h2>
<p>ä¸ºäº†è®© Demo ç»“æ„æ¸…æ™°ï¼Œæˆ‘ä»¬å°†ä¸èƒ½ç±»å‹çš„é¥®æ–™åˆ¶ä½œåˆ†åˆ°äº†ä¸åŒçš„æ–‡ä»¶å’Œå‘½ä»¤ç±»ä¸­ã€‚
<img src="http://cdn.nlark.com/yuque/0/2020/jpeg/98641/1598855030357-6c577c34-8687-4aa3-b495-876a2a6e4ecb.jpeg?x-oss-process=image%2Fresize%2Cw_746" alt=""></p>
<h3 id="beveragemaker">BeverageMaker</h3>
<p>å…ˆæ¥å®ç° <code>beverage-maker</code> å‘½ä»¤ï¼Œå®ƒæ˜¯ä¸€ä¸ª <code>abstract command</code>ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">&#39;claide&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;colored2&#39;</span>

<span class="k">module</span> <span class="nn">BeverageMaker</span>
  <span class="c1"># å¼•å…¥å…·ä½“çš„ coffee &amp; tea maker</span>
  <span class="nb">require</span> <span class="s1">&#39;beveragemaker/command/coffee&#39;</span>
  <span class="nb">require</span> <span class="s1">&#39;beveragemaker/command/tea&#39;</span>
  
  <span class="k">class</span> <span class="nc">Command</span> <span class="o">&lt;</span> <span class="no">CLAide</span><span class="o">::</span><span class="no">Command</span>

    <span class="nb">self</span><span class="o">.</span><span class="n">command</span> <span class="o">=</span> <span class="s1">&#39;beverage-maker&#39;</span>  
    <span class="nb">self</span><span class="o">.</span><span class="n">abstract_command</span> <span class="o">=</span> <span class="kp">true</span>   
    <span class="nb">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Make delicious beverages from the comfort of your terminal.&#39;</span>

    <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">options</span>
      <span class="o">[</span>
        <span class="o">[</span><span class="s1">&#39;--no-milk&#39;</span><span class="p">,</span> <span class="s1">&#39;Donâ€™t add milk to the beverage&#39;</span><span class="o">]</span><span class="p">,</span>
        <span class="o">[</span><span class="s1">&#39;--sweetener=[sugar|honey]&#39;</span><span class="p">,</span> <span class="s1">&#39;Use one of the available sweeteners&#39;</span><span class="o">]</span><span class="p">,</span>
      <span class="o">].</span><span class="n">concat</span><span class="p">(</span><span class="k">super</span><span class="p">)</span>
    <span class="k">end</span>
  
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
      <span class="vi">@add_milk</span> <span class="o">=</span> <span class="n">argv</span><span class="o">.</span><span class="n">flag?</span><span class="p">(</span><span class="s1">&#39;milk&#39;</span><span class="p">,</span> <span class="kp">true</span><span class="p">)</span>
      <span class="vi">@sweetener</span> <span class="o">=</span> <span class="n">argv</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s1">&#39;sweetener&#39;</span><span class="p">)</span>
      <span class="k">super</span>
    <span class="k">end</span>
  
    <span class="k">def</span> <span class="nf">validate!</span>
      <span class="k">super</span>
      <span class="k">if</span> <span class="vi">@sweetener</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="sx">%w(sugar honey)</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="vi">@sweetener</span><span class="p">)</span>
        <span class="n">help!</span> <span class="s2">&#34;`</span><span class="si">#{</span><span class="vi">@sweetener</span><span class="si">}</span><span class="s2">&#39; is not a valid sweetener.&#34;</span>
      <span class="k">end</span>
    <span class="k">end</span>
  
    <span class="k">def</span> <span class="nf">run</span>
      <span class="nb">puts</span> <span class="s1">&#39;* Boiling waterâ€¦&#39;</span>
      <span class="nb">sleep</span> <span class="mi">1</span>
      <span class="k">if</span> <span class="vi">@add_milk</span>
        <span class="nb">puts</span> <span class="s1">&#39;* Adding milkâ€¦&#39;</span>
        <span class="nb">sleep</span> <span class="mi">1</span>
      <span class="k">end</span>
      <span class="k">if</span> <span class="vi">@sweetener</span>
        <span class="nb">puts</span> <span class="s2">&#34;* Adding </span><span class="si">#{</span><span class="vi">@sweetener</span><span class="si">}</span><span class="s2">â€¦&#34;</span>
        <span class="nb">sleep</span> <span class="mi">1</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><p>æ­£å¸¸æ¥è¯´ï¼Œå¯¹äºä¸åŒå£å‘³çš„å’–å•¡å’ŒèŒ¶æ˜¯å¯ä»¥ç”¨ç›¸åŒçš„å‘½ä»¤æ¨¡å¼æ¥å®ç°çš„ï¼Œä¸è¿‡ä¸ºäº†æ›´å¥½çš„å±•ç¤º <code>CLAide</code> çš„æ•ˆæœï¼Œæˆ‘ä»¬å°†å’–å•¡çš„ç”Ÿäº§é…ç½®ä¸º <code>abstact command</code>ï¼Œå¯¹äºä¸åŒå£å‘³çš„å’–å•¡ï¼Œéœ€è¦å®ç°ä¸åŒçš„ <code>normal command</code>ã€‚è€ŒèŒ¶çš„ç”Ÿäº§ç›´æ¥é€šè¿‡ <code>normal command</code> å®ç°ï¼Œä¸åŒå“ç§çš„èŒ¶å¶ä¼šä»¥å‚æ•°çš„å½¢å¼æ¥é…ç½®ã€‚</p>
<h3 id="coffee">Coffee</h3>
<p>æ¥ç€æ·»åŠ  â˜•ï¸ çš„ä»£ç </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Coffee</span> <span class="o">&lt;</span> <span class="no">Command</span>
  <span class="c1"># ...</span>
  <span class="nb">self</span><span class="o">.</span><span class="n">abstract_command</span> <span class="o">=</span> <span class="kp">true</span>

  <span class="k">def</span> <span class="nf">run</span>
    <span class="k">super</span>
    <span class="nb">puts</span> <span class="s2">&#34;* Grinding </span><span class="si">#{</span><span class="nb">self</span><span class="o">.</span><span class="n">class</span><span class="o">.</span><span class="n">command</span><span class="si">}</span><span class="s2"> beansâ€¦&#34;</span>
    <span class="nb">sleep</span> <span class="mi">1</span>
    <span class="nb">puts</span> <span class="s1">&#39;* Brewing coffeeâ€¦&#39;</span>
    <span class="nb">sleep</span> <span class="mi">1</span>
    <span class="nb">puts</span> <span class="s1">&#39;* Enjoy!&#39;</span>
  <span class="k">end</span>

  <span class="k">class</span> <span class="nc">BlackEye</span> <span class="o">&lt;</span> <span class="no">Coffee</span>
    <span class="nb">self</span><span class="o">.</span><span class="n">summary</span> <span class="o">=</span> <span class="s1">&#39;A Black Eye is dripped coffee with a double shot of &#39;</span> <span class="p">\</span>
    <span class="s1">&#39;espresso&#39;</span>
  <span class="k">end</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="tea">Tea</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Tea</span> <span class="o">&lt;</span> <span class="no">Command</span>
  <span class="c1"># ...</span>
  <span class="nb">self</span><span class="o">.</span><span class="n">arguments</span> <span class="o">=</span> <span class="o">[</span>
    <span class="no">CLAide</span><span class="o">::</span><span class="no">Argument</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s1">&#39;FLAVOR&#39;</span><span class="p">,</span> <span class="kp">true</span><span class="p">),</span>
  <span class="o">]</span>

  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">options</span>
    <span class="o">[[</span><span class="s1">&#39;--iced&#39;</span><span class="p">,</span> <span class="s1">&#39;the ice-tea version&#39;</span><span class="o">]].</span><span class="n">concat</span><span class="p">(</span><span class="k">super</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
    <span class="vi">@flavor</span> <span class="o">=</span> <span class="n">argv</span><span class="o">.</span><span class="n">shift_argument</span>
    <span class="vi">@iced</span> <span class="o">=</span> <span class="n">argv</span><span class="o">.</span><span class="n">flag?</span><span class="p">(</span><span class="s1">&#39;iced&#39;</span><span class="p">)</span>
    <span class="k">super</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">validate!</span>
    <span class="k">super</span>
    <span class="k">if</span> <span class="vi">@flavor</span><span class="o">.</span><span class="n">nil?</span>
      <span class="n">help!</span> <span class="s1">&#39;A flavor argument is required.&#39;</span>
    <span class="k">end</span>
    <span class="k">unless</span> <span class="sx">%w(black green oolong white)</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="vi">@flavor</span><span class="p">)</span>
      <span class="n">help!</span> <span class="s2">&#34;`</span><span class="si">#{</span><span class="vi">@flavor</span><span class="si">}</span><span class="s2">&#39; is not a valid flavor.&#34;</span>
    <span class="k">end</span>
  <span class="k">end</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="å®‰è£…--è´©å–æœº">å®‰è£… ğŸ¥¤ è´©å–æœº</h2>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºæ­£å¸¸å‘å¸ƒçš„ gem åŒ…ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ <code>gem install GEM_NAME</code> å®‰è£…ã€‚
è€Œæˆ‘ä»¬çš„ Demo ç¨‹åºå¹¶æœªå‘å¸ƒï¼Œé‚£è¦å¦‚ä½•å®‰è£…ä½¿ç”¨å‘¢ï¼Ÿå¹¸å¥½ Gem æä¾›äº†æºç å®‰è£…çš„æ–¹å¼ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">gem build *.gemspec
gem install *.gem
</code></pre></td></tr></table>
</div>
</div><p><code>gem build</code> å¯ä»¥æ ¹æ®ä¸€ä¸ª <code>.gemspec</code> ç”Ÿæˆä¸€ä¸ª <code>.gem</code> æ–‡ä»¶ä¾› gem å®‰è£…ï¼Œæ‰€ä»¥åœ¨æ‹¥æœ‰æºç çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œä¸Šé¢å‘½ä»¤å°±å¯ä»¥å®‰è£…äº†ã€‚
æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">$ gem build *.gemspec
WARNING:  description and summary are identical
WARNING:  See http://guides.rubygems.org/specification-reference/ <span class="k">for</span> <span class="nb">help</span>
  Successfully built RubyGem
  Name: BeverageMaker
  Version: 0.1.0
  File: BeverageMaker-0.1.0.gem
  
$ gem install *.gem

Successfully installed BeverageMaker-0.1.0
Parsing documentation <span class="k">for</span> BeverageMaker-0.1.0
Done installing documentation <span class="k">for</span> BeverageMaker after <span class="m">0</span> seconds
<span class="m">1</span> gem installed
</code></pre></td></tr></table>
</div>
</div><p>ç¼–è¯‘é€šè¿‡ï¼
ç°åœ¨å¯ä»¥å¼€å§‹æˆ‘ä»¬çš„ ğŸ¥¤ åˆ¶ä½œå•¦ï¼</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="err">$</span> <span class="n">beverage</span><span class="o">-</span><span class="n">maker</span>
<span class="ss">Usage</span><span class="p">:</span>
  <span class="err">$</span> <span class="n">beverage</span><span class="o">-</span><span class="n">maker</span> <span class="no">COMMAND</span>

    <span class="no">Make</span> <span class="n">delicious</span> <span class="n">beverages</span> <span class="n">from</span> <span class="n">the</span> <span class="n">comfort</span> <span class="n">of</span> <span class="n">yourterminal</span><span class="o">.</span>

<span class="ss">Commands</span><span class="p">:</span>
  <span class="o">+</span> <span class="n">coffee</span>                    <span class="no">Drink</span> <span class="n">brewed</span> <span class="n">from</span> <span class="n">roasted</span> <span class="n">coffee</span> <span class="n">beans</span>

<span class="ss">Options</span><span class="p">:</span>
  <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">milk</span>                   <span class="no">Don</span><span class="err">â€™</span><span class="n">t</span> <span class="n">add</span> <span class="n">milk</span> <span class="n">to</span> <span class="n">the</span> <span class="n">beverage</span>
  <span class="o">--</span><span class="n">sweetener</span><span class="o">=[</span><span class="n">sugar</span><span class="o">|</span><span class="n">honey</span><span class="o">]</span>   <span class="no">Use</span> <span class="n">one</span> <span class="n">of</span> <span class="n">the</span> <span class="n">available</span> <span class="n">sweeteners</span>
  <span class="o">--</span><span class="n">version</span>                   <span class="no">Show</span> <span class="n">the</span> <span class="n">version</span> <span class="n">of</span> <span class="n">the</span> <span class="n">tool</span>
  <span class="o">--</span><span class="n">verbose</span>                   <span class="no">Show</span> <span class="n">more</span> <span class="n">debugging</span> <span class="n">information</span>
  <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">ansi</span>                   <span class="no">Show</span> <span class="n">output</span> <span class="n">without</span> <span class="no">ANSI</span> <span class="n">codes</span>
  <span class="o">--</span><span class="n">help</span>                      <span class="no">Show</span> <span class="n">help</span> <span class="n">banner</span> <span class="n">of</span> <span class="n">specified</span> <span class="n">command</span>
</code></pre></td></tr></table>
</div>
</div><p>æ¥ä¸€æ¯ black-eye â˜•ï¸ï¼Œä¼‘æ¯ä¸€ä¸‹å§!</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="err">$</span> <span class="n">beverage</span><span class="o">-</span><span class="n">maker</span> <span class="n">coffee</span> <span class="n">black</span><span class="o">-</span><span class="n">eye</span>
<span class="o">*</span> <span class="no">Boiling</span> <span class="n">water</span><span class="err">â€¦</span>
<span class="o">*</span> <span class="no">Adding</span> <span class="n">milk</span><span class="err">â€¦</span>
<span class="o">*</span> <span class="no">Grinding</span> <span class="n">black</span><span class="o">-</span><span class="n">eye</span> <span class="n">beans</span><span class="err">â€¦</span>
<span class="o">*</span> <span class="no">Brewing</span> <span class="n">coffee</span><span class="err">â€¦</span>
<span class="o">*</span> <span class="no">Enjoy</span><span class="o">!</span>
</code></pre></td></tr></table>
</div>
</div><p>å¦‚éœ€æœ¬æ–‡çš„ Demo ä»£ç ï¼Œè¯·è®¿é—®ï¼š<a href="https://github.com/looseyi/BeverageMaker">https://github.com/looseyi/BeverageMaker</a></p>
<h1 id="æ€»ç»“">æ€»ç»“</h1>
<p>æœ¬æ–‡ç®€å•èŠäº† <code>CLAide</code> çš„å®ç°ï¼Œå¹¶æ‰‹åŠ¨åˆ¶ä½œäº†ä¸€æ¬¾ ğŸ¥¤ è´©å–æœºæ¥å±•ç¤º CALide çš„å‘½ä»¤é…ç½®ã€‚ä¸»è¦æ„Ÿå—å¦‚ä¸‹ï¼š</p>
<ol>
<li>é€šè¿‡å¯¹æºç å¯¹é˜…è¯»ï¼Œç»ˆäºäº†è§£äº†å¯¹ Â <code>pod</code> å‘½ä»¤çš„çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿</li>
<li>ä»…éœ€ç®€å•é…ç½® <code>Command</code> bannerï¼Œå°±èƒ½æœ‰æ¯”è¾ƒç²¾ç¾çš„ç»ˆç«¯è¾“å‡ºæ•ˆæœå’Œå¸®åŠ©æç¤ºç­‰</li>
<li>æä¾›çš„æŠ½è±¡å‘½ä»¤åŠŸèƒ½ï¼Œæ–¹ä¾¿çš„å°†ç›¸å…³é€»è¾‘æ”¶å£åˆ°ç»Ÿä¸€åˆ°å‘½ä»¤ä¸­ï¼Œæ–¹ä¾¿æŸ¥é˜…</li>
<li>ä»ä¾§é¢ç®€å•äº†è§£äº†ï¼Œå¦‚ä½•åœ¨ç»ˆç«¯è¾“å‡ºå¸¦å¯Œæ–‡æœ¬æ•ˆæœçš„æç¤ºä¿¡æ¯</li>
</ol>
<h1 id="çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†">çŸ¥è¯†ç‚¹é—®é¢˜æ¢³ç†</h1>
<p>è¿™é‡Œç½—åˆ—äº†å››ä¸ªé—®é¢˜ç”¨æ¥è€ƒå¯Ÿä½ æ˜¯å¦å·²ç»æŒæ¡äº†è¿™ç¯‡æ–‡ç« ï¼Œå¦‚æœæ²¡æœ‰å»ºè®®ä½ åŠ å…¥<strong>æ”¶è—</strong>å†æ¬¡é˜…è¯»ï¼š</p>
<ol>
<li><code>CLAide</code> é¢„è®¾çš„ banner æœ‰å“ªäº›ï¼Œå…¶ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆ ï¼Ÿ</li>
<li><code>CALide</code> ä¸­è®¾å®šçš„ Argument æœ‰å‡ ç§ç±»å‹ï¼ŒåŒºåˆ«æ˜¯ä»€ä¹ˆ ï¼Ÿ</li>
<li><code>CALide</code> ä¸­æŠ½è±¡å‘½ä»¤çš„å’Œæ™®é€šå‘½ä»¤çš„åŒºåˆ« ï¼Ÿ</li>
<li>è¦å®ç° CLI éœ€è¦ä¿®æ”¹ <code>.gemspec</code> ä¸­çš„å“ªäº›é…ç½® ï¼Ÿ</li>
</ol>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">æ–‡ç« ä½œè€…</span>
    <span class="item-content">åœŸåœŸEdmondæœ¨</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">ä¸Šæ¬¡æ›´æ–°</span>
    <span class="item-content">
        2020-09-02
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/cocoapods/">CocoaPods</a>
          <a href="/tags/ios/">iOS</a>
          <a href="/tags/ruby/">Ruby</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/sourcecode-cocoapods/04-cocoapods-podfile/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">4. Podfile çš„è§£æé€»è¾‘</span>
            <span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span>
          </a>
        <a class="next" href="/post/sourcecode-cocoapods/02-cocoapods-corecomponents/">
            <span class="next-text nav-default">2. æ•´ä½“æŠŠæ¡ CocoaPods æ ¸å¿ƒç»„ä»¶</span>
            <span class="next-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  
    <script src="https://utteranc.es/client.js"
            repo="looseyi/looseyi.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:chun574271939@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://twitter.com/looseyi" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://github.com/looseyi" class="iconfont icon-github" title="github"></a>
      <a href="https://www.weibo.com/foreverclp" class="iconfont icon-weibo" title="weibo"></a>
      <a href="https://www.zhihu.com/people/tu-tu-edmondmu" class="iconfont icon-zhihu" title="zhihu"></a>
  <a href="http://looseyi.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://gohugo.io">Hugo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2019-12-11 - 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">åœŸåœŸEdmondæœ¨</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-62789092-1', 'auto');
	ga('set', 'anonymizeIp', true);
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







</body>
</html>
